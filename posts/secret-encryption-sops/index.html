<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE" /><meta property="og:locale" content="en" /><meta name="description" content="Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not. If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE. SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. Age is a simple, modern, and secure file encryption tool, format, and build using Go. It can encrypt and decrypt your files making then safe enough to commit to your Git repos!" /><meta property="og:description" content="Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not. If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE. SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. Age is a simple, modern, and secure file encryption tool, format, and build using Go. It can encrypt and decrypt your files making then safe enough to commit to your Git repos!" /><link rel="canonical" href="https://docs.technotim.live/posts/secret-encryption-sops/" /><meta property="og:url" content="https://docs.technotim.live/posts/secret-encryption-sops/" /><meta property="og:site_name" content="Techno Tim Documentation" /><meta property="og:image" content="https://docs.technotim.live/assets/img/headers/encryption-magnifying-glass.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-01T09:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://docs.technotim.live/assets/img/headers/encryption-magnifying-glass.jpg" /><meta property="twitter:title" content="Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE" /><meta name="twitter:site" content="@technotimlive" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-02-20T23:14:04-06:00","datePublished":"2022-10-01T09:00:00-05:00","description":"Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not. If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE. SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. Age is a simple, modern, and secure file encryption tool, format, and build using Go. It can encrypt and decrypt your files making then safe enough to commit to your Git repos!","headline":"Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE","image":"https://docs.technotim.live/assets/img/headers/encryption-magnifying-glass.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://docs.technotim.live/posts/secret-encryption-sops/"},"url":"https://docs.technotim.live/posts/secret-encryption-sops/"}</script><title>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE | Techno Tim Documentation</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim Documentation"><meta name="application-name" content="Techno Tim Documentation"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Techno Tim Documentation</a></div><div class="site-subtitle font-italic">Video documentation for all your copy pasta needs!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://l.technotim.live/subscribe" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://l.technotim.live/twitch" aria-label="twitch" target="_blank" rel="noopener"> <i class="fab fa-twitch"></i> </a> <a href="https://l.technotim.live/patreon" aria-label="patreon" target="_blank" rel="noopener"> <i class="fab fa-patreon"></i> </a> <a href="https://l.technotim.live/discord" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://github.com/timothystewart6" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://l.technotim.live/instagram" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href="https://l.technotim.live/linkedin" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://l.technotim.live/mastodon" aria-label="mastodon" target="_blank" rel="noopener me"> <i class="fab fa-mastodon"></i> </a> <a href="https://l.technotim.live/tiktok" aria-label="tiktok" target="_blank" rel="noopener"> <i class="fab fa-tiktok"></i> </a> <a href="https://l.technotim.live/facebook" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1664632800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 1, 2022 </em> </span> <span> Updated <em class="" data-ts="1676956444" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 20, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/img/headers/encryption-magnifying-glass.jpg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/img/headers/encryption-magnifying-glass.jpg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://l.technotim.live/twitter">Techno Tim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="792 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p>Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not. If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE. SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. Age is a simple, modern, and secure file encryption tool, format, and build using Go. It can encrypt and decrypt your files making then safe enough to commit to your Git repos!</p><p>A HUGE thanks to Datree for sponsoring this video!<br /> Combat misconfigurations. Empower engineers. <a href="https://www.datree.io">https://www.datree.io</a></p><iframe class="embed-video youtube lazyload" src="https://www.youtube.com/embed/1BquzE3Yb4I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p>📺 <a href="https://www.youtube.com/watch?v=1BquzE3Yb4I">Watch Video</a></p><h2 id="install-sops"><span class="mr-2">Install SOPS</span><a href="#install-sops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can install sops by <a href="/posts/install-mozilla-sops/">following this guide</a>.</p><p>test with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">-v</span>
</pre></table></code></div></div><p>should see</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops 3.7.3 <span class="o">(</span>latest<span class="o">)</span>
</pre></table></code></div></div><h2 id="install-age"><span class="mr-2">Install Age</span><a href="#install-age" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can install age by <a href="/posts/install-age/">following this guide</a></p><p>test <code class="language-plaintext highlighter-rouge">age</code> with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> age <span class="nt">-version</span>
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">v1.0.0
</span></pre></table></code></div></div><p>test <code class="language-plaintext highlighter-rouge">age-keygen</code> with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> age-keygen <span class="nt">-version</span>
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">v1.0.0
</span></pre></table></code></div></div><h2 id="configure-keys"><span class="mr-2">configure keys</span><a href="#configure-keys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Now that we have <code class="language-plaintext highlighter-rouge">age</code> installed we need to create a public and private key</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>age-keygen <span class="nt">-o</span> key.txt
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">age-keygen: warning: writing secret key to a world-readable file
Public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428t
</span></pre></table></code></div></div><p>let’s look at the contents</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cat </span>key.txt
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>created: 2022-09-26T21:55:47-05:00
<span class="gp">#</span><span class="w"> </span>public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428t
<span class="go">AGE-SECRET-KEY-1HJCRJVK7EE3A5N8CRP8YSDUGZKNW90Y5UR2RGYAS8L279LFP6LCQU5ADNR
</span></pre></table></code></div></div><blockquote class="prompt-info"><p><em>Remember this is a secret so keep this safe!</em> Do not commit this!</p></blockquote><p>move the file and add to our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> ~/.sops
<span class="nb">mv</span> ./key.txt ~/.sops
</pre></table></code></div></div><p>add it to our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>nano ~/.zshrc 
<span class="c"># or nano ~/.bashrc</span>
</pre></table></code></div></div><p>add to the end of file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">SOPS_AGE_KEY_FILE</span><span class="o">=</span><span class="nv">$HOME</span>/.sops/key.txt
</pre></table></code></div></div><p>source our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">source</span> ~/.zshrc 
<span class="c"># or source ~/.bashrc</span>
</pre></table></code></div></div><h2 id="now-lets-encrypt"><span class="mr-2">Now! Let’s encrypt</span><a href="#now-lets-encrypt" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A few ways you can do this. You can encrypt in place or encrypt with an editor but we’re going to do an in place encryption.</p><h2 id="yaml"><span class="mr-2">YAML</span><a href="#yaml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This can be kubernetes secrets, helm values, or just plain old yaml</p><p>create a secret with the following contents</p><p><code class="language-plaintext highlighter-rouge">secret.yaml</code></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">mysql-secret</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">stringData</span><span class="pi">:</span>
    <span class="na">MYSQL_USER</span><span class="pi">:</span> <span class="s">root</span>
    <span class="na">MYSQL_PASSWORD</span><span class="pi">:</span> <span class="s">super-Secret-Password!!!!</span>
</pre></table></code></div></div><p>to encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><p>to decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><h2 id="kubernetes"><span class="mr-2">Kubernetes</span><a href="#kubernetes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you want to decrypt this secret on the fly and apply to kubernetes</p><p>encrypt first</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><p>decrypt and pipe to kubectl</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> ./secret.yaml | kubectl apply <span class="nt">-f</span> -
</pre></table></code></div></div><p>check it with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>k describe secrets mysql-secret-test
</pre></table></code></div></div><p>then</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> kubectl get secret mysql-secret-test <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.data}'</span>
</pre></table></code></div></div><p>then</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl get secret mysql-secret-test <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.data.MYSQL_PASSWORD}'</span>  | <span class="nb">base64</span> <span class="nt">--decode</span>
</pre></table></code></div></div><h2 id="vscode"><span class="mr-2">VSCode</span><a href="#vscode" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>install vscode extension</p><p>choose the beta for sops because that supports age + sops</p><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.yaml</code> to <code class="language-plaintext highlighter-rouge">.gitignore</code></p><p>encrypt .env files</p><p>make sure extension is installed</p><h2 id="env-files"><span class="mr-2">.ENV Files</span><a href="#env-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>create</p><p><code class="language-plaintext highlighter-rouge">secret.env</code></p><pre><code class="language-env">MYSQL_USER=superroot
MYSQL_PASSWORD="super-Secret-Password!!!!############"
</code></pre><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> .env
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> .env
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.env</code> to your <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="json-files"><span class="mr-2">JSON Files</span><a href="#json-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.json</code></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"mySqlUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"superroot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super-Secret-Password!!!!#######"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.json
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.json
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.json</code> to your <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="ini-files"><span class="mr-2">INI Files</span><a href="#ini-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.ini</code></p><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nn">[database]</span>
<span class="py">user</span>     <span class="p">=</span> <span class="s">superroot</span>
<span class="py">password</span> <span class="p">=</span> <span class="s">super-Secret-Password!!!!1223</span>
</pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.ini
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.ini
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.ini</code> to you <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="files"><span class="mr-2">Files</span><a href="#files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.sql</code></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c1">--- https://xkcd.com/327/</span>
<span class="c1">--- DO NOT USE</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">'Robert'</span> <span class="p">);</span>  <span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">STUDENTS</span><span class="p">;</span> <span class="c1">--' )</span>
</pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--in-place</span> ./secret.sql
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--in-place</span> ./secret.sql
</pre></table></code></div></div><h2 id="flux"><span class="mr-2">Flux</span><a href="#flux" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you’re thinking of doing GitOps with Flux, you can <a href="https://www.youtube.com/watch?v=PFLimPh5-wo">check out my video on this topic</a> or see my <a href="/posts/flux-devops-gitops/">documentation</a>. You can do cluster decryption and fully automate decryption of secrets.</p><p>In cluster decryption with Flux</p><p><a href="https://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryption">https://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryption</a></p><h2 id="links"><span class="mr-2">Links</span><a href="#links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>⚙️ See all the hardware I recommend at <a href="https://l.technotim.live/gear">https://l.technotim.live/gear</a></p><p>🚀 Don’t forget to check out the <a href="https://l.technotim.live/quick-start">🚀Launchpad repo</a> with all of the quick start source files</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>homelab</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/git/" class="post-tag no-text-decoration" >git</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/secrets/" class="post-tag no-text-decoration" >secrets</a> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/sops/" class="post-tag no-text-decoration" >sops</a> <a href="/tags/age/" class="post-tag no-text-decoration" >age</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim%20Documentation&url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Fsecret-encryption-sops%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim%20Documentation&u=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Fsecret-encryption-sops%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Fsecret-encryption-sops%2F&text=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim%20Documentation" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Fsecret-encryption-sops%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/vlan-firewall-unifi/">Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network Application</a><li><a href="/posts/rotate-sops-encryption-keys/">Rotating your Encryption Keys and Updating your Secrets with SOPS</a><li><a href="/posts/longhorn-install/">Cloud Native Distributed Storage in Kubernetes with Longhorn</a><li><a href="/posts/k3s-etcd-ansible/">Fully Automated K3S etcd High Availability Install</a><li><a href="/posts/rancher-2-upgrade-backup-restore/">How to Upgrade, Backup, and Restore Rancher 2</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/k3s/">k3s</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/rotate-sops-encryption-keys/"><div class="card-body"> <em class="small" data-ts="1678028400" data-df="ll" > Mar 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Rotating your Encryption Keys and Updating your Secrets with SOPS</h3><div class="text-muted small"><p> If you’ve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you’re not familiar with encrypting your secrets with SOPS and Age,...</p></div></div></a></div><div class="card"> <a href="/posts/rancher-2-upgrade-backup-restore/"><div class="card-body"> <em class="small" data-ts="1593266400" data-df="ll" > Jun 27, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Upgrade, Backup, and Restore Rancher 2</h3><div class="text-muted small"><p> It use to be hard to back up Rancher, but with Rancher 2 it’s super simple. Upgrading, backing up, and restoring your Rancher server should be part of your regular routine. Join me in this tutori...</p></div></div></a></div><div class="card"> <a href="/posts/code-server-self-host/"><div class="card-body"> <em class="small" data-ts="1596895200" data-df="ll" > Aug 8, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Self-Host Code Server in Your Homelab -- VS Code in a Browser!</h3><div class="text-muted small"><p> Have you ever wanted to run VS Code in your browser? What if you had access to your terminal and could pull and commit code as well as push it up to GitHub all from a browser or tablet? That’s ex...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/45-drives-storinator/" class="btn btn-outline-primary" prompt="Older"><p>NEW SERVER! Deploying 100 TB of Storage to my HomeLab!</p></a> <a href="/posts/rgb-storinator/" class="btn btn-outline-primary" prompt="Newer"><p>I Put RGB Fans in My Server and I am NOT Apologizing</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "techno-tim/techno-tim.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk", "data-category": "Comments", "data-category-id": "DIC_kwDODy-1C84CSN7z", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/k3s/">k3s</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://l.technotim.live/twitter">Techno Tim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">See something wrong? Want to contribute? <a href="https://github.com/techno-tim/techno-tim.github.io/tree/master/_posts">Edit this page 📝</href></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available!</p><button type="button" class="btn btn-primary" aria-label="Update"> Update 🚀 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NZ5V7DM8F5"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NZ5V7DM8F5'); }); </script>
