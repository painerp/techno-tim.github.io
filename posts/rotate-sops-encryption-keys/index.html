<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Rotating your Encryption Keys and Updating your Secrets with SOPS" /><meta property="og:locale" content="en" /><meta name="description" content="If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to encrypt your secrets and even hide them in plain sight in a Git repo. I am happy (and relieved) that I started doing this for all of my secrets." /><meta property="og:description" content="If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to encrypt your secrets and even hide them in plain sight in a Git repo. I am happy (and relieved) that I started doing this for all of my secrets." /><link rel="canonical" href="https://docs.technotim.live/posts/rotate-sops-encryption-keys/" /><meta property="og:url" content="https://docs.technotim.live/posts/rotate-sops-encryption-keys/" /><meta property="og:site_name" content="Techno Tim Documentation" /><meta property="og:image" content="https://docs.technotim.live/assets/img/headers/museum-hieroglyphics.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-03-05T09:00:00-06:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://docs.technotim.live/assets/img/headers/museum-hieroglyphics.jpg" /><meta property="twitter:title" content="Rotating your Encryption Keys and Updating your Secrets with SOPS" /><meta name="twitter:site" content="@technotimlive" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-05T22:21:06-06:00","datePublished":"2023-03-05T09:00:00-06:00","description":"If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to encrypt your secrets and even hide them in plain sight in a Git repo. I am happy (and relieved) that I started doing this for all of my secrets.","headline":"Rotating your Encryption Keys and Updating your Secrets with SOPS","image":"https://docs.technotim.live/assets/img/headers/museum-hieroglyphics.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://docs.technotim.live/posts/rotate-sops-encryption-keys/"},"url":"https://docs.technotim.live/posts/rotate-sops-encryption-keys/"}</script><title>Rotating your Encryption Keys and Updating your Secrets with SOPS | Techno Tim Documentation</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim Documentation"><meta name="application-name" content="Techno Tim Documentation"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Techno Tim Documentation</a></div><div class="site-subtitle font-italic">Video documentation for all your copy pasta needs!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://l.technotim.live/subscribe" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://l.technotim.live/twitch" aria-label="twitch" target="_blank" rel="noopener"> <i class="fab fa-twitch"></i> </a> <a href="https://l.technotim.live/patreon" aria-label="patreon" target="_blank" rel="noopener"> <i class="fab fa-patreon"></i> </a> <a href="https://l.technotim.live/discord" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://github.com/timothystewart6" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://l.technotim.live/instagram" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href="https://l.technotim.live/linkedin" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://l.technotim.live/mastodon" aria-label="mastodon" target="_blank" rel="noopener me"> <i class="fab fa-mastodon"></i> </a> <a href="https://l.technotim.live/tiktok" aria-label="tiktok" target="_blank" rel="noopener"> <i class="fab fa-tiktok"></i> </a> <a href="https://l.technotim.live/facebook" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Rotating your Encryption Keys and Updating your Secrets with SOPS</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Rotating your Encryption Keys and Updating your Secrets with SOPS</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1678028400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 5, 2023 </em> </span> <span> Updated <em class="" data-ts="1678076466" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 5, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/img/headers/museum-hieroglyphics.jpg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/img/headers/museum-hieroglyphics.jpg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://l.technotim.live/twitter">Techno Tim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="606 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><p>If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to <a href="/posts/secret-encryption-sops">encrypt your secrets</a> and even hide them in plain sight in a Git repo. I am happy (and relieved) that I started doing this for all of my secrets.</p><p>This works great, until you need to rotate your encryption key that‚Äôs used to encrypt your secrets. I use <a href="/posts/flux-devops-gitops">FLUX for GitOps</a> which helps me deliver changes to my Kubernetes cluster via code and since I can commit my infrastructure, I can also commit my secrets as code too (SOPS, or Secrets Operations). This means that all of my secret files (typically <code class="language-plaintext highlighter-rouge">secret.sops.yaml</code>) are all encrypted using my key. But what happens when I need to change the key, either for good security hygiene or because it was compromised? The short answer is, there‚Äôs no easy way other than writing a little bit of code.</p><h3 id="scripting-it-with-bash"><span class="mr-2">Scripting it with Bash</span><a href="#scripting-it-with-bash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>First you‚Äôll need to generate a new <code class="language-plaintext highlighter-rouge">age</code> file with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>age-keygen <span class="nt">-o</span> age.agekey
</pre></table></code></div></div><p>This will output a <code class="language-plaintext highlighter-rouge">age.agekey</code> file. Take note of this location.</p><p>Then you‚Äôll want to execute this script in the folder where you have secrets that need to be updated.</p><p>This script isn‚Äôt anything ground breaking but hopefully it will help you update all of your secrets without having to go and manually change them yourself.</p><div file="sops_rotate_key.sh" class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="sops_rotate_key.sh"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="c"># Define the paths to the old/current and new age key files</span>
<span class="nv">SOPS_AGE_KEY_FILE</span><span class="o">=</span>~/.config/sops/age/keys.txt
<span class="nv">SOPS_AGE_KEY_FILE_NEW</span><span class="o">=</span>~/.config/sops/age/age.agekey

<span class="c"># Define the commands to decrypt and encrypt the file</span>
<span class="nv">DECRYPT_COMMAND</span><span class="o">=</span><span class="s2">"sops --decrypt --age </span><span class="se">\$</span><span class="s2">(cat </span><span class="nv">$SOPS_AGE_KEY_FILE</span><span class="s2"> |grep -oP </span><span class="se">\"</span><span class="s2">public key: </span><span class="se">\K</span><span class="s2">(.*)</span><span class="se">\"</span><span class="s2">) --encrypted-regex '^(data|stringData)</span><span class="nv">$'</span><span class="s2"> --in-place"</span>
<span class="nv">ENCRYPT_COMMAND</span><span class="o">=</span><span class="s2">"sops --encrypt --age </span><span class="se">\$</span><span class="s2">(cat </span><span class="nv">$SOPS_AGE_KEY_FILE_NEW</span><span class="s2"> |grep -oP </span><span class="se">\"</span><span class="s2">public key: </span><span class="se">\K</span><span class="s2">(.*)</span><span class="se">\"</span><span class="s2">) --encrypted-regex '^(data|stringData)</span><span class="nv">$'</span><span class="s2"> --in-place"</span>

<span class="c"># Find all the *.sops.yaml files recursively in the current directory and apply the decrypt and encrypt commands to them</span>
find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"*.sops.yaml"</span> <span class="nt">-type</span> f <span class="nt">-print0</span> | <span class="k">while </span><span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> <span class="nt">-r</span> <span class="nt">-d</span> <span class="s1">''</span> file<span class="p">;</span> <span class="k">do
  </span><span class="nb">eval</span> <span class="s2">"</span><span class="nv">$DECRYPT_COMMAND</span><span class="s2"> </span><span class="nv">$file</span><span class="s2">"</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="nv">$ENCRYPT_COMMAND</span><span class="s2"> </span><span class="nv">$file</span><span class="s2">"</span>
<span class="k">done</span>
</pre></table></code></div></div><p>It works like this:</p><ul><li><code class="language-plaintext highlighter-rouge">SOPS_AGE_KEY_FILE</code> is the path to your existing <code class="language-plaintext highlighter-rouge">keys.txt</code> or <code class="language-plaintext highlighter-rouge">age.agekey</code> file<li><code class="language-plaintext highlighter-rouge">SOPS_AGE_KEY_FILE_NEW</code> is the path to your new <code class="language-plaintext highlighter-rouge">age.agekey</code> file.<li>It will look for files matching <code class="language-plaintext highlighter-rouge">*.sops.yaml</code> recursively and then decrypt the file using the old key, and encrypt it using the new key.</ul><p>After running this script you should see all of your secrets now encrypted with the new key! You can now replace your old key file with your new one so that <code class="language-plaintext highlighter-rouge">SOPS_AGE_KEY_FILE</code> is referencing. You should test decrypting your secrets before saving them.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> secret.sops.yaml
</pre></table></code></div></div><h2 id="updating-your-flux-secret-in-kubernetes"><span class="mr-2">Updating your FLUX Secret in Kubernetes</span><a href="#updating-your-flux-secret-in-kubernetes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you are able to see the decrypted secret, you are all set as far as the ket goes. Another thing you‚Äôll need to do is delete your old secret in Kubernetes and replace it with this new one so that your secrets can be decrypted in your cluster!</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl delete <span class="nt">-n</span> flux-system secrets sops-age
</pre></table></code></div></div><p>Then create new secret from the new file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nb">cat </span>age.agekey |
kubectl create secret generic sops-age <span class="se">\</span>
<span class="nt">--namespace</span><span class="o">=</span>flux-system <span class="se">\</span>
<span class="nt">--from-file</span><span class="o">=</span>age.agekey<span class="o">=</span>/dev/stdin
</pre></table></code></div></div><p>Now you should be all set! Be sure to keep your new <code class="language-plaintext highlighter-rouge">age.agekey</code> somewhere safe.</p><h2 id="links"><span class="mr-2">Links</span><a href="#links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>‚öôÔ∏è See all the hardware I recommend at <a href="https://l.technotim.live/gear">https://l.technotim.live/gear</a></p><p>üöÄ Don‚Äôt forget to check out the <a href="https://l.technotim.live/quick-start">üöÄLaunchpad repo</a> with all of the quick start source files</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/utilities/'>utilities</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/sops/" class="post-tag no-text-decoration" >sops</a> <a href="/tags/age/" class="post-tag no-text-decoration" >age</a> <a href="/tags/flux/" class="post-tag no-text-decoration" >flux</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Rotating%20your%20Encryption%20Keys%20and%20Updating%20your%20Secrets%20with%20SOPS%20-%20Techno%20Tim%20Documentation&url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Frotate-sops-encryption-keys%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Rotating%20your%20Encryption%20Keys%20and%20Updating%20your%20Secrets%20with%20SOPS%20-%20Techno%20Tim%20Documentation&u=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Frotate-sops-encryption-keys%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Frotate-sops-encryption-keys%2F&text=Rotating%20your%20Encryption%20Keys%20and%20Updating%20your%20Secrets%20with%20SOPS%20-%20Techno%20Tim%20Documentation" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fdocs.technotim.live%2Fposts%2Frotate-sops-encryption-keys%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/vlan-firewall-unifi/">Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network Application</a><li><a href="/posts/rotate-sops-encryption-keys/">Rotating your Encryption Keys and Updating your Secrets with SOPS</a><li><a href="/posts/longhorn-install/">Cloud Native Distributed Storage in Kubernetes with Longhorn</a><li><a href="/posts/k3s-etcd-ansible/">Fully Automated K3S etcd High Availability Install</a><li><a href="/posts/rancher-2-upgrade-backup-restore/">How to Upgrade, Backup, and Restore Rancher 2</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/k3s/">k3s</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/secret-encryption-sops/"><div class="card-body"> <em class="small" data-ts="1664632800" data-df="ll" > Oct 1, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE</h3><div class="text-muted small"><p> Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo i...</p></div></div></a></div><div class="card"> <a href="/posts/update-flux/"><div class="card-body"> <em class="small" data-ts="1675472400" data-df="ll" > Feb 3, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Updating Flux Installation Using the Latest Binary from CLI</h3><div class="text-muted small"><p> What is Flux? Flux is a tool for keeping Kubernetes clusters in sync with sources of configuration (like Git repositories), and automating updates to configuration when there is new code to deploy...</p></div></div></a></div><div class="card"> <a href="/posts/flux-devops-gitops/"><div class="card-body"> <em class="small" data-ts="1652446800" data-df="ll" > May 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The FASTEST way to deploy apps to Kubernetes - GitOps with FLUX</h3><div class="text-muted small"><p> I think I found the perfect GitOps and DevOps toolkit with FluxCD and Kubernetes. Flux is an open source GitOps solution that helps your deploy app and infrastructure with automation. It can moni...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/vlan-firewall-unifi/" class="btn btn-outline-primary" prompt="Older"><p>Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network Application</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "techno-tim/techno-tim.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk", "data-category": "Comments", "data-category-id": "DIC_kwDODy-1C84CSN7z", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/rancher/">rancher</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag" href="/tags/hardware/">hardware</a> <a class="post-tag" href="/tags/portainer/">portainer</a> <a class="post-tag" href="/tags/proxmox/">proxmox</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/k3s/">k3s</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> ¬© 2023 <a href="https://l.technotim.live/twitter">Techno Tim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">See something wrong? Want to contribute? <a href="https://github.com/techno-tim/techno-tim.github.io/tree/master/_posts">Edit this page üìù</href></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available!</p><button type="button" class="btn btn-primary" aria-label="Update"> Update üöÄ </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1.11.6/dayjs.min.js,npm/dayjs@1.11.6/locale/en.min.js,npm/dayjs@1.11.6/plugin/relativeTime.min.js,npm/dayjs@1.11.6/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-NZ5V7DM8F5"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NZ5V7DM8F5'); }); </script>
