[ { "title": "Rotating your Encryption Keys and Updating your Secrets with SOPS", "url": "/posts/rotate-sops-encryption-keys/", "categories": "utilities", "tags": "sops, age, flux, kubernetes", "date": "2023-03-05 09:00:00 -0600", "snippet": "If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age,...", "content": "If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to encrypt your secrets and even hide them in plain sight in a Git repo. I am happy (and relieved) that I started doing this for all of my secrets.This works great, until you need to rotate your encryption key that‚Äôs used to encrypt your secrets. I use FLUX for GitOps which helps me deliver changes to my Kubernetes cluster via code and since I can commit my infrastructure, I can also commit my secrets as code too (SOPS, or Secrets Operations). This means that all of my secret files (typically secret.sops.yaml) are all encrypted using my key. But what happens when I need to change the key, either for good security hygiene or because it was compromised? The short answer is, there‚Äôs no easy way other than writing a little bit of code.Scripting it with BashFirst you‚Äôll need to generate a new age file withage-keygen -o age.agekeyThis will output a age.agekey file. Take note of this location.Then you‚Äôll want to execute this script in the folder where you have secrets that need to be updated.This script isn‚Äôt anything ground breaking but hopefully it will help you update all of your secrets without having to go and manually change them yourself.#!/bin/bash# Define the paths to the old/current and new age key filesSOPS_AGE_KEY_FILE=~/.config/sops/age/keys.txtSOPS_AGE_KEY_FILE_NEW=~/.config/sops/age/age.agekey# Define the commands to decrypt and encrypt the fileDECRYPT_COMMAND=\"sops --decrypt --age \\$(cat $SOPS_AGE_KEY_FILE |grep -oP \\\"public key: \\K(.*)\\\") --encrypted-regex '^(data|stringData)$' --in-place\"ENCRYPT_COMMAND=\"sops --encrypt --age \\$(cat $SOPS_AGE_KEY_FILE_NEW |grep -oP \\\"public key: \\K(.*)\\\") --encrypted-regex '^(data|stringData)$' --in-place\"# Find all the *.sops.yaml files recursively in the current directory and apply the decrypt and encrypt commands to themfind . -name \"*.sops.yaml\" -type f -print0 | while IFS= read -r -d '' file; do eval \"$DECRYPT_COMMAND $file\" eval \"$ENCRYPT_COMMAND $file\"doneIt works like this: SOPS_AGE_KEY_FILE is the path to your existing keys.txt or age.agekey file SOPS_AGE_KEY_FILE_NEW is the path to your new age.agekey file. It will look for files matching *.sops.yaml recursively and then decrypt the file using the old key, and encrypt it using the new key.After running this script you should see all of your secrets now encrypted with the new key! You can now replace your old key file with your new one so that SOPS_AGE_KEY_FILE is referencing. You should test decrypting your secrets before saving them.sops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' secret.sops.yamlUpdating your FLUX Secret in KubernetesIf you are able to see the decrypted secret, you are all set as far as the ket goes. Another thing you‚Äôll need to do is delete your old secret in Kubernetes and replace it with this new one so that your secrets can be decrypted in your cluster!kubectl delete -n flux-system secrets sops-ageThen create new secret from the new filecat age.agekey |kubectl create secret generic sops-age \\--namespace=flux-system \\--from-file=age.agekey=/dev/stdinNow you should be all set! Be sure to keep your new age.agekey somewhere safe.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network Application", "url": "/posts/vlan-firewall-unifi/", "categories": "homelab", "tags": "unifi, vlan, network", "date": "2023-03-04 09:00:00 -0600", "snippet": "What is a VLAN and How Do They Help?Today we‚Äôre going to cover setting up VLANs using UniFi‚Äôs network controller. We‚Äôll set up a VLAN, from start to finish, which includes creating a new network, ...", "content": "What is a VLAN and How Do They Help?Today we‚Äôre going to cover setting up VLANs using UniFi‚Äôs network controller. We‚Äôll set up a VLAN, from start to finish, which includes creating a new network, configuring a wireless network that uses VLANs, and then we‚Äôll set up firewall rules to make sure we‚Äôre keeping our network safe. If you think VLANs are only for the enterprise, you‚Äôre wrong, I will show you how they are helpful at home too.So what‚Äôs a VLAN? A VLAN or Virtual Local Area Networks, is a group of devices, computers, or servers that communicate with each other as if they are on the same physical LAN, but they are actually located on separate physical LAN segments. VLANs can be created by configuring a managed network switch to segment the network into different broadcast domains.So why are VLANs important, even to the home user? VLANs are important for security. They can help isolate sensitive data and systems from the rest of your network, improving security by preventing unauthorized access. VLANs are important for performance. VLANs can be used to separate network traffic into different segments, reducing network congestion and improving overall performance. VLANS are important for management. VLANS can be used to simplify network management by grouping devices based on location, department, or even function making it much easier to configure, monitor, and troubleshoot. VLANs give you flexibility. VLANS allow for network changes and reconfigurations without physical changes to your network infrastructure saving you time and money, and we all want to save that, right? So what‚Äôs not to love about VLANs if they give you greater control over network traffic, help optimize network performance, give you better security, and give you management and flexibility?Well, for me it was complexity and knowing where to start.üì∫ Watch VideoHardwareUbiquiti UniFi 6 Lite Access Point - https://amzn.to/41ZhyR7UniFI UDM SE - https://amzn.to/3yu7vpMUniFi UDM Pro - https://amzn.to/3J8Ebtw(Affiliate links are included in this description. I may receive a small commission at no cost to you.)How to Create a VLAN with UniFiA list of common VLANs in UniFi Network Application Navigate Settings Choose Networks Choose ‚ÄúCreate New Network‚Äù Name it whatever we like (IoT) Choose something descriptive Choose your router (if applicable), but I wouldn‚Äôt offload routing unless you know what you‚Äôre doing. I typically uncheck auto scale network and define it myself We‚Äôll choose the host address and netmask While we‚Äôre at it we should also choose manual for the advanced section Choose a VLAN Id I typically match the 3rd octet in my case that would be 100 If you‚Äôre using Apple devices or Chromecast (or similar devices) on this network, you‚Äôll want to turn on IGMP snooping &amp; Multicast DNS DHCP Mode - you‚Äôll want to keep as DHCP server For DHCP Range you‚Äôll want to choose the beginning and end of your range. Can be anything within range. At home I usually start at 100 so I know which devices are using DHCP at a glance. There are other options here that you don‚Äôt really need to change but if you do, change them to your likingCongrats you just created your first VLAN! üéâCreating Wireless Network for a VLANA list of common WiFI networks in UniFi Network ApplicationOnce we‚Äôve created our VLAN, we can now add this to a wireless network. This is perfect for IoT devices or really any VLAN that you want to use over your wireless network. First, we‚Äôll go to Settings, then WiFi Then choose create new WiFi Network We‚Äôll name the network and give it a password Then we‚Äôll choose the Network it belongs to (IoT) In the network list we can see our newly created network! You can make any other adjustments you need to your wireless network, but I am going to keep the defaults. Then we‚Äôll hit applyIf you check your access points, you can now see this wireless network being set up and provisioned with the new config that contains our new WiFi network that is bound to our VLAN!Assigning a VLAN to a Switch portUniFi Network application port managementYou can now assign this to one of your switch post by going into your switch and assigning it this VLAN / VLAN IDChoose the new VLAN and let your device get a new DHCP address from the new VLAN. You should expect to see an IP in the range that we set above.Once you choose once we assign it, let‚Äôs connect a device and test it out.Connect a device, check its IP, ping google, then ping another device on another VLAN. Uh-oh!UniFi allows inter VLAN communication out of the box. I guess this was a conscious decision from them to make things easier, but it does make your networks open to other networks.We can fix that, with a firewall rule!Configuring a Network ProfileA list of common WiFI networks in UniFi Network ApplicationBefore we set up our firewall rules, first let‚Äôs create a profile. Profiles are a simple way to group items or alias them. This comes in handy later when creating firewall rules. Navigate to Profiles Create a new Profile Name it something like ‚Äú(VLAN NAME) Only‚Äù Set type to IPv4 Address/Subnet Add all of your other VLANs 192.168.0.0/24 (this is the default network) 192.168.10.0/24 (this is my ‚ÄúTrusted‚Äù network) Again, this Profile is for all other VLANs, not our new VLAN we just created.Configuring Firewall RuleIn order to block inter VLAN Communication we‚Äôll need to set up some firewall rules. The pattern I usually follow is blocking all traffic from one VLAN destined to all other VLANs. This can be done by creating Profiles. Navigate to Firewall &amp; Security Choose the Type For inter VLAN communication you‚Äôll want to choose ‚ÄúLAN In‚Äù Give your Rule a description, I usually follow the convention Block thing to other thing e.g. Block IoT to ALL Be sure this applies before predefined rules for Action, choose ‚ÄúDrop‚Äù For Source Type, Choose ‚ÄúNetwork‚Äù For Network choose your new VLAN e.g. ‚ÄúIoT‚Äù For Destination choose ‚ÄúPort/IP Group‚Äù For IPv4 Address Group choose ‚ÄúIoT Only‚Äù (this is the Profile we created above) For Port Group choose ‚ÄúAny‚ÄùThis rule will block all communication that that originates on your IoT VLAN to all other VLANs (IoT Only).You‚Äôll also want to be sure that this rule applies after every rule that you want to allow in your list of Firewall rules. Navigate to Firewall &amp; Security Check rule order Be sure that any rule you create that Allows / Accepts is above this rule that Blocks / Denies.TestingBe sure to test all of your firewall rules!Once you have these rules in place, I highly recommend you test your firewall rules. Some examples of things you should test Can you communicate with the IoT VLAN from your Trusted VLAN? Can you communicate with the Trusted VLAN from your IoT VLAN? Can you communicate with the gateway (192.168.100.1) from your IoT VLAN? Can you communicate with DNS from your IoT VLAN?Checking these types of things will help you verify that your network rules are being applied properly. Repeat these tests anytime you make changes.Wrapping upAt this point you should have a new VLAN that works on your WiFi access points, your network ports, and should have firewall rules in place to prevent unauthorized access! You can simply repeat this process for every new VLAN that you need! Have you set up VLANs yet?Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The Ultimate Guide to Wake on LAN for Windows, MacOS, and Linux", "url": "/posts/wake-on-lan/", "categories": "utilities", "tags": "wol, windows, mac, linux, network, network, wake-on-lan", "date": "2023-02-19 09:00:00 -0600", "snippet": "What is Wake on LAN and why is it so hard?After releasing my video on the PiKVM I realized that there was so much confusion about Wake on LAN, and rightfully so, that I decided to put together this...", "content": "What is Wake on LAN and why is it so hard?After releasing my video on the PiKVM I realized that there was so much confusion about Wake on LAN, and rightfully so, that I decided to put together this guide on how to configure Wake on LAN on any machine. Wake on LAN (WoL) is a networking standard that allows a computer to be turned on by sending a network packet. The client sends a special packet (sometimes referred to as a ‚Äúmagic packet‚Äù) and the remote machine will wake up either from a cold power state or from sleep. This is where it starts to get complicated because different hardware manufactures have implemented different controls in BIOS to enable or disable this, and to make even more complex operating systems like Windows, macOS, and Linux have also implemented their own way to wake the machine up when it‚Äôs sleeping or in a low powered state. I am just going to throw this out there, Wake on LAN is hard. Since there are many different combinations I will try to cover how to configure your machines wake up successfully regardless of hardware, operating system, and power state.Preparing your hardware for Wake on LANIn order to wake your machine up, we have to be sure that WoL features are turned on in the BIOS and that other features are disabled. Since I cannot test every single BIOS out there, I am going to use my machine as an example for the types of options you will need to enable or disable. Most of the options should be named similarly however where it is located in your BIOS will depend on your manufacturer.First, you‚Äôll need to get into the BIOS of the machine, this is typically done by pressing a key at book like f2 or del but varies by machine.Once you‚Äôre in you‚Äôre in we‚Äôll start changing some settings.Power settingsYou‚Äôll want to look around for something similar to power settings. If you do not see these options in your power settings, it could be in advanced, networking, or onboard devices.Power settings menu for Intel NUC. This will look different for your machine but the idea is still the sameHere are some things to look for: Deep S4/S5 Sleep - You‚Äôll want to disable this, otherwise only the power button will wake the machine which will disable Wake on LAN Wake on LAN from S4/S5 - You‚Äôll want to enable this setting and if it has an option choose Power on - Normal Boot Wake System from S5 - You‚Äôll want to disable this. This is basically an alarm clock for your machine. There‚Äôs no need to enable this unless you want set a time for it to turn on every day. I‚Äôve used this in the past as a contingency plan for some of my servers in case they were powered off accidentally. I would set an alarm for 12 AM. USB S4/S5 Power - I typically disable this if it‚Äôs a server since nothing should be plugged in but if it‚Äôs a desktop with USB devices you want powered you can turn it on safely. Wake on LAN - enable this might sound obvious but some older systems have an option that says exactly that however newer systems have options for waking in all of the different sleep states. What to do when AC Power is restored - This is optional but I usually set it to Stay Off if it‚Äôs a desktop, Power On if it‚Äôs a server that should always be on, and Last power state if it‚Äôs something like a machine that I wake seldomly. There is one exception, which is if you have a way to toggle the power remotely too. I have a USP PDU Pro from UniFi that I can toggle all of my servers on and off. If you are able to toggle them on and off, the best setting is Power On, that way you have a way to power them on, even if they were gracefully shut down previously. Another quick check you can do is power down the machine and check to be sure the network light is lit up on your NIC. If it‚Äôs not, this means Wake on LAN is not enabled on your machine and you‚Äôll have to find the option in your BIOS to make it work.Bare Metal Wake upIf you don‚Äôt have an operating system on your machine yet, you should be able to wake up the machine over the network now. If you do have an operating system on your machine, another way you can test a bare metal / cold boot wake is by pulling the power on the machine and then plugging it back in. The reason this should work is because modern operating systems might not fully shut down (they go into a sort of sleep) or might disable WoL on the NIC when shutting down. We‚Äôll fix this in the next section.Waking up a Windows machineAfter you enabled Wake on LAN in the BIOS, and verified you see the light on your NIC blinking when you power off your machine, we can now enable Wake on LAN at the operating system level for Windows. This will work on all modern versions of Windows (Windows 10 and Windows 11).Device managerFirst we‚Äôll want to open the Device Manager. You can do this from the UI or from a command promptdevmgmt.mscBe sure to select the network card that you use to connect to your network. Once open you‚Äôll want to expand Network adapters and find your network adapter, then right click and choose Properties Then choose the Power Management tab and be sure that all of these options are enabled Allow the computer to turn off this device to save power Allow this device to wake the computer Only allow a magic packet to wake the computer. Power Management options for your network adapter.Then we‚Äôll need to verify a few more settings. These settings may or may not exist and depend on your network adapter manufacturer. Click on the Advanced Tab for your Network Adapter Find Wake on Magic Packet and set it to Enabled Find WOL &amp; Shutdown Link Speed and set it to 10 Mbps You‚Äôll want to be sure that your switch supports this speed, otherwise Auto should be fine Click OKYou should check to see if Wake on LAN works before proceeding to the next step since this might not be necessary with your machine.Fast StartupAnother Windows Feature that can prevent a machine from shutting down properly to allow Wake on LAN is Fast Startup. This disables hibernation. I recommend testing to see if Wake on LAN works before disabling this.First, we‚Äôll need to open the Power Control Panel. You can do this from the UI or from a command promptpowercfg.cplThen we‚Äôll need to change some settings Click Choose what the power buttons do from the left menu Click Change settings that are currently unavailable Uncheck Turn on fast startup (recommended) Click Save changesYou should now check to see if Wake on LAN works for your machine.Waking up a Linux machineAfter you enable Wake on LAN in the BIOS, and verified you see the light on your NIC blinking when you power off your machine, we can now enable Wake on LAN at the operating system level for Linux. This sounds odd but I have found that machines (especially Linux) need WoL turned on for each NIC.Install ethtool if you don‚Äôt have it alreadysudo apt updatesudo apt install ethtoolFirst check to see if WoL is supported by your NICip a # this will list all of your NICssudo ethtool eno1 # replace with one of the NICs you want to checkThis should output something similar toSettings for eno1: Supported ports: [ TP ] Supported link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Supported pause frame use: No Supports auto-negotiation: Yes Supported FEC modes: Not reported Advertised link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Advertised pause frame use: No Advertised auto-negotiation: Yes Advertised FEC modes: Not reported Speed: 1000Mb/s Duplex: Full Auto-negotiation: on Port: Twisted Pair PHYAD: 1 Transceiver: internal MDI-X: on (auto) Supports Wake-on: pumbg Wake-on: g Current message level: 0x00000007 (7) drv probe link Link detected: yesYou‚Äôre looking for Supports Wake-on: pumbg with at least the letter g in the string. This means that the NIC does support WoL for a magic packet, which is a good thing. If you don‚Äôt see this here, don‚Äôt worry we‚Äôll fix it in netplanUsing NetplanThere are lots of outdated commands you‚Äôll find on the internet that won‚Äôt work or will partially work so I advise that you only do this with netplan. If you don‚Äôt have netplan installed (Debian, etc‚Ä¶) skip to the next section.To edit your netplansudo nano /etc/netplan/01-netcfg.yaml # replace with your netplan yamlOnce here, you‚Äôll see your network settings. You‚Äôll want to turn on wakeonlan in this yaml for each NIC. For example if you have 2 NICs, eno1 and enp2s0 you would add it in both places under that key.# This file describes the network interfaces available on your system# For more information, see netplan(5).network: version: 2 renderer: networkd ethernets: eno1: dhcp4: yes wakeonlan: true enp2s0: dhcp4: yes wakeonlan: trueOnce this is set, you‚Äôll want to apply your netplan.sudo netplan applyThen we‚Äôll want to shutdownsudo shutdown -P nowNow we should be able to wake up the machine using WoL from a remote machine.Without Netplan (Debian, etc‚Ä¶)Since you don‚Äôt have netplan we‚Äôll have to create a service and enable it. Do not do this step if you configure it with netplan.Find the path to ethtoolwhich ethtoolIn my case it‚Äôs at /usr/sbin/ethtool but your may vary.Nest we‚Äôll create a file at /etc/systemd/system/wol.servicenano /etc/systemd/system/wol.serviceIn this file add the following[Unit]Description=Enable Wake On LAN[Service]Type=oneshotExecStart = /usr/sbin/ethtool --change eno1 wol g[Install]WantedBy=basic.targetYou‚Äôll want to be sure to change your path for ethtool as well eno1 to the name of your NICThen we‚Äôll need to enable the servicesudo systemctl daemon-reloadsudo systemctl enable wol.serviceThen we can check to be sure out service is startedsystemctl status wolThen we‚Äôll want to shutdownsudo shutdown -P nowNow we should be able to wake up the machine using WoL from a remote machine.Waking up a MacWaking up a Mac is pretty easy, the easiest of them all. The most challenging part is finding the option in System Preferences.For a Macbook: Open System Preferences and search for power Click on Power Nap in Battery You‚Äôll see Wake for network access here you can choose whether you want to wake up Always or Only on Power Adapter. Either of these options should be fine.For all other Macs you‚Äôll want to search System Preferences for another option. Search for ‚ÄúEnergy Saver‚Äù Here you‚Äôll see an option to Wake for network access. Be sure this is checkThis option might appear different in different versions of macOS and it also varies by form factor, but you‚Äôll want to be sure that the ‚ÄúWake for network access‚Äù option is turned onInstalling a Wake on LAN clientIn order to wake up a remote machine machine up, you will need a tool that can send a wake on LAN packet to the remote machine.Windows Wake On LAN CLientI am a fan of doing this in a terminal however a decent Windows utility with a GUI is WakeOnLAN. It‚Äôs also open source and hosted on GitHub. After installing it and configuring a machine to wake you should be able to wake your machine if it is on the same network and you‚Äôve followed the other steps that are outlined in this guide.WakeOnLAN is an open source Windows utility that has a nice GUILinux Wake on LAN clientI usually prefer installing a command line tool to wake machines up over the network from a Linux machine and I typically using wakeonlan an open source utility that‚Äôs simple to use.To install it on a Debian-like system:sudo apt updatesudo apt install wakeonlanOnce it‚Äôs installed you can now wake machines on the same network by using the command: sudo wakeonlan 00:11:22:33:44:55If your machine is on another network and you can reach the broadcast IP, you can supply it in your command sudo wakeonlan -i 192.168.2.255 00:11:22:33:44:55Be sure to replace the mac address and broadcast IP above with the mac address of the remote machine and set the broadcast IP if on a different network.macOS Wake on LAN clientTo instal a client for macOS it‚Äôs very simple using brewbrew install wakeonlanOnce it‚Äôs installed you can now wake machines on the same network by using the command: wakeonlan 00:11:22:33:44:55If your machine is on another network and you can reach the broadcast IP, you can supply it in your command wakeonlan -i 192.168.2.255 00:11:22:33:44:55Be sure to replace the mac address and broadcast IP above with the mac address of the remote machine and set the broadcast IP if on a different network.Wrapping upAt this point you should be able to power on any machine from any machine on your network. One piece of advice is if you are using VLANs you‚Äôll want to b sure you are sending the WoL packet from the same network, otherwise you‚Äôll have to be sure that you can reach and target the right broadcast IP from the network you are on. As I mentioned in the beginning of this post, Wake on LAN is hard however if you follow these steps for each machine type you should be able to enjoy reliably waking up your machine remotely over the network.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Using the Raspberry Pi PiKVM with Multiple Machines", "url": "/posts/pikvm-at-scale/", "categories": "homelab", "tags": "pikvm, kvm, raspberry-pi, hardware, arch, homelab, linux", "date": "2023-02-18 09:00:00 -0600", "snippet": "What is the PiKVM?If you don‚Äôt know what a KVM switch is, it‚Äôs a device that allows you to connect multiple computers to one device which allows you to control them with a single keyboard, monitor,...", "content": "What is the PiKVM?If you don‚Äôt know what a KVM switch is, it‚Äôs a device that allows you to connect multiple computers to one device which allows you to control them with a single keyboard, monitor, and mouse. They‚Äôre relatively cheap unless you‚Äôre looking for an IP based one that will let you connect over the network. IP KVMs are really expensive, that is until the PiKVM came along. The PiKVM is a Raspberry Pi-based KVM switch, which allows you to remotely control a computer using a keyboard, a web browser, and mouse from anywhere in the world. It runs a web server that lets you connect to any computer connected to it and remote control it as if you‚Äôre sitting right in front of it, without plugins or installing any agents on the device. It‚Äôs much more capable than remote controlling it using a remote desktop client, it can even let you remote control a machine before it boots to let you change things in the bios, or even reformat and reinstall your operating system remotely.This is all great except for one small thing, unlike a traditional KVM that lets you control multiple devices, the PiKVM is really meant for remote controlling just one device. The PiKVM is built with just one HDMI input and one keyboard mouse input while traditional KVMs have multiple inputs for multiple clients. So how can we scale the PiKVM to connect it to more devices so that we aren‚Äôt stuck moving it from machine to machine each time we need to remote control one of our other devices?üì∫ Watch VideoThe little LCD is both cute and functionalYou can build a PiKVM yourself by purchasing the PiKVM v3 HAT which is a great choice if you already have a raspberry pi4 and are willing to build it yourself. Or if you have a Pi Zero you can even build it using some inexpensive parts and without soldering. But chances are you have neither since raspberry pis are impossible to find and buying a pre-assembled kit is the only option. It was for me and that‚Äôs what I ended up doing. I purchased the PiKVM v3 pre-assembled which comes with a Raspberry Pi 4 2GB model, 32GB micro SD card, power supply, an HDMI cable, a USB C to USB A cable, and a nice case. The steel case is solid and feels sturdy and industrial. The PiKVM has lots of connections, connections for power, USB devices, mouse and keyboard emulation, RJ45 to serial connection, HDMI, and even an RJ45 connector for ATX power which lets me hook this up to a motherboard to power it on and off remotely. The other cool thing you get with the pre-assembled kit is the little LCD screen that shows system information and a cute cat when it boots. It comes pre-flashed with PiKVM installed and ready to go.Oh, it runs arch BTW.I had to let you knowSponsorA HUGE THANKS to Micro Center for sponsoring today‚Äôs content.New Customer Exclusive ‚Äì Free 256GB SSD: https://micro.center/18lShop AMD Ryzen 5 3600 &amp; Gigabyte B450M Combo Deal: https://micro.center/69dCheck out Micro Center‚Äôs Custom PC Builder: https://micro.center/d35Submit your build to Micro Center‚Äôs Build Showcase: https://micro.center/dswPiKVM at ScaleBut before we connect everything, remember when I said I wanted to connect it to more than one device? Well, I wanted to connect it to 8x times that, yes 8 devices. I found this HDMI KVM switcher with a USB hub that I thought would be perfect for it. This TESmart allows you to connect up to 8 devices with video and USB and has a built-in USB hub. It also has an RJ45 port that allows me to change the input over IP and that‚Äôs it. It‚Äôs not an IP KVM otherwise I would need the PiKVM, but being able to switch the input over IP is all I needed to automate it with the PiKVM. I thought this device was perfect for remote controlling some of my servers considering it is rack mountable. However there was just one catch that would almost ruin this entire project that I didn‚Äôt know about yet.The Problems AheadI tested PiKVM on my workbench with this old intel NUC and it worked fine. I was able to remote control it and even power it on and off using Wake on LAN. I chalked it up as a success and started moving everything into my server rack. It might not seem like it, but mounting this HDMI KVM Switch took quite some time. I had to run HDMI cables and USB B cables to and from all of my devices that I wanted to remote control. I started running the wires and wiring up 4 devices, just to be sure it worked with my existing machines before wiring up all 8. But, I bet you‚Äôre asking why I just don‚Äôt use IPMI that I have on my servers? Well, this isn‚Äôt to control my servers, it‚Äôs to control my rack mounted PC conversion along my new Intel NUC cluster. None of these machines have IPMI so that‚Äôs why I needed an IP KVM solution like the PiKVM.I decided to put my PiKVM on this little shelf for now but I‚Äôll probably find somewhere a little more permanent to place it. Once I had everything hooked up, that‚Äôs when the troubles began. I could remote into some of the NUCs running Linux and the PC conversion, but not the ones running Windows. I thought for sure that it was something with my connection so I checked all of the connections over and over again. It was right around that time that the creator of PiKVM Max Devaev reach out to me asking me how I was liking the PiKVM and to let him know if I ran into any troubles because he was interested in advanced use cases for the PiKVM. I‚Äôm not sure why he thought I was going to be using this in an advanced way‚Ä¶. But he was right‚Ä¶This was my first attempt with a TESmart SwitchI worked with Max for a few days on and off over discord. He sent snippets of code for me to run and even gave me lots of EDIDs to try. EDIDs (Extended Display Identification Data) are a signature or metadata that tell a device how to work with the monitor. Sometimes we could get the Linux machines running on the TESmart switch working, but not the Windows machines. And other times we could get the Windows machines working but not the Linux machines. We ended up discovering that the TESmart HDMI switch would ‚Äúpoison‚Äù the PiKVM and send the TESmart EDID rather than the one from the PiKVM.TESmart EDID:Section \"Monitor\" Identifier \"ITE-FHD\" ModelName \"ITE-FHD\" VendorName \"ITE\" # Monitor Manufactured week 12 of 2010 # EDID version 1.3 # Digital Display DisplaySize 620 340 Gamma 2.20 Option \"DPMS\" \"false\" Horizsync 13-46 VertRefresh 23-61 # Maximum pixel clock is 170MHzPiKVM EDIDSection \"Monitor\" Identifier \"PiKVM\" ModelName \"PiKVM\" VendorName \"LNX\" # Monitor Manufactured week 28 of 2011 # EDID version 1.3 # Digital Display # Display Physical Size not given. Normal for projectors. Gamma 2.20 Option \"DPMS\" \"false\" Horizsync 15-46 VertRefresh 59-61 # Maximum pixel clock is 150MHz #Not giving standard mode: 256x160, 60HzAt this point, I had to cut my losses and go with a smaller, non rack mountable, but more compatible EZCOO KVM Switch and, I have to say, it‚Äôs fantastic.A New HDMI Switch Enters the ChatThis is the EZCoo HDMI KVM switch. It‚Äôs a 4 port HDMI KVM Switch that allows 4 HDMI ports to be switched to a single display. This single display will be the PiKVM. It also has a built- in USB 3 hub which is awesome for plugging in USB devices that will connect to the machine when you switch the input. It has 4 HDMI inputs and 1 USB 3 input that you‚Äôll connect to each machine and has one HDMI out and one USB for keyboard and one for mouse. We won‚Äôt be using these specific USB ports because we‚Äôll be using mouse &amp; keyboard emulation in one plugged into a generic USB port.The real magic of this device is that it has a micro USB management port on the side that the PiKVM can use to control and toggle the inputs automatically, giving us a way to switch between all of our connected devices without having to manually press the input button. As nice as this device is, I really wish they made an 8 port rack mountable one because I want to control more than 4 devices without swapping them out or daisy chaining them, Which is why I wanted the TESmart switch in the first place.Oh, speaking of the TESmart, after working with Max for a while on this device he mentioned that this might work with the new v4 version of the PiKVM which just recently launched on Kickstarter. He said he was going to send one of their prototypes to test so, fingers crossed it works. I will be sure to create a v4 video once it‚Äôs released and hopefully it supports the TESmart switch.This EZCOO is small, compact, and 100% compatiblePutting it all togetherNow that I had everything working the way it should it was time to connect to each device through the web portal. Once connected, I can toggle between each of my devices here, from my first Intel NUC running Ubuntu, to my Second Intel NUC running Windows 10, to my third Intel NUC running Windows 11, to my PC conversion running Ubuntu server. And you can see that it‚Äôs pretty snappy. The latency is really low and I can even run HD videos no problem at all. If I do run into any latency issues or I am on a slow connection I can change the protocol and even the bitrate to something more fitting.But running HD videos probably isn‚Äôt the reason you want a KVM, it‚Äôs more likely that you want to have access to the machine while it boots, and here‚Äôs where it gets really awesome. The PiKVM is open and it‚Äôs totally hackable and there are some great plugins and drivers that allow you to customize the UI with those plugins. For instance I can shutdown this machine and then wake it up using a Wake on LAN packet to power it back on. Side note, I learned a ton about making Wake on LAN work for Windows and Linux and I will be updating my blogs with complete walk-throughs of how to enable it, but anyway If that wasn‚Äôt cool enough I can then get into the BIOS of this machine to make any changes that I want. I can change the boot order, change boot devices, overclock the machine and do anything that I couldn‚Äôt normally do without being right in front of the machine. I can even upload ISOs to the PiKVM and then attach them to the device virtually and boot from it to install any operating system! This lets me rebuild any of these machines no matter where I am all from a web browser.Want to install Linux on a machine that‚Äôs powered off, no problem. Just attach the virtual drive to the machine, send a wake on lan packet to wake it up, then boot from the virtual drive and install! You could also attach the ATX power control to the header of the motherboard if you like and power it on that way, but I have network access to all of my machines so I will use wake on lan. Plus, it‚Äôs super awesome to be able to wake devices up over the network. And here‚Äôs where it gets really awesome, remember how I said that my KVM also has a USB Hub? Well, I‚Äôve attached a 64GB USB drive to it with Ventoy installed that has every ISO I could ever need. As I switch inputs between machines it attaches the USB drive with Ventoy to each machine allowing me to install any operating system I want.You can make this even more powerful by adding a USB drive and VentoyBecause the PiKVM is hackable, I‚Äôve customized the GPIO menu to let me switch between devices, wake them up, wake them up on different NICs, and restart the kvmd service or the PiKVM itself. (See my config below) I should say that I didn‚Äôt really ‚Äúhack‚Äù it, this isn‚Äôt a ‚Äútechno tim‚Äù hack - there‚Äôs an overrides file that lets you customize most of the PiKVM so I didn‚Äôt go totally off the rails. It even has a web ui to give you terminal access to your PiKVM in case you aren‚Äôt able to use SSH, which is super handy if you‚Äôre mobile. But this little device has so many features already and the fact that the software is open source and continues to be updated makes this solution such a great investment for me.You can customize the menu however you like (my config below), here I added WoL for each network card and even a way to restart the PiKVM from the menuIs it worth it?So I bet you‚Äôre wondering if it‚Äôs worth it? I am going to break this down into 2 parts. Is it worth it to buy pre assembled? And is it worth it for remote control with a PiKVM. Well for me it is for a few reasons. First of all I can‚Äôt find a raspberry pi to assemble this myself, and if you consider it comes with a case, a fan, a 32GB micro sd, additional cables, and even a little LCD screen 100% ready to go for an additional 90 bucks? I would say it is. Now on to the tougher question, is it worth it to have a PiKVM at all? I would say yes for me, but for you it depends. The way I looked at it was that I was going to scale it to 8, which would divide the cost of a PiKVM and switch across 8 machines making it around 70 dollars per machine if you include all of the cables.PiKVM $259 + TESmart $299 / 8 = $70 per machineI‚Äôd say that it‚Äôs worth it for me to have remote access to that many machines for the life of each machine. But, I did have to downgrade to a smaller switch that only gives me access to 4 machines which is roughly 95 dollars per machine.PiKVM $259 + EZCOO $120 / 4 = $95 per machineThat‚Äôs a little bit higher, however it‚Äôs a much better value than remote controlling just one machine with the PiKVM, which would be the cost of the PiKVM.PiKVM $259 / 1 = $259 per machineHardwareHere are the items that I used during this project.PiKVM - https://pikvm.orgEZCOO - HDMI KVM Switch - https://amzn.to/3IyiIv1HDMI Cables - https://amzn.to/3SgJ34gUSB B Cables - https://amzn.to/3Eel0wUUSB C Cables - https://amzn.to/3k8vQhbUSB Flash Drive - https://amzn.to/3XI50u6TESmart Switch (not full compatible) - https://amzn.to/3YV0Gsi(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)PiKVM ConfigHere is my PiKVM config that I use. You will need to edit /etc/kvmd/override.yaml on your device and then restart the kvm service.kvmd: gpio: drivers: ez: type: ezcoo protocol: 2 device: /dev/ttyUSB0 wol_server0: type: wol mac: 1c:69:7a:ad:11:85 wol_server1: type: wol mac: 88:ae:dd:05:cf:09 wol_server2: type: wol mac: 88:ae:dd:05:c6:3b wol_server3: type: wol mac: a0:36:9f:4f:c4:b4 wol_server3a: type: wol mac: d8:50:e6:52:8e:c2 reboot: type: cmd cmd: [/usr/bin/sudo, reboot] restart_service: type: cmd cmd: [/usr/bin/sudo, systemctl, restart, kvmd] scheme: ch0_led: driver: ez pin: 0 mode: input ch1_led: driver: ez pin: 1 mode: input ch2_led: driver: ez pin: 2 mode: input ch3_led: driver: ez pin: 3 mode: input pikvm_led: pin: 0 mode: input ch0_button: driver: ez pin: 0 mode: output switch: false ch1_button: driver: ez pin: 1 mode: output switch: false ch2_button: driver: ez pin: 2 mode: output switch: false ch3_button: driver: ez pin: 3 mode: output switch: false wol_server0: driver: wol_server0 pin: 0 mode: output switch: false wol_server1: driver: wol_server1 pin: 0 mode: output switch: false wol_server2: driver: wol_server2 pin: 0 mode: output switch: false wol_server3: driver: wol_server3 pin: 0 mode: output switch: false wol_server3a: driver: wol_server3a pin: 0 mode: output switch: false reboot_button: driver: reboot pin: 0 mode: output switch: false restart_service_button: driver: restart_service pin: 0 mode: output switch: false view: table: - [\"#NUC1\", ch0_led, ch0_button, \"wol_server0 | WoL\"] - [\"#NUC2\", ch1_led, ch1_button, \"wol_server1 | WoL\"] - [\"#NUC3\", ch2_led, ch2_button, \"wol_server2 | WoL\"] - [\"#PC\", ch3_led, ch3_button, \"wol_server3 | WoL-10g\", \"wol_server3a | WoL-1g\"] - [\"#PiKVM\", \"pikvm_led|green\", \"restart_service_button|confirm|Service\", \"reboot_button|confirm|Reboot\"]Wake on LANIf you‚Äôre having issues with Wake on LAN, see The Ultimate Guide to Wake on LAN for Windows, MacOS, and LinuxLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Test Your Internet Speed from the Linux Terminal with fast", "url": "/posts/fast-internet-test-cli/", "categories": "utilities", "tags": "fast, cli, linux, open-source", "date": "2023-02-05 09:00:00 -0600", "snippet": "What is FAST.com?FAST.com is speed test gives you an estimate of your current Internet speed. It was created by Netflix to bring transparency to your upload / download speeds and to see if your IS...", "content": "What is FAST.com?FAST.com is speed test gives you an estimate of your current Internet speed. It was created by Netflix to bring transparency to your upload / download speeds and to see if your ISP may be prioritizing traffic. I‚Äôve run this quite a bit in a browser to do a quick spot check or my speeds, but I‚Äôve never had a great tool to check this from some of my Linux machines. Let me clarify, some of my Linux servers that do not have a browser - that‚Äôs until I found this utility, fast. fast is an open source utility to run internet speed checks from machines that don‚Äôt have a browser, from the terminal, all in a small, zero dependency binary. You can read more about it on the GitHub repo.Installing fastWe‚Äôre going to use curl so you‚Äôll want to be sure you have it installedcurl -VThis should return something similar to the followingcurl 7.68.0 (x86_64-pc-linux-gnu) libcurl/7.68.0 OpenSSL/1.1.1f zlib/1.2.11 brotli/1.0.7 libidn2/2.2.0 libpsl/0.21.0 (+libidn2/2.2.0) libssh/0.9.3/openssl/zlib nghttp2/1.40.0 librtmp/2.3Release-Date: 2020-01-08Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftpFeatures: AsynchDNS brotli GSS-API HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSocketsThen we‚Äôll want to download the latest fast binary by runningLATEST_VERSION=$(curl -s \"https://api.github.com/repos/ddo/fast/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')curl -L https://github.com/ddo/fast/releases/download/v${LATEST_VERSION}/fast_linux_$(dpkg --print-architecture) -o fastIf you want to use wget instead of curl, you can run the followingLATEST_VERSION=$(curl -s \"https://api.github.com/repos/ddo/fast/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')wget https://github.com/ddo/fast/releases/download/v${LATEST_VERSION}/fast_linux_$(dpkg --print-architecture) -O fastThen we‚Äôll want to make it executable by runningchmod +x fastThen we can run a speed test by running./fastThis should return something similar to the following‚ûú ~ ./fast -&gt; 477.72 MbpsThat‚Äôs it! You can now run an internet speed test from the Linux cli without a browser! What‚Äôs your download speed?Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Updating Flux Installation Using the Latest Binary from CLI", "url": "/posts/update-flux/", "categories": "kubernetes", "tags": "flux, devops, gitops, kubernetes, open-source", "date": "2023-02-03 19:00:00 -0600", "snippet": "What is Flux?Flux is a tool for keeping Kubernetes clusters in sync with sources of configuration (like Git repositories), and automating updates to configuration when there is new code to deploy. ...", "content": "What is Flux?Flux is a tool for keeping Kubernetes clusters in sync with sources of configuration (like Git repositories), and automating updates to configuration when there is new code to deploy. It‚Äôs open source and you can read more about it on the GitHub repo. Looking for a tutorial on how use this? Check out this video on how to use SOPS and Age for your Git Repos!Updating FluxWe‚Äôre going to use curl so you‚Äôll want to be sure you have it installedcurl -VThis should return something similar to the followingcurl 7.68.0 (x86_64-pc-linux-gnu) libcurl/7.68.0 OpenSSL/1.1.1f zlib/1.2.11 brotli/1.0.7 libidn2/2.2.0 libpsl/0.21.0 (+libidn2/2.2.0) libssh/0.9.3/openssl/zlib nghttp2/1.40.0 librtmp/2.3Release-Date: 2020-01-08Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftpFeatures: AsynchDNS brotli GSS-API HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSocketssudo apt update &amp;&amp; sudo apt install curlThen we‚Äôll want to download the latest Flux binary by runningcurl -s https://fluxcd.io/install.sh | sudo bashThen we‚Äôll want to be sure it‚Äôs installed properly by runningflux -vThis should return something similar to the followingflux version 0.39.0Next we‚Äôll need to locate our gotk-components.yaml file for flux in our git repo. For example, mine lives in clusters/cluster-01/baseclusters‚îú‚îÄ‚îÄ cluster-01‚îÇ¬†¬† ‚îú‚îÄ‚îÄ base‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ flux-system‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ gotk-components.yamlOne you locate gotk-components.yaml we‚Äôll patch it by using the following commandflux install --export &gt; clusters/cluster-01/base/flux-system/gotk-components.yamlAfter this file is updated, you can check to be sure it updated the correct file by runninggit diffYou should see something like the followingdiff --git a/clusters/cluster-01/base/flux-system/gotk-components.yaml b/clusters/cluster-01/base/flux-system/gotk-components.yamlindex 79576f0f..9c26b708 100644--- a/clusters/cluster-01/base/flux-system/gotk-components.yaml+++ b/clusters/cluster-01/base/flux-system/gotk-components.yaml@@ -1,6 +1,6 @@ --- # This manifest was generated by flux. DO NOT EDIT.-# Flux Version: v0.38.3+# Flux Version: v0.39.0 # Components: source-controller,kustomize-controller,helm-controller,notification-controller apiVersion: v1 kind: Namespace@@ -8,7 +8,7 @@ metadata: labels: app.kubernetes.io/instance: flux-system app.kubernetes.io/part-of: flux- app.kubernetes.io/version: v0.38.3+ app.kubernetes.io/version: v0.39.0 pod-security.kubernetes.io/warn: restricted pod-security.kubernetes.io/warn-version: latest name: flux-system@@ -23,7 +23,7 @@ metadata: app.kubernetes.io/component: notification-controller app.kubernetes.io/instance: flux-system app.kubernetes.io/part-of: flux- app.kubernetes.io/version: v0.38.3+ app.kubernetes.io/version: v0.39.0 name: alerts.notification.toolkit.fluxcd.io:if you see something other than the original gotk-components.yaml being updated, you might want to check the location of the file and try again.Once this is updated, you can simply commit and push this up and let GitOps do the rest!git add .git commit -m \"feat(flux): Upgraded flux to 0.39.0\" # replace with your veriongit pushLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Mozilla SOPS Encryption Tool", "url": "/posts/install-mozilla-sops/", "categories": "utilities", "tags": "homelab, secops, mozilla, sops, cli, linux, open-source", "date": "2023-01-30 09:00:00 -0600", "snippet": "What is Mozilla SOPS?SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. It‚Äôs open source ...", "content": "What is Mozilla SOPS?SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. It‚Äôs open source and you can read more about it on the GitHub repo. Looking for a tutorial on how use this? Check out this video on how to use SOPS and Age for your Git Repos!InstallWe want to get the latest release of SOPS so we need to look at their github repo for the latest version.SOPS_LATEST_VERSION=$(curl -s \"https://api.github.com/repos/mozilla/sops/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')Then we‚Äôll use curl to download the latest .debcurl -Lo sops.deb \"https://github.com/mozilla/sops/releases/latest/download/sops_${SOPS_LATEST_VERSION}_amd64.deb\"Then we‚Äôll want to install sops.deb along with any missing dependenciessudo apt --fix-broken install ./sops.debThen we‚Äôll clean up our downloadrm -rf sops.debThen we can test to make sure sops is working by running:sops -versionUninstallTo uninstall, it‚Äôs as simple as using apt to remove itsudo apt remove sopsLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Age Encryption Tool", "url": "/posts/install-age/", "categories": "utilities", "tags": "homelab, secops, devops, age, cli, linux, open-source", "date": "2023-01-30 09:00:00 -0600", "snippet": "What is Age?age is a simple, modern and secure file encryption tool, format, and Go library. It features small explicit keys, no config options, and UNIX-style composability. It is commonly used i...", "content": "What is Age?age is a simple, modern and secure file encryption tool, format, and Go library. It features small explicit keys, no config options, and UNIX-style composability. It is commonly used in tandem with Mozilla SOPS. It‚Äôs open source and you can read more about it on the GitHub repo. Looking for a tutorial on how use this? Checkout this video on how to use SOPS and Age for your Git Repos!InstallWe want to get the latest release of age so we need to look at their github repo for the latest version.AGE_LATEST_VERSION=$(curl -s \"https://api.github.com/repos/FiloSottile/age/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')Then we‚Äôll use curl to download the latest .tar.gzcurl -Lo age.tar.gz \"https://github.com/FiloSottile/age/releases/latest/download/age-v${AGE_LATEST_VERSION}-linux-amd64.tar.gz\"Then we‚Äôll want to extract age.tar.gztar xf age.tar.gzThen we‚Äôll move both binaries (age and age-keygen) to /usr/local/bin so we can use themsudo mv age/age /usr/local/binsudo mv age/age-keygen /usr/local/binThen we‚Äôll clean up our downloads and extractionsrm -rf age.tar.gzrm -rf ageThen we can test to make sure age and age-keygen are working by runningage -versionage-keygen -versionUninstallTo uninstall, it‚Äôs as simple as removing the binariessudo rm -rf /usr/local/bin/agesudo rm -rf /usr/local/bin/age-keygenLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Deploying Machines with MaaS and Packer - Metal as a Service + Hashicorp Packer Tutorial", "url": "/posts/metal-as-a-service-packer/", "categories": "maas", "tags": "homelab, packer, maas, hashicorp, canonical, ubuntu, proxmox, open-source", "date": "2023-01-28 08:00:00 -0600", "snippet": "MaaS or Metal as a service from Canonical is a great way to provision bare metal machines as well as virtual machines. MaaS allows you to deploy Windows, Linux, ESXi, and many other operating syst...", "content": "MaaS or Metal as a service from Canonical is a great way to provision bare metal machines as well as virtual machines. MaaS allows you to deploy Windows, Linux, ESXi, and many other operating systems to your systems helping you to build a bare metal cloud. You can even use Packer from Hashicorp to configure custom images too! We‚Äôll cover all of this and more in this tutorial on how to install and configure MaaS from start to finish with Packer!üì∫ Watch VideoSponsorNew Customer Exclusive - $25 Off ALL Processors: https://micro.center/3siCheck out Micro Center‚Äôs Custom PC Builder: https://micro.center/wcxSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/dcmVisit Micro Center‚Äôs Community Page: https://micro.center/2vrInstalling MaaSMaaS can be installed via apt or snap. I had some issues with the apt version so I used snap for this install.snap installBe sure snap is installedsudo apt install snapdsudo snap install --channel=3.2 maasapt installsudo apt-add-repository ppa:maas/3.2sudo apt updatesudo apt install maasInstalling a Test Database(skip this step if you already have postgres in your environment)This should be used if you want to use MaaS test databasesudo snap install maas-test-dbtesting the databasesudo maas-test-db.psqlthen list databases you should see maasdb therepostgres=# \\lInitializing MaaSIf you are using the test database above, initialize MaaSsudo maas init region+rack --database-uri maas-test-db:///If you already have postgres in your environment you can initialize MaaS using your existing postgres service. Be sure to create the database, user, and assign that user permissions before running the init command.sudo maas init region+rack --database-uri \"postgres://username:password@192.168.0.100/maas\" # replace username /password / ip /db name if you don‚Äôt wand to store your secrets in your terminal‚Äôs history, consider using ENV variables:sudo maas init region+rack --database-uri \"postgres://$MAAS_DBUSER:$MAAS_DBPASS@$HOSTNAME/$MAAS_DBNAME\"Create admin accountsudo maas createadminHere you can choose to import your LaunchPad or GitHub public key using gh:githubusernameChecking MaaSsudo maas statusThe output should like something similar to this:bind9 RUNNING pid 1014, uptime 2 days, 10:52:40dhcpd STOPPED Not starteddhcpd6 STOPPED Not startedhttp RUNNING pid 1477, uptime 2 days, 10:52:23ntp RUNNING pid 1143, uptime 2 days, 10:52:37proxy RUNNING pid 1454, uptime 2 days, 10:52:25rackd RUNNING pid 1017, uptime 2 days, 10:52:40regiond RUNNING pid 1018, uptime 2 days, 10:52:40syslog RUNNING pid 1144, uptime 2 days, 10:52:37If you ever need to reinitialize MaaSsudo maas init regionConfiguring Packer ImagesInstall PackerGet key ringwget --no-verbose --output-document=- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor --output=/usr/share/keyrings/hashicorp-archive-keyring.gpg Add keyringecho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release --codename --short) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.listadd Hashicorp Reposudo apt-add-repository \"deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" Install Packersudo apt updatesudo apt install packerUpdate and install dependencies needed to build imagessudo apt updatesudo apt install qemu-utils qemu-system ovmf cloud-image-utils make curtain gitBuilding a custom image from canonical/packer-maasClone the canonical/packer-maas repogit clone https://github.com/canonical/packer-maas.gitcd packer-maascd ubuntusudo packer init ubuntu-cloudimg.pkr.hclsudo make custom-cloudimg.tar.gzcheck and change permissions of archive (change root to your username)ls -lsudo chown root:root ./custom-cloudimg.tar.gzUploading Packer image to MaaSecho your MaaS api key to your home directorysudo maas apikey --username=massadmin &gt; ~/api-key-fileYou can check with withcat ~/api-key-filAuthenticate to MaaS with your api keymaas login massadmin http://localhost:5240/MAAS/api/2.0/ $(head -1 ~/api-key-file)Upload the custom image we made to MaaSmaas massadmin boot-resources create name='custom/cloudimg-tgz' title='Ubuntu Custom TGZ' architecture='amd64/generic' filetype='tgz' content@=custom-cloudimg.tar.gzChapters00:00 - What is MaaS (Metal as a Service) from Canonical?02:00 - Micro Center / $25 Off CPUs! (Sponsor)03:00 - Installing MaaS06:56 - Initial MaaS Configuration09:41 - Importing your SSH Key10:23 - Networking Configuration &amp; Discovery14:05 - PXE &amp; Network Boot with DHCP15:33 - Commissioning a Machine (Initial Discovery)18:45 - Power Types &amp; Wake on LAN (WOL)20:50 - Commissioning a Machine Part 2 (For real this time)24:00 - Deploying Ubuntu26:15 - SSH in to machine26:54 - Creating Custom Images with Hashicorp Packer33:40 - Uploading a Custom Image to MaaS38:05 - What do I think of MaaS from Canonical?39:57 - Stream Highlight - ‚Äú100 + 50 subs dropped ü´≥üé§‚ÄùLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Enable Nested Virtualization In Proxmox", "url": "/posts/proxmox-nested-virtualization/", "categories": "proxmox", "tags": "homelab, proxmox, virtualization", "date": "2023-01-21 09:00:00 -0600", "snippet": "What Is Nested Virtualization?Nested Virtualization is a feature that allows you to run a virtual machine within a virtual machine while still using hardware acceleration from the host machine. Pu...", "content": "What Is Nested Virtualization?Nested Virtualization is a feature that allows you to run a virtual machine within a virtual machine while still using hardware acceleration from the host machine. Put simply, it allows you to run a vm inside of a vm.Enabling Nested Virtualization In ProxmoxEverything we do will be done on the host system running Proxmox. Once enabled, the guest can take advantage of it.First we need to check to see if nested virtualization is enabled in Proxmox.If you‚Äôre running an Intel CPU run this command:cat /sys/module/kvm_intel/parameters/nestedIf you‚Äôre running an AMD CPU run this command:cat /sys/module/kvm_amd/parameters/nestedYou should see an output of Y or N. If N this means that nested virtualization is not enabled, so let‚Äôs enabled it!On the Proxmox host, run the following command as root:If you‚Äôre running an Intel CPU run this command:echo \"options kvm-intel nested=Y\" &gt; /etc/modprobe.d/kvm-intel.confIf you‚Äôre running an AMD CPU run this command:echo \"options kvm-amd nested=1\" &gt; /etc/modprobe.d/kvm-amd.conf Next reboot the systemrebootThen check to see if nexted virtualization is enabled on the Proxmox host:If you‚Äôre running an Intel CPU run this command:cat /sys/module/kvm_intel/parameters/nestedIf you‚Äôre running an AMD CPU run this command:cat /sys/module/kvm_amd/parameters/nestedYou should see Y this time. This means that you can now using virtulization inside of a VM, just be sure to set your VM‚Äôs processor accordingly! (use HOST for CPU type)Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The EASIEST way to Expand Your ZFS Pool in TrueNAS (But is it the Best?)", "url": "/posts/truenas-zfs-expand/", "categories": "truenas", "tags": "homelab, truenas, zfs, storage, open-source", "date": "2023-01-14 09:00:00 -0600", "snippet": "ZFS is a great file system that comes with TrueNAS and can meet all of your storage needs. But with it comes some complexity on how to manage and expand your ZFS storage pools. Over the last week...", "content": "ZFS is a great file system that comes with TrueNAS and can meet all of your storage needs. But with it comes some complexity on how to manage and expand your ZFS storage pools. Over the last week I learned all about storage pools and how to move them, expand them, and even what not to do when trying to grow your storage pool. Join me as I figure out how to move a 20 TB pool to my new storage server with 100 TB of raw data.üì∫ Watch Videoüì¶ Products in this video üì¶Seagate Exos 14TB Drives https://amzn.to/3kaQnkNSeagate IronWolf 8TB Drives https://amzn.to/3iGq3yHSee all of the storage I recommend in this kit!https://kit.co/TechnoTim/best-ssd-hard-drive-flash-storage(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Chapters00:00 - What are my options for expanding ZFS?00:25 - Use ZFS Snapshot Replication (My First Attempt)02:20 - Just Copy the Data to the New Pool (My Second Attempt)03:01 - Expand the Pool by Replacing All Disks (My Third Attempt)04:27 - Replacing All of the Drives &amp; Resilvering07:16 - Pool has Expanded!07:43 - My Beef with ZFS and Recommendations09:20 - Stream Highlight - This is how I got into this mess with ZFS‚Ä¶A clip used in this video was from Tom Lawrence‚Äôs channel. Thanks Tom!Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab Services Tour (Late 2022) - What am I Self-Hosting in my HomeLab?", "url": "/posts/homelab-services-tour-2022/", "categories": "homelab", "tags": "homelab, hardware, network, server, self-hosted, kubernetes, k3s, linux", "date": "2022-12-31 08:00:00 -0600", "snippet": "Wow, what a year of self-hosting! After showing off my Home Lab hardware in my late 2022 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I d...", "content": "Wow, what a year of self-hosting! After showing off my Home Lab hardware in my late 2022 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which services I am running here at home. Today, we walk through everything I am hosting including: Dashboard, Hypervisor, Virtualization, Containerization, Network Attached Storage (NAS), DNS, Network Management, Home Security, Kubernetes, Kubernetes Storage, Docker, Reverse Proxy, Certificates, Monitoring, Logging, Syncing Data, File Sharing, Link Page, Link Shortening, Home Entertainment, Home Automation, Battery / UPS Monitoring, CMS, Static Site Generators, Dynamic DNS, CI/CD, Git Ops, Dev Ops, and many, many others. Enjoy the virtual tour!Worth mentioning, I have videos on almost every service mentioned in this video!üì∫ Watch VideoRelated VideosHere are most of the videos mentioned in this video: Techno Tim HomeLab Server Room Tour! (Late 2022) Self-Hosting Security Guide for your HomeLab Meet Heimdall, Your Homelab Application Dashboard Before I do anything on Proxmox, I do this first‚Ä¶ The FASTEST Way to run Kubernetes at Home - k3s Ansible Automation TrueNAS Scale Apps - Official, Unofficial, Docker, and Kubernetes High Availability Pi-Hole? Yes please! Using Pi-Hole for Local DNS - Fast, Simple, and Easy Guide Flux GitOps Tutorial - DevOps and GitOps for Kubernetes Wildcard Certificates with Traefik + cert-manager + Let‚Äôs Encrypt in Kubernetes Tutorial Beautiful Dashboards with Grafana and Prometheus - Monitoring Kubernetes Tutorial Network UPS Tools (NUT Server) Ultimate Guide Self-Hosted, DIY, Open Source Alternative to Linktree Meet keepalived - High Availability and Load Balancing in One Meet Grafana LOKI, a Log Aggregation System for EVERYTHING Meet Uptime Kuma, a Fancy Open Source Uptime Monitor for all your HomeLab Monitoring Needs Meet Jekyll - The Static Site Generatorüì¶ Gear in this video üì¶(Affiliate links are included in this description. I may receive a small commission at no cost to you.)KitWant to see all the gear in this video?Check out the kit here: https://kit.co/TechnoTim/techno-tim-homelab-tour-late-2022Rack &amp; Accessories 42u Rack https://amzn.to/3YIKlrq 18u Rack https://amzn.to/3WqNZVy D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower PDU Pro https://amzn.to/3Wy2AhsNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables - https://amzn.to/3kbYV85 UniFi Flex Mini - https://amzn.to/3BVV2NM UDM SE - https://amzn.to/3VdeCf6 UDM Pro - https://amzn.to/3HXUvia UniFi 48 Port Pro Switch Gen 2 - https://amzn.to/3FHbBxSServers &amp; Accessories SuperMicro 1u Servers - https://amzn.to/3YBQy8u 14 TB Exos Seagate Drives - https://amzn.to/3GbtXsk NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKh PC Conversion Case - https://amzn.to/3YGXx03 Smart ZigBee LED Controller - https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans - https://amzn.to/3I68AtA 1 TB Samsung SSDs - https://amzn.to/3PPcedoAccessories Axxtra Power Strip - https://amzn.to/3qbzIhT Eaton 5P1500R UPS - https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS - https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4s HDHomeRun Network Tuner - https://amzn.to/3Gdkd0x Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch - https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit - https://amzn.to/3jljCRA Nest Protect - https://amzn.to/3hMZcR8 Cloud Lamp - https://amzn.to/3GZji24 Fire Extinguisher - https://amzn.to/3GeB2s4Chapters00:00 - What is Techno Tim Self-Hosting?01:05 - Dashboard01:36 - Hypervisor07:09 - Network Attached Storage09:37 - DNS11:48 - Network Management13:05 - Home Security13:42 - Containers (Kubernetes &amp; Docker)17:59 - -Kubernetes Storage21:04 - Git Ops22:35 - Reverse Proxy (Internal, External, and Ingress Controller)25:26 - Monitoring26:10 - Metrics &amp; Data Visualization27:02 - Logging28:28 - Home Automation30:08 - Data Synchronization30:55 - Link Page (Contact Page)31:41 - Link Shortener32:24 - Home Entertainment33:00 - UPS Battery Monitoring33:37 - CMS (Content Management System)34:25 - Websites (Static Sites &amp; Custom Code)34:46 - Dynamic DNS (External DNS)35:16 - CI/CD (Continuous Integration &amp; Continuous Delivery)37:04 - Everything Else37:41 - How do I get started self-hosting?38:30 - Thanks for Watching!Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab Server Room Tour! (Late 2022)", "url": "/posts/homelab-tour-2022/", "categories": "homelab", "tags": "homelab, hardware, network, server, server-rack", "date": "2022-12-24 08:00:00 -0600", "snippet": "Well, here it is! My Late 2022 Server Rack and HomeLab tour! This is a special one because I just revamped my entire rack. I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my l...", "content": "Well, here it is! My Late 2022 Server Rack and HomeLab tour! This is a special one because I just revamped my entire rack. I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, new UPS, new power management, and even a whole entire wall of tech gear. I also added lots of automation and IoT devices! Join me as we walk through my server rack transfer and upgrade!üì∫ Watch Video(Affiliate links are included in this description. I may receive a small commission at no cost to you.)After this, check out the 2022 (late) HomeLab Services Tour! https://docs.technotim.live/posts/homelab-services-tour-2022/üì¶ Gear in this video üì¶Rack &amp; Accessories 42u Rack https://amzn.to/3YIKlrq 18u Rack https://amzn.to/3WqNZVy D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower PDU Pro https://amzn.to/3Wy2AhsNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables - https://amzn.to/3kbYV85 UniFi Flex Mini - https://amzn.to/3BVV2NM UDM SE - https://amzn.to/3VdeCf6 UDM Pro - https://amzn.to/3HXUvia UniFi 48 Port Pro Switch Gen 2 - https://amzn.to/3FHbBxSServers &amp; Accessories SuperMicro 1u Servers - https://amzn.to/3YBQy8u 14 TB Exos Seagate Drives - https://amzn.to/3GbtXsk NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKh PC Conversion Case - https://amzn.to/3YGXx03 Smart ZigBee LED Controller - https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans - https://amzn.to/3I68AtA 1 TB Samsung SSDs - https://amzn.to/3PPcedoAccessories Axxtra Power Strip - https://amzn.to/3qbzIhT Eaton 5P1500R UPS - https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS - https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4s HDHomeRun Network Tuner - https://amzn.to/3Gdkd0x Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch - https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit - https://amzn.to/3jljCRA Nest Protect - https://amzn.to/3hMZcR8 Cloud Lamp - https://amzn.to/3GZji24 Fire Extinguisher - https://amzn.to/3GeB2s4KitSee the entire kit here! https://kit.co/TechnoTim/techno-tim-homelab-tour-late-2022Chapters00:00 - What does Techno Tim‚Äôs HomeLab Look Like?00:50 - HomeLab Music Video02:13 - What‚Äôs all that stuff on the wall?04:05 - New Server Rack05:06 - Networking07:13 - Smart PDU (Power in the front???)10:36 - TBD Gear / Room for Growth11:14 - 1u Servers12:21 - Storinator13:42 - PC Conversion Server14:25 - Disk Shelf15:27 - UPS16:08 - Back of the Rack17:08 - Power Channels17:57 - Non Critical Power Devices18:25 - Practical RGB Lighting (it has utility)19:35 - Cable Management20:51 - UPS Battery Extender21:24 - Don‚Äôt be discouraged, Home Labs come in all shapes and sizes23:05 - HomeLab Music Video OutroLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Set up alerts in Proxmox before it's too late!", "url": "/posts/proxmox-alerts/", "categories": "proxmox", "tags": "homelab, proxmox, alerting, open-source", "date": "2022-12-17 08:00:00 -0600", "snippet": "Setting up alerts in Proxmox is important and critical to making sure you are notified if something goes wrong with your servers. It‚Äôs so easy, I should have done this years ago! In this tutorial...", "content": "Setting up alerts in Proxmox is important and critical to making sure you are notified if something goes wrong with your servers. It‚Äôs so easy, I should have done this years ago! In this tutorial, we‚Äôll set up email notifications using SMTP with Gmail or G Suite that send email alerts when there are disk errors, ZSF Issues, or when backup jobs run. We‚Äôll then test the alerts to make sure they are working by yoinking a drive from my ZFS pool (and hopefully it doesn‚Äôt fail).üì∫ Watch VideoSponsorHuge THANK YOU to Micro Center for Sponsoring Today‚Äôs video!New Customer Exclusive ‚Äì Free 256GB SDD: https://micro.center/24cCheck out Micro Center‚Äôs PC Builder: https://micro.center/1wkSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/tvvShop Micro Center‚Äôs Top Deals: https://micro.center/jb4Configuring Alertsinstall dependenciesapt updateapt install -y libsasl2-modules mailutilsConfigure app passwords on your Google accounthttps://myaccount.google.com/apppasswordsConfigure postfixecho \"smtp.gmail.com your-email@gmail.com:YourAppPassword\" &gt; /etc/postfix/sasl_passwdupdate permissionschmod 600 /etc/postfix/sasl_passwdhash the filepostmap hash:/etc/postfix/sasl_passwdcheck to to be sure the db file was createcat /etc/postfix/sasl_passwd.dbedit postfix confignano /etc/postfix/main.cf# google mail configurationrelayhost = smtp.gmail.com:587smtp_use_tls = yessmtp_sasl_auth_enable = yessmtp_sasl_security_options =smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwdsmtp_tls_CAfile = /etc/ssl/certs/Entrust_Root_Certification_Authority.pemsmtp_tls_session_cache_database = btree:/var/lib/postfix/smtp_tls_session_cachesmtp_tls_session_cache_timeout = 3600sreload postfixpostfix reloadsend a test emailsecho \"This is a test message sent from postfix on my Proxmox Server\" | mail -s \"Test Email from Proxmox\" your-email@gmail.comfix from name in emailinstall dependencyapt updateapt install postfix-pcreedit confignano /etc/postfix/smtp_header_checksadd the following text/^From:.*/ REPLACE From: pve1-alert pve1-alert@something.comhash the filepostmap hash:/etc/postfix/smtp_header_checkscheck the contents of the filecat /etc/postfix/smtp_header_checks.dbadd the module to our postfix confignano /etc/postfix/main.cfadd to the end of the filesmtp_header_checks = pcre:/etc/postfix/smtp_header_checksreload postfix servicepostfix reloadChapters00:00 - Why you should set up alerts in Proxmox01:42 - Micro Center / Free SSD (Sponsor)02:56 - Where can I find the documentation03:07 - Installing and configuring dependencies03:54 - Google Email address configuration08:43 - Configuring postfix and customizing the email alert11:47 - Changing the mail sender name with pcre14:20 - Configure where email alerts are sent15:01 - Backup Alerts17:33 - SMART alerts18:53 - ZFS Alerts19:52 - Testing in Production24:03 - How Proxmox alerts could be better25:30 - Stream Highlight - ‚ÄúJust some flashing lights &amp; music‚ÄùLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Automated NUT Server Install", "url": "/posts/nut-server-script/", "categories": "homelab", "tags": "homelab, nut, self-hosted, ups, pdu, open-source, automation", "date": "2022-11-28 08:00:00 -0600", "snippet": "Here‚Äôs a quick way to automate your battery backups and UPSes with and open source service called NUT server and a raspberry Pi.üì∫ Watch VideoNUT Server Install scriptBe sure to check out (and star)...", "content": "Here‚Äôs a quick way to automate your battery backups and UPSes with and open source service called NUT server and a raspberry Pi.üì∫ Watch VideoNUT Server Install scriptBe sure to check out (and star) the repo with an automated NUT server install!‚≠ê https://github.com/dzomaya/NUTandRpiInstructionsBe sure you have a raspberry pi or any machine running Debian / Ubuntu Linux. Then plug in your UPS via USB and then SSH into your Pi.Then download th script.wget https://raw.githubusercontent.com/dzomaya/NUTandRpi/main/scripts/nutinstall.shMake the script executable.sudo chmod +x nutinstall.shRun the script.sudo ./nutinstall.shAnswer a few questions.Be sure to keep your SNMP community string safe and treat this like a password.You can now access NUT in a browser by going to:http://yourRasberryPiIPaddress/cgi-bin/nut/upsstats.cgiYou can also query your device using SNMPsnmpwalk -v2c -c yourSNMPv2cCommunity yourRasberryPiIPaddress .1.3.6.1.4.1.8072.1.3.2.4.1.2AdvancedTo see advanced configuration and configuring NUT Server and NUT client, see my Network UPS Tools (NUT) Ultimate Guide.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I'll never run out of power! - Eaton and Tripp Lite UPS", "url": "/posts/new-ups-rack/", "categories": "homelab", "tags": "ups, eaton, tripp-lite, server, server-rack", "date": "2022-11-26 08:00:00 -0600", "snippet": "Today I look at 2 (or 3 depending on how you count them) UPS systems from Tripp Lite and Eaton. These UPS devices couldn‚Äôt be any different but they are awesome nonetheless. Each has it‚Äôs own uni...", "content": "Today I look at 2 (or 3 depending on how you count them) UPS systems from Tripp Lite and Eaton. These UPS devices couldn‚Äôt be any different but they are awesome nonetheless. Each has it‚Äôs own unique capabilities and features. Which on will you choose when looking for your next UPS? Join me as we walk through and review these type UPS systems and rack them in my new rack!üì∫ Watch VideoHuge THANK YOU to Eaton / Tripp Lite for sending these UPS systems. If you‚Äôre looking for a new UPS for home or work, you should totally check them out!Tripp Litehttps://tripplite.eaton.comEatonhttps://www.eaton.com/us/en-us/products/backup-power-ups-surge-it-power-distribution/backup-power-ups.htmlCheck out a variety of UPS SystemsTripp Lite Tripp Lite 1500VA Smart UPS Back Up - https://amzn.to/3gEwbGG Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd Tripp Lite SMART1500LCD 1500VA Smart UPS Battery Back Up - https://amzn.to/3VnIWnyEaton Eaton 5P550R 5P 550 Rackmount - https://amzn.to/3UaLwwa Eaton 5P Rackmount Compact 1500VA UPS - https://amzn.to/3OEJVhd Eaton 5P1500R - https://amzn.to/3OC2D90 Eaton 5S1500LCD UPS - https://amzn.to/3GHXaf8NUT Server Install scriptBe sure to check out (and star) David‚Äôs repo with an automated NUT server install!‚≠ê https://github.com/dzomaya/NUTandRpiChapters00:00 - What should I protect with my UPS?02:16 - Tripp Lite SmartPro UPS Review and Specs03:24 - Tripp Lite 36v Battery Pack Review and Specs04:29 - Tripp Lite SmartPro UPS Configuration05:23 - Eaton 5P 1550 UPS Review and Specs07:43 - Eaton 5P 1550 UPS Configuration08:47 - Rack mounting the UPSes10:53 - My Thoughts and Monitoring and Alerting Solutions13:01 - Stream Highlight - ‚ÄúTesting in Production‚ÄùLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Best Server Rack for Your HomeLab? Sysracks Enclosed Rack!", "url": "/posts/sysracks-server-rack/", "categories": "homelab", "tags": "server, server-rack, homelab, hardware, sysracks", "date": "2022-11-12 08:00:00 -0600", "snippet": "I‚Äôve been on a quest looking for a new server rack for my HomeLab in my home. I‚Äôve outgrown my current 18u open frame rack and decided to give a 32u Sysracks Enclosed Rack a try! Join me as we pu...", "content": "I‚Äôve been on a quest looking for a new server rack for my HomeLab in my home. I‚Äôve outgrown my current 18u open frame rack and decided to give a 32u Sysracks Enclosed Rack a try! Join me as we put together this server rack, test out all of the features, and I‚Äôll let you know my thoughts about this brand new server rack!üì∫ Watch VideoA HUGE thank you to Sysracks for sending me this rack!Check out their selection of racks at https://sysracks.comA HUGE thank you to Micro Center for sponsoring this video!New Customer Exclusive ‚Äì Free 256GB SSD In-Store: https://micro.center/yi0Check out Micro Center‚Äôs Custom PC Builder: https://micro.center/3dqSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/lsnShop Micro Center‚Äôs Black Friday Deals: https://micro.center/rguüì¶ See a collection of Sysracks racks here:https://kit.co/TechnoTim/sysracks-server-racksChapters00:00 - Why get a new Server Rack?01:14 - Sysracks 32u Server &amp; Features02:22 - Micro Center (Sponsor)03:35 - Assembling the Rack07:38 - Exploring the Rack Features09:39 - Checking Out the Temperature Control Unit11:04 - My Thoughts About the Sysracks Server Rack13:42 - Stream Highlight - ‚ÄúThe grow room isn‚Äôt big enough for 2 racks!‚ÄùLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Put RGB Fans in My Server and I am NOT Apologizing", "url": "/posts/rgb-storinator/", "categories": "homelab", "tags": "homelab, hardware, server, storinator, 45-drives, rgb", "date": "2022-10-22 09:00:00 -0500", "snippet": "My Storinator server from 45Drives is great, except for 1 thing. It‚Äôs a little loud for my home. It would be fine if it were in a data center or a real network closet, however this is in my basem...", "content": "My Storinator server from 45Drives is great, except for 1 thing. It‚Äôs a little loud for my home. It would be fine if it were in a data center or a real network closet, however this is in my basement. I decided to swap out all the fans to make it quieter, and install RGB fans along with a ZigBee controller so I can control them with Home Automation!üì∫ Watch VideoHUGE THANK YOU to Micro Center for Sponsoring this Video!New Customers Exclusive ‚Äì Get $25 off your purchase of any AMD and Intel Processor (limit one per customer): https://micro.center/1z7Check out Micro Center‚Äôs PC Builder: https://micro.center/mrpSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/ow4Thanks again to 45drives for the Storinator!https://45drives.comüì¶See all the parts in this kit here! üì¶https://kit.co/TechnoTim/smart-rgb-fan-conversationTime Codes00:00 - Making My Server Quiet02:13 - Micro Center (Sponsor)03:18 - Taking the Server Apart04:17 - Changing the CPU Cooler05:02 - How to Add Smart RGB to a Server06:07 - Wiring Up the ZigBee Controller and Fans07:20 - Testing and Pairing the ZigBee Controller08:08 - Why Put RGB Fans in a Server?08:42 - How Much Quieter Is It?09:13 - What‚Äôs Next for the Server?09:33 - Stream Highlight - I will buy an LTT ScrewdriverLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE", "url": "/posts/secret-encryption-sops/", "categories": "homelab", "tags": "git, kubernetes, secrets, security, sops, age", "date": "2022-10-01 09:00:00 -0500", "snippet": "Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo i...", "content": "Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information. Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it‚Äôs not. If you‚Äôre going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE. SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP. Age is a simple, modern, and secure file encryption tool, format, and build using Go. It can encrypt and decrypt your files making then safe enough to commit to your Git repos!A HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioüì∫ Watch VideoInstall SOPSYou can install sops by following this guide.test withsops -vshould seesops 3.7.3 (latest)Install AgeYou can install age by following this guidetest age with age -versionshould seev1.0.0test age-keygen with age-keygen -versionshould seev1.0.0configure keysNow that we have age installed we need to create a public and private keyage-keygen -o key.txtshould seeage-keygen: warning: writing secret key to a world-readable filePublic key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428tlet‚Äôs look at the contentscat key.txtshould see# created: 2022-09-26T21:55:47-05:00# public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428tAGE-SECRET-KEY-1HJCRJVK7EE3A5N8CRP8YSDUGZKNW90Y5UR2RGYAS8L279LFP6LCQU5ADNR Remember this is a secret so keep this safe! Do not commit this!move the file and add to our shellmkdir ~/.sopsmv ./key.txt ~/.sopsadd it to our shellnano ~/.zshrc # or nano ~/.bashrcadd to the end of fileexport SOPS_AGE_KEY_FILE=$HOME/.sops/key.txtsource our shellsource ~/.zshrc # or source ~/.bashrcNow! Let‚Äôs encryptA few ways you can do this. You can encrypt in place or encrypt with an editor but we‚Äôre going to do an in place encryption.YAMLThis can be kubernetes secrets, helm values, or just plain old yamlcreate a secret with the following contentssecret.yaml---apiVersion: v1kind: Secretmetadata: name: mysql-secret namespace: defaultstringData: MYSQL_USER: root MYSQL_PASSWORD: super-Secret-Password!!!!to encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamlto decryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamlKubernetesIf you want to decrypt this secret on the fly and apply to kubernetesencrypt firstsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamldecrypt and pipe to kubectlsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' ./secret.yaml | kubectl apply -f -check it withk describe secrets mysql-secret-testthen kubectl get secret mysql-secret-test -o jsonpath='{.data}'thenkubectl get secret mysql-secret-test -o jsonpath='{.data.MYSQL_PASSWORD}' | base64 --decodeVSCodeinstall vscode extensionchoose the beta for sops because that supports age + sopsdon‚Äôt forget to add .decrypted~secret.yaml to .gitignoreencrypt .env filesmake sure extension is installed.ENV Filescreatesecret.envMYSQL_USER=superrootMYSQL_PASSWORD=\"super-Secret-Password!!!!############\"encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i .envdecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i .envdon‚Äôt forget to add .decrypted~secret.env to your .gitignoreJSON Filessecret.json{ \"mySqlUser\": \"superroot\", \"password\": \"super-Secret-Password!!!!#######\"}encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.jsondecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.jsondon‚Äôt forget to add .decrypted~secret.json to your .gitignoreINI Filessecret.ini[database]user = superrootpassword = super-Secret-Password!!!!1223encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.inidecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.inidon‚Äôt forget to add .decrypted~secret.ini to you .gitignoreFilessecret.sql--- https://xkcd.com/327/--- DO NOT USEINSERT INTO Students VALUES ( 'Robert' ); DROP TABLE STUDENTS; --' )encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --in-place ./secret.sqldecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --in-place ./secret.sqlFluxIf you‚Äôre thinking of doing GitOps with Flux, you can check out my video on this topic or see my documentation. You can do cluster decryption and fully automate decryption of secrets.In cluster decryption with Fluxhttps://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryptionLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "NEW SERVER! Deploying 100 TB of Storage to my HomeLab!", "url": "/posts/45-drives-storinator/", "categories": "homelab", "tags": "homelab, hardware, server, storinator, 45-drives", "date": "2022-09-10 09:00:00 -0500", "snippet": "Check out my new server! It‚Äôs an Storinator AV15 from 45 Drives loaded with lots of great upgrades! Will it be my new high performance storage server and replace TrueNAS? Will it be my new hype...", "content": "Check out my new server! It‚Äôs an Storinator AV15 from 45 Drives loaded with lots of great upgrades! Will it be my new high performance storage server and replace TrueNAS? Will it be my new hypervisor and replace one of my Proxmox servers? Or will I cluster this server and do something else? Let‚Äôs see what this server is made of first!A HUGE thank you to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì FREE Redragon GS500 Gaming Stereo Speakers: https://micro.center/mkpCheck out Micro Center‚Äôs PC Builder: https://micro.center/njwSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/govüì∫ Watch VideoCheck out 45Drives Storinators and other servers - https://www.45drives.com/Seagate Exos X16 14TB Drives and more - https://kit.co/TechnoTim/best-ssd-hard-drive-flash-storageLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Essential HomeLab Tools & Accessories - Network / Server / PC Tool Kit", "url": "/posts/homelab-tools-accessories/", "categories": "homelab", "tags": "homelab, tools, accessories", "date": "2022-08-27 09:00:00 -0500", "snippet": "Every Home Labber and IT person has their go to set of tools and accessories to help them accomplish tasks for technical projects in their HomeLab. This ranges from the very specialized, to the co...", "content": "Every Home Labber and IT person has their go to set of tools and accessories to help them accomplish tasks for technical projects in their HomeLab. This ranges from the very specialized, to the common. I do all kinds of projects at home, from building and racking servers, to building mini and full-size PCs, to upgrading and troubleshooting hardware, to home office upgrades, to installing wireless access points and cameras, down to building raspberry pi projects. I‚Äôve gathered up some of my most essential tools and accessories to assist you in your projects!A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì FREE Redragon GS500 Gaming Stereo Speakers: https://micro.center/gomCheck out Micro Center‚Äôs PC Builder: https://micro.center/7hjSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/vo6üì∫ Watch VideoItemsHere are all of the items that were in the video, plus a few more.üì¶ See the entire kit here: https://kit.co/TechnoTim/essential-homelab-tools-accessories-for-home-labbers-and-it-prosCage nuts Nickel plated 60 pack https://amzn.to/3bPXCuy Black 50 pack https://amzn.to/3bMQbocNetwork cables Mono price Slim cat6a https://amzn.to/3SIz5Iv Monoprice Cat6 pure bare copper https://amzn.to/3JPUdZp Cable matters 6 pack https://amzn.to/3bJDA52Label Maker Brother p touch label maker https://amzn.to/3AaN9DnLaser grip thermometer https://amzn.to/3SEYPp7Short Power cords 10 pack 8 inch https://amzn.to/3QcfHC412 outlet surge protector https://amzn.to/3QvlrXpFluke voltage tester https://amzn.to/3vOVCthKill A Watt Electricity Usage Monitor https://amzn.to/3ASub52SSD Mounting bracket https://amzn.to/3PeN3PBVelcro https://amzn.to/3C2PJfYZip ties https://amzn.to/3JIVpxCHard drive screws https://amzn.to/3SyjlYJUSB Drive https://amzn.to/3BYAnJxSATA/IDE/USB Adapter Usb 2.0 https://amzn.to/3Qc6d9P Usb 3.0 https://amzn.to/3PrTMWBCraftsman quick change screw driver https://amzn.to/3PdvtLCDeWalt utility knife https://amzn.to/3bJFnXGCable crimper https://amzn.to/3ddXxBjPunchdown tool https://amzn.to/3A9QYIVTP Link Gigabit PoE Switch https://amzn.to/3PdBA2sDremel kit https://amzn.to/3BYA15EHead lamp https://amzn.to/3SE3OqgKeystones https://amzn.to/3SQ9mxXCat 6 ends https://amzn.to/3QGXCfgCable tester Klein https://amzn.to/3dy7SrQCable toner https://amzn.to/3QrKHONLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Wildcard Certificates with Traefik + cert-manager + Let's Encrypt in Kubernetes Tutorial", "url": "/posts/kube-traefik-cert-manager-le/", "categories": "kubernetes", "tags": "kubernetes, traefik, cert-manager, k3s, cloudflare, letsencrypt", "date": "2022-08-06 09:00:00 -0500", "snippet": "Traefik, cert-manager, Cloudflare, and Let‚Äôs Encrypt are a winning combination when it comes to securing your services with certificates in Kubernetes. Today, we‚Äôll install and configure Traefik, ...", "content": "Traefik, cert-manager, Cloudflare, and Let‚Äôs Encrypt are a winning combination when it comes to securing your services with certificates in Kubernetes. Today, we‚Äôll install and configure Traefik, the cloud native proxy and load balancer, as our Kubernetes Ingress Controller. We‚Äôll then install and configure cert-manager to manage certificates for our cluster. We‚Äôll set up Let‚Äôs Encrypt as our Cluster Issuer so that cert-manager can automatically provision TLS certificates and even wildcard certificates using Cloudflare DNS challenge absolutely free. We‚Äôll walk through all of this, step by step, so you can help secure your cluster today.üì∫ Watch VideoA HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioGetting StartedIf you need to install a new kubernetes cluster you can use my Ansible Playbook to install one.Resources You can find all of the resources for this tutorial hereHelmcurl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh./get_helm.shFor other ways to install Helm see the installation docs hereInstallingVerify you can communicate with your clusterkubectl get nodesYou should seeNAME STATUS ROLES AGE VERSIONk3s-01 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-02 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-03 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-04 Ready &lt;none&gt; 10h v1.23.4+k3s1k3s-05 Ready &lt;none&gt; 10h v1.23.4+k3s1Verify helm is installedhelm versionYou should seeversion.BuildInfo{Version:\"v3.8.0\", GitCommit:\"d14138609b01886f544b2025f5000351c9eb092e\", GitTreeState:\"clean\", GoVersion:\"go1.17.5\"}Traefik These resources are in the launchpad/kubernetes/traefik-cert-manager/traefik/ folderAdd repohelm repo add traefik https://helm.traefik.io/traefikUpdate repohelm repo updateCreate our namespacekubectl create namespace traefikGet all namespaceskubectl get namespacesWe should seeNAME STATUS AGEdefault Active 21hkube-node-lease Active 21hkube-public Active 21hkube-system Active 21hmetallb-system Active 21htraefik Active 12sInstall traefikhelm install --namespace=traefik traefik traefik/traefik --values=values.yamlCheck the status of the traefik ingress controller servicekubectl get svc --all-namespaces -o wideWe should see traefik with the specified IPNAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTORdefault kubernetes ClusterIP 10.43.0.1 &lt;none&gt; 443/TCP 16h &lt;none&gt;kube-system kube-dns ClusterIP 10.43.0.10 &lt;none&gt; 53/UDP,53/TCP,9153/TCP 16h k8s-app=kube-dnskube-system metrics-server ClusterIP 10.43.182.24 &lt;none&gt; 443/TCP 16h k8s-app=metrics-servermetallb-system webhook-service ClusterIP 10.43.205.142 &lt;none&gt; 443/TCP 16h component=controllertraefik traefik LoadBalancer 10.43.156.161 192.168.30.80 80:30358/TCP,443:31265/TCP 22s app.kubernetes.io/instance=traefik,app.kubernetes.io/name=traefikGet all pods in traefik namespacekubectl get pods --namespace traefikWe should see pods in the traefik namespaceNAME READY STATUS RESTARTS AGEtraefik-76474c4d47-l5z74 1/1 Running 0 11mtraefik-76474c4d47-xb282 1/1 Running 0 11mtraefik-76474c4d47-xx5lw 1/1 Running 0 11mmiddlewareApply middlewarekubectl apply -f default-headers.yamlGet middlewarekubectl get middlewareWe should see our headersNAME AGEdefault-headers 25sdashboardInstall htpasswordsudo apt-get updatesudo apt-get install apache2-utilsGenerate a credential / password that‚Äôs base64 encodedhtpasswd -nb techno password | openssl base64Apply secretkubectl apply -f secret-dashboard.yamlGet secretkubectl get secrets --namespace traefikApply middlewarekubectl apply -f middleware.yamlApply dashboardkubectl apply -f ingress.yamlVisit https://traefik.local.example.comSample Workload These resources are in the launchpad/kubernetes/traefik-cert-manager/nginx/ folderkubectl apply -f deployment.yamlkubectl apply -f service.yamlkubectl apply -f ingress.yamlOr you can apply an entire folder at once!kubectl apply -f nginxcert-manager These resources are in the launchpad/kubernetes/traefik-cert-manager/cert-manager/ folderAdd repohelm repo add jetstack https://charts.jetstack.ioUpdate ithelm repo updateCreate our namespacekubectl create namespace cert-managerGet all namespaceskubectl get namespacesWe should seeNAME STATUS AGEcert-manager Active 12sdefault Active 21hkube-node-lease Active 21hkube-public Active 21hkube-system Active 21hmetallb-system Active 21htraefik Active 4h35mApply crds Note: Be sure to change this to the latest version of cert-managerkubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.9.1/cert-manager.crds.yamlInstall with helmhelm install cert-manager jetstack/cert-manager --namespace cert-manager --values=values.yaml --version v1.9.1Apply secrets Be sure to generate the correct token if using Cloudflare. This is using an API Token and not a global key.From issuers folderkubectl apply -f secret-cf-token.yamlApply staging ClusterIssuerFrom issuers folderkubectl apply -f letsencrypt-staging.yamlCreate certsstagingFrom certificates/staging folderkubectl apply -f local-example-com.yamlCheck the logskubectl logs -n cert-manager -f cert-manager-877fd747c-fjwhpGet challengeskubectl get challengesGet more detailskubectl describe order local-technotim-live-frm2z-1836084675productionApply production ClusterIssuerFrom issuers folderkubectl apply -f letsencrypt-production.yamlFrom certificates/production folderkubectl apply -f local-example-com.yamlLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Unboxing YouTube 100K Subs Play Button Creator Award", "url": "/posts/whats-in-the-box/", "categories": "homelab", "tags": "youtube, live, unboxing", "date": "2022-07-30 10:00:00 -0500", "snippet": "YouTube sent a package. I have a feeling I know what it is, but we‚Äôll all find out live!üì∫ Watch VideoFind all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upg...", "content": "YouTube sent a package. I have a feeling I know what it is, but we‚Äôll all find out live!üì∫ Watch VideoFind all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upgrade-2021Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Beautiful Dashboards with Grafana and Prometheus - Monitoring Kubernetes Tutorial", "url": "/posts/kube-grafana-prometheus/", "categories": "kubernetes", "tags": "kubernetes, grafana, prometheus, alert-manager, k3s", "date": "2022-07-23 10:00:00 -0500", "snippet": "Grafana and Prometheus are a powerful monitoring solution. It allows you to visualize, query, and alert metrics no matter where they are stored. Today, we‚Äôll install and configure Prometheus and ...", "content": "Grafana and Prometheus are a powerful monitoring solution. It allows you to visualize, query, and alert metrics no matter where they are stored. Today, we‚Äôll install and configure Prometheus and Grafana in Kubernetes using kube-prometheus-stack. By the end of this tutorial you be able to observe and visualize your entire Kubernetes cluster with Grafana and Prometheus.üì∫ Watch VideoA HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioGetting StartedIf you need to install a new kubernetes cluster you can use my Ansible Playbook to install one.k3sIf you want to get metrics from your k3s servers, you will need to provide some additional flags to k3s.Additional k3s flags used in the video:extra_server_args: \"--no-deploy servicelb --no-deploy traefik --kube-controller-manager-arg bind-address=0.0.0.0 --kube-proxy-arg metrics-bind-address=0.0.0.0 --kube-scheduler-arg bind-address=0.0.0.0 --etcd-expose-metrics true --kubelet-arg containerd=/run/k3s/containerd/containerd.sock\"helmcurl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh./get_helm.shInstall helmThe helm chart we will be using to install Grafana, Preometheus, and Alert Manager is kube-prometheus-stackInstallingVerify you can communicate with your clusterkubectl get nodesNAME STATUS ROLES AGE VERSIONk3s-01 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-02 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-03 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-04 Ready &lt;none&gt; 10h v1.23.4+k3s1k3s-05 Ready &lt;none&gt; 10h v1.23.4+k3s1Verify helm is installedhelm versionversion.BuildInfo{Version:\"v3.8.0\", GitCommit:\"d14138609b01886f544b2025f5000351c9eb092e\", GitTreeState:\"clean\", GoVersion:\"go1.17.5\"}Add helm repohelm repo add prometheus-community https://prometheus-community.github.io/helm-chartsUpdate repohelm repo updateCreate a Kubernetes Namespacekubectl create namespace monitoringEcho username and password to a fileecho -n 'adminuser' &gt; ./admin-user # change your usernameecho -n 'p@ssword!' &gt; ./admin-password # change your passwordCreate a Kubernetes Secret kubectl create secret generic grafana-admin-credentials --from-file=./admin-user --from-file=admin-password -n monitoringYou should seesecret/grafana-admin-credentials createdVerify your secretkubectl describe secret -n monitoring grafana-admin-credentialsYou should seeName: grafana-admin-credentialsNamespace: monitoringLabels: &lt;none&gt;Annotations: &lt;none&gt;Type: OpaqueData====admin-password: 9 bytesadmin-user: 9 bytesVerify the usernamekubectl get secret -n monitoring grafana-admin-credentials -o jsonpath=\"{.data.admin-user}\" | base64 --decodeYou should seeadminuser%Verify passwordkubectl get secret -n monitoring grafana-admin-credentials -o jsonpath=\"{.data.admin-password}\" | base64 --decodep@ssword!%Remove username and password file from filesystemrm admin-user &amp;&amp; rm admin-passwordCreate a values file to hold our helm valuesnano values.yamlpaste in values from hereCreate our kube-prometheus-stackhelm install -n monitoring prometheus prometheus-community/kube-prometheus-stack -f values.yamlPort Forwarding Grafana UI(be sure to change the pod name to one that matches yours)kubectl port-forward -n monitoring grafana-fcc55c57f-fhjfr 52222:3000Visit Grafanahttp://localhost:52222If you make changes to your values.yaml you can deploy these changes by runninghelm upgrade -n monitoring prometheus prometheus-community/kube-prometheus-stack -f values.yamlExamples:Traefik Ingress exampleLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Will 10 Gigabit work with Cat5e? - 10Gbe HomeLab Network Upgrade!", "url": "/posts/10gbe-cat5e-homelab-network/", "categories": "homelab", "tags": "homelab, network, unifi, 10gbe", "date": "2022-07-09 10:00:00 -0500", "snippet": "After deciding to upgrade my ‚Äúold‚Äù 24 PoE switch to a new 48 port PoE switch with 4 SFP+ ports, I decided to check to see if my old house with old Cat5e network wiring will work at 10 gigabit speed...", "content": "After deciding to upgrade my ‚Äúold‚Äù 24 PoE switch to a new 48 port PoE switch with 4 SFP+ ports, I decided to check to see if my old house with old Cat5e network wiring will work at 10 gigabit speeds! If this works, I will have a 10 Gbe network connection from my PCs to my HomeLab server rack!üì∫ Watch VideoA HUGE thank you to Micro Center for sponsoring today‚Äôs video!New Customer Exclusive, Receive a FREE 256GB SSD in Store: https://micro.center/6af2daCheck Out Micro Center‚Äôs PC Builder: https://micro.center/f65221Visit the Micro Center Community: https://micro.center/e64c4cItems in this videoIntel Server Adapter X540-T1 - https://ebay.us/mQCVflUSW-PRO-48-POE - https://amzn.to/3PbuFYfPatch Panel - https://amzn.to/3yuBdukSlim Patch Cables - https://amzn.to/3yvdmdO10GBase-T SFP+ Transceiver - https://amzn.to/3atGdHBServer Rack - https://amzn.to/3AKfj8SCat5e Spool (you should buy cat 6) - https://amzn.to/3PwNeX9Cat6 Spool - https://amzn.to/3Pgk6TCRJ45 Keystone Jacks - https://amzn.to/3IxwMDGSFP+ DAC - https://amzn.to/3Pg96pyiperfInstallsudo apt updatesudo apt install iperfon the remote machineiperf -sthen on another machineiperf -c 192.168.0.104 # ip of the remote machineLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HomeLab Regrets...", "url": "/posts/my-homelab-regrets/", "categories": "homelab", "tags": "homelab, hardware, network, unifi", "date": "2022-06-25 10:00:00 -0500", "snippet": "If I could start my HomeLab all over, what would I choose? Would I choose the same servers, rack, networking, gateway, switch, firewall, my pc conversion, and even my disk shelf NAS? Did I make a...", "content": "If I could start my HomeLab all over, what would I choose? Would I choose the same servers, rack, networking, gateway, switch, firewall, my pc conversion, and even my disk shelf NAS? Did I make a good choice or a bad one? Join me as we give each piece of my HomeLab a Keep or Upgrade rating.üì∫ Watch VideoA HUGE thanks to Micro Center for sponsoring this video!New Customer Exclusive, Receive a FREE 256GB SSD in Store: https://micro.center/cff7caCheck Out Micro Center‚Äôs PC Builder: https://micro.center/81b822Visit the Micro Center Community: https://micro.center/b33782Find all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upgrade-2021Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "100 Days of HomeLab - The HomeLab Challenge", "url": "/posts/100-days-of-homelab/", "categories": "homelab", "tags": "homelab, challenge", "date": "2022-06-11 10:00:00 -0500", "snippet": "It‚Äôs here. The #100DaysOfHomeLab challenge! This challenge is meant to accelerate your knowledge in servers, networking, infrastructure, automation, storage, containerization, orchestration, virtu...", "content": "It‚Äôs here. The #100DaysOfHomeLab challenge! This challenge is meant to accelerate your knowledge in servers, networking, infrastructure, automation, storage, containerization, orchestration, virtualization, Windows, Linux, and more. It can even possibly accelerate your IT career! So, commit to the Hundred Days of HomeLab challenge, share your progress, and encourage others along the way!So, to celebrate my 100k subs, I brought in some of the biggest names in the HomeLab community and some new faces too! A hue thanks to everyone that took part in this video. I can‚Äôt thank you enough!üì∫ Watch VideoTake the challenge! https://100daysofhomelab.com/Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Jekyll - The Static Site Generator", "url": "/posts/jekyll-docs-site/", "categories": "self-hosted", "tags": "jekyll, website, github, gitlab, docker", "date": "2022-05-28 10:00:00 -0500", "snippet": "Jekyll is a static site generator that transforms your plain text into beautiful static web sites and blogs. It can be use for a documentation site, a blog, an event site, or really any web site y...", "content": "Jekyll is a static site generator that transforms your plain text into beautiful static web sites and blogs. It can be use for a documentation site, a blog, an event site, or really any web site you like. It‚Äôs fast, secure, easy, and open source. It‚Äôs also the same site generator I use to maintain my open source documentation. Today, we‚Äôll be installing and configuring Jekyll using the Chirpy theme. We configure the site, create some pages with markdown, automatically build it with a GitHub action and even host it for FREE on GitHub pages. If you don‚Äôt want to host in the cloud, show how to host it on your own server or even in Docker.A HUGE THANK YOU to Micro Center for Sponsoring this video!New Customers Exclusive ‚Äì Get a Free 256 GB SSD at Micro CenterBrowse Micro Center‚Äôs 30,000 products in stockBe sure to ‚≠ê the jekyll repo and the Chrirpy theme repoüì∫ Watch VideoInstall Dependenciessudo apt updatesudo apt install ruby-full build-essential zlib1g-dev gitTo avoid installing RubyGems packages as the root user:If you are using bash (usually the default for most)echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.bashrcecho 'export GEM_HOME=\"$HOME/gems\"' &gt;&gt; ~/.bashrcecho 'export PATH=\"$HOME/gems/bin:$PATH\"' &gt;&gt; ~/.bashrcsource ~/.bashrcIf you are using zsh (you know if you are)echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.zshrcecho 'export GEM_HOME=\"$HOME/gems\"' &gt;&gt; ~/.zshrcecho 'export PATH=\"$HOME/gems/bin:$PATH\"' &gt;&gt; ~/.zshrcsource ~/.zshrcInstall Jekyll bundlergem install jekyll bundlerCreating a site based on Chirpy StarterVisit https://github.com/cotes2020/jekyll-theme-chirpy#quick-startAfter creating a site based on the template, clone your repogit clone git@&lt;YOUR-USER-NAME&gt;/&lt;YOUR-REPO-NAME&gt;.gitthen install your dependenciescd repo-namebundleAfter making changes to your site, commit and push then up to gitgit add .git commit -m \"made some changes\"git pushJekyll Commandsserving your sitebundle exec jekyll sBuilding your site in production modeJEKYLL_ENV=production bundle exec jekyll bThis will output the production site to _siteBuilding Site in CIThis site already works with GitHub actions, just push it up and check the actions Tab.,For GitLab you can see the pipeline I built for my own docs site hereBuilding with DockerCreate a Dockerfile with the followingFROM nginx:stable-alpineCOPY _site /usr/share/nginx/htmlBuild site in production modeJEKYLL_ENV=production bundle exec jekyll bThen build your image:docker build .Creating a PostNaming ConventionsJekyll uses a naming convention for pages and postsCreate a file in _posts with the formatYEAR-MONTH-DAY-title.mdFor example:2022-05-23-homelab-docs.md2022-05-34-hardware-specs.md Jekyll can delay posts which have the date/time set for a point in the future determined by the ‚Äúfront matter‚Äù section at the top of your post file. Check the date &amp; time as well as time zone if you don‚Äôt see a post appear shortly after re-build.Local Linking of FilesImage from asset:... which is shown in the screenshot below:![A screenshot](/assets/screenshot.jpg)Linking to a file... you can [download the PDF](/assets/diagram.pdf) here.See more post formatting rules on the Jekyll siteMarkdown ExamplesIf you need some help with markdown, check out the markdown cheat sheetI have lots of examples in my documentation site repo. Just click on the Raw button to see the code behind the page.For more neat syntax for the Chirpy theme check their demo page on making posts https://chirpy.cotes.page/posts/write-a-new-post/LinksSee reference repo for files‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The FASTEST way to deploy apps to Kubernetes - GitOps with FLUX", "url": "/posts/flux-devops-gitops/", "categories": "kubernetes", "tags": "flux, devops, gitops, kubernetes", "date": "2022-05-13 08:00:00 -0500", "snippet": "I think I found the perfect GitOps and DevOps toolkit with FluxCD and Kubernetes. Flux is an open source GitOps solution that helps your deploy app and infrastructure with automation. It can moni...", "content": "I think I found the perfect GitOps and DevOps toolkit with FluxCD and Kubernetes. Flux is an open source GitOps solution that helps your deploy app and infrastructure with automation. It can monitor git repositories, source control, image container repositories, helm repositories, and more. It can install apps using Kustomize, Helm, Kubernetes manifests so it‚Äôs designed to fit into your existing workflow. It can even push alerts to your chat system letting you know when deployments happen. In this tutorial we‚Äôll cover all of this and more.https://fluxcd.ioBe sure to ‚≠ê the Flux GitHub repoüì∫ Watch VideoKubernetes ClusterIf you‚Äôre looking to install your own Kubernetes cluster, be sure to check out this video that creates a cluster with AnsibleReference RepoIf you‚Äôre looking for the repo I created this in video, you can find it here /demos/flux-demoInstall Flux CLIcurl -s https://fluxcd.io/install.sh | sudo bashInstalling Flux using a GitHub RepoYou‚Äôll need to grab a personal access token from hereflux bootstrap github \\ --components-extra=image-reflector-controller,image-automation-controller \\ --owner=YourGitHUbUserName \\ --repository=flux \\ --branch=main \\ --path=clusters/home \\ --personal \\ --token-authCheck flux podskubectl get pods -n flux-systemSource Controller (installing manifests)See reference repo for files, located in /demos/flux-demoHelm Controller (installing helm charts)See reference repo for files, /demos/flux-demoImage Automation Controller (monitoring a container registry)See reference repo for files, /demos/flux-demoFirst create a workload (see redis deployment file)Deploy the redis workload (deployment.yml)git add -A &amp;&amp; \\git commit -m \"add redis deployment\" &amp;&amp; \\git push origin mainCreate ImageRepository in the cluster, namespace, and chart that correspond.flux create image repository podinfo \\--image=redis \\--interval=1m \\--export &gt; ./clusters/home/default/redis/redis-registry.yamlCreate ImagePolicy in the cluster, namespace, and chart that correspond.flux create image policy podinfo \\--image-ref=podinfo \\--select-semver=5.0.x \\--export &gt; ./clusters/home/default/redis/redis-policy.yamlThen deploy the ImageRepository and ImagePolicygit add -A &amp;&amp; \\git commit -m \"add redis image scan\" &amp;&amp; \\git push origin maintell flux to apply changesflux reconcile kustomization flux-system --with-sourceNow edit your deployment.yml and add a comment spec: containers: - name: redis image: redis:6.0.0 # {\"$imagepolicy\": \"flux-system:redis\"}Create ImageUpdateAutomationflux create image update flux-system \\--git-repo-ref=flux-system \\--git-repo-path=\"./clusters/home\" \\--checkout-branch=main \\--push-branch=main \\--author-name=fluxcdbot \\--author-email=fluxcdbot@users.noreply.github.com \\--commit-template=\"\" \\--export &gt; ./clusters/home/flux-system-automation.yamlCommit and deploygit add -A &amp;&amp; \\git commit -m \"add image updates automation\" &amp;&amp; \\git push origin maintell flux to apply changesflux reconcile kustomization flux-system --with-sourceNow do a git pull to see that flux has applied the tagsgit pullYour deployment.yml should be updated and it should be deployed to your cluster! spec: containers: - name: redis image: redis:6.0.16 # {\"$imagepolicy\": \"flux-system:redis\"}NotificationsCreate a secretkubectl -n flux-system create secret generic discord-url \\--from-literal=address=https://discord.com/api/webhooks/YOUR/WEBHOOK/URLCreate a notification providerapiVersion: notification.toolkit.fluxcd.io/v1beta1kind: Providermetadata: name: discord namespace: flux-systemspec: type: discord channel: general secretRef: name: discord-urlDefine an AlertapiVersion: notification.toolkit.fluxcd.io/v1beta1kind: Alertmetadata: name: on-call-webapp namespace: flux-systemspec: providerRef: name: discord eventSeverity: info eventSources: - kind: GitRepository name: '*' - kind: Kustomization name: '*'Get alertskubectl -n flux-system get alertsNAME READY STATUS AGEon-call-webapp True Initialized 1mUpdating FluxIf you need to update flux, check out Updating Flux Installation Using the Latest Binary from CLILinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Built the PERFECT Game Server with Pterodactyl and Docker", "url": "/posts/pterodactyl-game-server/", "categories": "homelab", "tags": "gaming, pterodactyl, docker, redis, mariabdb, opensource", "date": "2022-04-30 08:00:00 -0500", "snippet": "Pterodactyl is a free an open source dedicated game server. It comes with both a panel to configure and deploy your game servers as well as game server nodes to run your games. It runs games in D...", "content": "Pterodactyl is a free an open source dedicated game server. It comes with both a panel to configure and deploy your game servers as well as game server nodes to run your games. It runs games in Docker containers to keep them isolated and making them easier than ever to deploy. We‚Äôre going to also use Docker to create our Pterodactyl server and the Wings agent making this truly Docker to the core.https://pterodactyl.ioBe sure to ‚≠ê the Pterodactyl GitHub repo and the Eggs repo (additional games)üì∫ Watch VideoInstall DockerTo install docker, see https://docs.technotim.live/posts/docker-compose-install/Reverse ProxyBoth your Pterodactyl Panel server as well as your Pterodactyl Wing server will need to be configured in your reverse proxy, each with their own public URL. If you need help configuring your reverse proxy, see my guide on how to do that.Need games üéÆ?Check out game deals on Humble Games (affiliate link)Game Panelmkdir pterodactylcd pterodactylmkdir panelcd panelnano docker-compose.ymldocker-compose.ymlversion: '3.8'x-common: database: &amp;db-environment # Do not remove the \"&amp;db-password\" from the end of the line below, it is important # for Panel functionality. MYSQL_PASSWORD: &amp;db-password \"CHANGE_ME\" MYSQL_ROOT_PASSWORD: \"CHANGE_ME_TOO\" panel: &amp;panel-environment # This URL should be the URL that your reverse proxy routes to the panel server APP_URL: \"https://pterodactyl.example.com\" # A list of valid timezones can be found here: http://php.net/manual/en/timezones.php APP_TIMEZONE: \"UTC\" APP_SERVICE_AUTHOR: \"noreply@example.com\" TRUSTED_PROXIES: \"*\" # Set this to your proxy IP # Uncomment the line below and set to a non-empty value if you want to use Let's Encrypt # to generate an SSL certificate for the Panel. # LE_EMAIL: \"\" mail: &amp;mail-environment MAIL_FROM: \"noreply@example.com\" MAIL_DRIVER: \"smtp\" MAIL_HOST: \"mail\" MAIL_PORT: \"1025\" MAIL_USERNAME: \"\" MAIL_PASSWORD: \"\" MAIL_ENCRYPTION: \"true\"## ------------------------------------------------------------------------------------------# DANGER ZONE BELOW## The remainder of this file likely does not need to be changed. Please only make modifications# below if you understand what you are doing.#services: database: image: mariadb:10.5 restart: always command: --default-authentication-plugin=mysql_native_password volumes: - \"/srv/pterodactyl/database:/var/lib/mysql\" environment: &lt;&lt;: *db-environment MYSQL_DATABASE: \"panel\" MYSQL_USER: \"pterodactyl\" cache: image: redis:alpine restart: always panel: image: ghcr.io/pterodactyl/panel:latest restart: always ports: - \"80:80\" - \"443:443\" links: - database - cache volumes: - \"/srv/pterodactyl/var/:/app/var/\" - \"/srv/pterodactyl/nginx/:/etc/nginx/http.d/\" - \"/srv/pterodactyl/certs/:/etc/letsencrypt/\" - \"/srv/pterodactyl/logs/:/app/storage/logs\" environment: &lt;&lt;: [*panel-environment, *mail-environment] DB_PASSWORD: *db-password APP_ENV: \"production\" APP_ENVIRONMENT_ONLY: \"false\" CACHE_DRIVER: \"redis\" SESSION_DRIVER: \"redis\" QUEUE_DRIVER: \"redis\" REDIS_HOST: \"cache\" DB_HOST: \"database\" DB_PORT: \"3306\"networks: default: ipam: config: - subnet: 172.20.0.0/16Start the stackdocker-compose up -dCreate a Userdocker-compose run --rm panel php artisan p:user:makeWingsmkdir pterodactylcd pterodactylmkdir wingscd wingsnano docker-compose.ymldocker-compose.ymlversion: '3.8'services: wings: image: ghcr.io/pterodactyl/wings:v1.6.1 restart: always networks: - wings0 ports: - \"8080:8080\" - \"2022:2022\" - \"443:443\" tty: true environment: TZ: \"UTC\" WINGS_UID: 988 WINGS_GID: 988 WINGS_USERNAME: pterodactyl volumes: - \"/var/run/docker.sock:/var/run/docker.sock\" - \"/var/lib/docker/containers/:/var/lib/docker/containers/\" - \"/etc/pterodactyl/:/etc/pterodactyl/\" - \"/var/lib/pterodactyl/:/var/lib/pterodactyl/\" - \"/var/log/pterodactyl/:/var/log/pterodactyl/\" - \"/tmp/pterodactyl/:/tmp/pterodactyl/\" - \"/etc/ssl/certs:/etc/ssl/certs:ro\" # you may need /srv/daemon-data if you are upgrading from an old daemon #- \"/srv/daemon-data/:/srv/daemon-data/\" # Required for ssl if you use let's encrypt. uncomment to use. #- \"/etc/letsencrypt/:/etc/letsencrypt/\"networks: wings0: name: wings0 driver: bridge ipam: config: - subnet: \"172.21.0.0/16\" driver_opts: com.docker.network.bridge.name: wings0Start the stackdocker-compose up -dsudo nano /etc/pterodactyl/config.ymlPaste the contents from the config your panel generated for your node into this fileNote: The FQDN field when configuring the node in the panel should be the URL that your reverse proxy routes to your wing server. Also ensure you entered 443 for the Daemon Port field.config.ymldebug: falseuuid: 716deb8f-7047-42ad-9323-4a25ae49118btoken_id: 7PoSfql3hdKjbMKntoken: apEo1esCKe5sEWkpfnRB5xakj3mc0aM6jglacgBcsIsgglBtOm0oV1W3efTbwarNapi: host: 0.0.0.0 port: 443 ssl: enabled: false cert: /etc/letsencrypt/live/node-01.example.com/fullchain.pem key: /etc/letsencrypt/live/node-01.example.com/privkey.pem upload_limit: 100system: data: /var/lib/pterodactyl/volumes sftp: bind_port: 2022allowed_mounts: []remote: 'https://pterodactyl.example.com'Restart the stackdocker-compose up -d --force-recreateTroubleshootingMissing MetricsIf you aren‚Äôt seeing your stats in the consolesudo nano /etc/default/grubadd additional parameters to GRUB_CMDLINE_LINUX_DEFAULTGRUB_CMDLINE_LINUX_DEFAULT=\"swapaccount=1 systemd.unified_cgroup_hierarchy=1\"sudo update-grubsudo rebootKubernetesIf you are looking to install the Pterodactyl Panel on kubernetes, see the manifests here.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Freed Up 700GB+ Converting my Videos Using Tdarr", "url": "/posts/tadarr-server/", "categories": "homelab", "tags": "tdarr, plex", "date": "2022-04-16 10:00:00 -0500", "snippet": "Tdarr is a distributed transcoding system that runs on on Windows, Mac, Linux, Arm, Docker, and even Unraid. It uses a server with one or more nodes to transcode videos into any format you like. ...", "content": "Tdarr is a distributed transcoding system that runs on on Windows, Mac, Linux, Arm, Docker, and even Unraid. It uses a server with one or more nodes to transcode videos into any format you like. Today, we‚Äôll set up the Docker and Windows version of Tdarr using a GPU to regain up to 50% of your disk space back. I converted my video collection using Tdarr to h265 and saved over 700 GB of disk space.A HUGE THANKS to our sponsor, Micro Center!New Customers Exclusive ‚Äì Get a Free 256gb SSD at Micro Center: https://micro.center/a643c4üì∫ Watch VideoDocker Server + Nodedocker-compose.ymlversion: \"3.4\"services: tdarr: container_name: tdarr image: ghcr.io/haveagitgat/tdarr:latest restart: unless-stopped network_mode: bridge ports: - 8265:8265 # webUI port - 8266:8266 # server port - 8267:8267 # Internal node port environment: - TZ=America/Chicago - PUID=1000 - PGID=1000 - UMASK_SET=002 - serverIP=0.0.0.0 - serverPort=8266 - webUIPort=8265 - internalNode=true - nodeID=MyInternalNode - nodeIP=0.0.0.0 - nodePort=8267 - NVIDIA_DRIVER_CAPABILITIES=all - NVIDIA_VISIBLE_DEVICES=all volumes: - /path/to/server:/app/server - /path/to/configs:/app/configs - /path/to/logs:/app/logs - /path/to/media/:/media - /path/to/temp/:/temp deploy: resources: reservations: devices: - capabilities: - gpuWindows NodeTdarr_Node_Config.json{ \"nodeID\": \"Windows-Node\", \"nodeIP\": \"192.168.0.100\", \"nodePort\": \"8267\", \"serverIP\": \"192.168.0.101\", \"serverPort\": \"8266\", \"handbrakePath\": \"\", \"ffmpegPath\": \"\", \"mkvpropeditPath\": \"\", \"pathTranslators\": [ { \"server\": \"/media/\", \"node\": \"C:/media\" }, { \"server\": \"/temp\", \"node\": \"C:/temp\" } ], \"platform_arch\": \"win32_x64_docker_false\", \"logLevel\": \"INFO\"}Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Fully Automated K3S etcd High Availability Install", "url": "/posts/k3s-etcd-ansible/", "categories": "kubernetes, k3s", "tags": "k3s, rancher, etcd, ansible, cloud-image, metallb, kube-vip", "date": "2022-03-26 10:00:00 -0500", "snippet": "Setting up k3s is hard. That‚Äôs why we made it easy. Today we‚Äôll set up a High Availability K3s cluster using etcd, MetalLB, kube-vip, and Ansible. We‚Äôll automate the entire process giving you an...", "content": "Setting up k3s is hard. That‚Äôs why we made it easy. Today we‚Äôll set up a High Availability K3s cluster using etcd, MetalLB, kube-vip, and Ansible. We‚Äôll automate the entire process giving you an easy, repeatable way to create a k3s cluster that you can run in a few minutes.A HUGE THANKS to our sponsor, Micro Center!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/1043bcüì∫ Watch VideoPrepYou‚Äôll need to be sure you have Ansible installed on your machine and that it is at least 2.11+. If you don‚Äôt, you can use the install Ansible post on how to install and update it.Second, you‚Äôll need to provision the VMs. Here‚Äôs an easy way to create perfect Proxmox templates with cloud image and cloud init and a video if you need.Next, you‚Äôll need to fork and clone the repo. While you‚Äôre at it, give it a ‚≠ê too :).git clone https://github.com/techno-tim/k3s-ansibleNext you‚Äôll want to create a local copy of ansible.example.cfg.cp ansible.example.cfg ansible.cfgYou‚Äôll want to adapt this to suite your needs however the defaults should work without issue. If you‚Äôre looking for the old defaults, you can see them in this PR that remove the file.Next you‚Äôll need to install some requirements for ansibleansible-galaxy install -r ./collections/requirements.ymlNext, you‚Äôll want to cd into the repo and copy the sample directory within the inventory directory.(Be sure you‚Äôre using the latest template)cp -R inventory/sample inventory/my-clusterInstalling k3sNext, edit the inventory/my-cluster/hosts.ini to match your systems. DNS works here too.[master]192.168.30.38192.168.30.39192.168.30.40[node]192.168.30.41192.168.30.42[k3s_cluster:children]masternodeEdit inventory/my-cluster/group_vars/all.yml to your liking. See comments inline.It‚Äôs best to start using these args, and optionally include traefik if you want it installed with k3s however I would recommend installing it later with helmIt‚Äôs best to start ith the default values in the repo.extra_server_args: --disable servicelb --disable traefikextra_agent_args: I would not change these values unless you know what you are doing. It will most likely not work for you but listing for posterity. Note: These are for an advanced use case. There isn‚Äôt a one size fits all setting for everyone and their needs, I would try using k3s with the above values before changing them. This could have undesired effects like nodes going offline, pods jumping or being removed, etc‚Ä¶ Using these args might come at the cost of stability Also, these will not work anymore without some modificationsextra_server_args: \"--disable servicelb --disable traefik --write-kubeconfig-mode 644 --kube-apiserver-arg default-not-ready-toleration-seconds=30 --kube-apiserver-arg default-unreachable-toleration-seconds=30 --kube-controller-arg node-monitor-period=20s --kube-controller-arg node-monitor-grace-period=20s --kubelet-arg node-status-update-frequency=5s\"extra_agent_args: \"--kubelet-arg node-status-update-frequency=5s\"Start provisioning of the cluster using the following command:ansible-playbook ./site.yml -i ./inventory/my-cluster/hosts.ini Note: note: add ‚Äìask-pass ‚Äìask-become-pass if you are using password SSH login.After deployment control plane will be accessible via virtual ip address which is defined in inventory/my-cluster/group_vars/all.yml as apiserver_endpointkube configTo get access to your Kubernetes cluster and copy your kube config locally run:scp ansibleuser@192.168.30.38:~/.kube/config ~/.kube/configTesting your clusterBe sure you can ping your VIP defined in inventory/my-cluster/group_vars/all.yml as apiserver_endpointping 192.168.30.222Getting nodeskubectl get nodesDeploying a sample nginx workloadkubectl apply -f example/deployment.ymlCheck to be sure it was deployedkubectl describe deployment nginxDeploying a sample nginx service with a LoadBalancerkubectl apply -f example/service.ymlCheck service and be sure it has an IP from metal lb as defined in inventory/my-cluster/group_vars/all.ymlkubectl describe service nginxVisit that url or curlcurl http://192.168.30.80You should see the nginx welcome page.You can clean this up by runningkubectl delete -f example/deployment.ymlkubectl delete -f example/service.ymlResetting your clusterThis will remove k3s from all nodes. These nodes should be rebooted afterwards.ansible-playbook ./reset.yml -i ./inventory/my-cluster/hosts.iniWhat‚Äôs next?See here to get the steps for installing traefik + let‚Äôs encryptSee here for steps to deploy rancherTroubleshootingBe sure to see this post on how to troubleshoot common problemsLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Perfect Proxmox Template with Cloud Image and Cloud Init", "url": "/posts/cloud-init-cloud-image/", "categories": "proxmox", "tags": "proxmox, ubuntu, cloud-image, cloud-init, cloud, clone, linux", "date": "2022-03-19 10:00:00 -0500", "snippet": "Using Cloud Images and Cloud Init with Proxmox is easy, fast, efficient, and fun! Cloud Images are small images that are certified cloud ready that have Cloud Init preinstalled and ready to accept...", "content": "Using Cloud Images and Cloud Init with Proxmox is easy, fast, efficient, and fun! Cloud Images are small images that are certified cloud ready that have Cloud Init preinstalled and ready to accept a Cloud Config. Cloud Images and Cloud Init also work with Proxmox and if you combine the two you have a perfect, small, efficient, optimized clone template to provision machines with your ssh keys and network settings. So join me as we discuss, set up, and configure Proxmox with Cloud Images and Cloud Init.üì∫ Watch VideoInstructionsChoose your Ubuntu Cloud ImageDownload Ubuntu (replace with the url of the one you chose from above)wget https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.imgCreate a new virtual machineqm create 8000 --memory 2048 --core 2 --name ubuntu-cloud --net0 virtio,bridge=vmbr0Import the downloaded Ubuntu disk to local-lvm storageqm importdisk 8000 focal-server-cloudimg-amd64.img local-lvmAttach the new disk to the vm as a scsi drive on the scsi controllerqm set 8000 --scsihw virtio-scsi-pci --scsi0 local-lvm:vm-8000-disk-0Add cloud init driveqm set 8000 --ide2 local-lvm:cloudinitMake the cloud init drive bootable and restrict BIOS to boot from disk onlyqm set 8000 --boot c --bootdisk scsi0Add serial consoleqm set 8000 --serial0 socket --vga serial0DO NOT START YOUR VMNow, configure hardware and cloud init, then create a template and clone. If you want to expand your hard drive you can on this base image before creating a template or after you clone a new machine. I prefer to expand the hard drive after I clone a new machine based on need.Create template.qm template 8000Clone template.qm clone 8000 135 --name yoshi --fullTroubleshootingIf you need to reset your machine-idsudo rm -f /etc/machine-idsudo rm -f /var/lib/dbus/machine-idThen shut it down and do not boot it up. A new id will be generated the next time it boots. If it does not you can run:sudo systemd-machine-id-setupLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "A Hypervisor Built on Kubernetes - Cloud Native HCI with Harvester", "url": "/posts/meet-harvester/", "categories": "kubernetes, rancher", "tags": "harvester, homelab, rancher, k3s, kubernetes, grafana", "date": "2022-03-12 07:00:00 -0600", "snippet": "Rancher released a next generation open source HCI software hypervisor built on Kubernetes that helps you run virtual machines. With Harvester you can create Linux, Windows, or any virtual machine...", "content": "Rancher released a next generation open source HCI software hypervisor built on Kubernetes that helps you run virtual machines. With Harvester you can create Linux, Windows, or any virtual machine that can be easily scaled and cluster giving your high availability virtual machines with a few clicks. It also gives you a platform to automatically create HA RKE1, RKE2, and K3S Kubernetes clusters with etcd along with the virtual machines it runs on. Now you can run virtual machines and kubernetes on the edge on one machine.üì∫ Watch Video‚¨áÔ∏è Download Harvesterüìñ Harvester DocumentationLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "TrueNAS Scale Apps - Official, Unofficial, Docker, and Kubernetes", "url": "/posts/truenas-scale-apps/", "categories": "truenas", "tags": "homelab, docker-compose, container, image, helm, kubernetes, k3s, truenas, docker", "date": "2022-03-02 07:00:00 -0600", "snippet": "TrueNAS SCALE is here and with it comes new way of installing and managing applications. You can install official apps, unofficial and community apps using TrueCharts, and also any Docker image or...", "content": "TrueNAS SCALE is here and with it comes new way of installing and managing applications. You can install official apps, unofficial and community apps using TrueCharts, and also any Docker image or Kubernetes deployment with helm. Join me as we dive into managing applications and exploring TrueNAS SCALES‚Äôs new app engine that runs Docker, Kubernetes, and K3S.üì∫ Watch VideoIf you‚Äôre looking for Community App Catalog for TrueNAS SCALE, you can find it hereLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Building your first Dockerfile, Image, and Container", "url": "/posts/custom-docker-image/", "categories": "docker", "tags": "docker, docker-compose, container, image", "date": "2022-02-26 07:00:00 -0600", "snippet": "We spin up all types of containers on my channel in my tutorials, but we have yet to build our own custom Docker container image. Today we‚Äôll start from scratch with an empty Dockerfile and create...", "content": "We spin up all types of containers on my channel in my tutorials, but we have yet to build our own custom Docker container image. Today we‚Äôll start from scratch with an empty Dockerfile and create, build, and run our very own custom Docker image! We‚Äôll learn all the commands that everyone should know when building and maintaining images with Docker. This tutorial is a great way to get started with Docker!üì∫ Watch VideoInstall DockerTo install docker, see https://docs.technotim.live/posts/docker-compose-install/Docker commandsSource filesbuild imagedocker build .build image with tagdocker build -t hello-internetlist docker imagesdocker imageslist docker containersdocker pslist docker containers including stoppeddocker ps -acreate container from imagedocker run -d -p 80:80 &lt;image id&gt;exec into running containerdocker exec -it &lt;container id&gt; /bin/shstop running containerdocker stop &lt;container id&gt;start a stopped containerdocker start &lt;container id&gt;remove a containerdocker rm &lt;container id&gt;remove an imagedocker rmi &lt;image id&gt;Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Open Source & Collaborative Security with CrowdSec and Traefik - CrowdSec & Traefik Tutorial", "url": "/posts/crowdsec-traefik/", "categories": "homelab", "tags": "homelab, hardware, security, self-hosted, crowdsec, traefik, fail2ban", "date": "2022-02-12 07:00:00 -0600", "snippet": "CrowdSec is a free, open-source and collaborative IPS. Analyze behaviors, respond to attacks &amp; share signals across the community. With CrowdSec, you can set up your own intrusion detection sy...", "content": "CrowdSec is a free, open-source and collaborative IPS. Analyze behaviors, respond to attacks &amp; share signals across the community. With CrowdSec, you can set up your own intrusion detection system that parses logs, detects and blocks threats, and shares bad actors with the larger CrowdSec community. It works great with a reverse proxy like traefik to help keep hackers at bay. Could this be a viable alternative to fail2ban?A HUGE THANK YOU to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/1fbb85If you need to set up traefik, you can follow this post here on configuring traefikIf you need a high level overview of HomeLab and Self-Hosting Security, check out this video that will help you keep your network safe.üì∫ Watch VideoConfigure CrowdSectraefik bouncer repohttps://github.com/fbonalair/traefik-crowdsec-bouncermkdir crowdseccd crowdsectouch docker-compose.ymlnano docker-compose.ymlversion: '3.8'services: crowdsec: image: crowdsecurity/crowdsec:latest container_name: crowdsec environment: GID: \"${GID-1000}\" COLLECTIONS: \"crowdsecurity/linux crowdsecurity/traefik\" # depends_on: #uncomment if running traefik in the same compose file # - 'traefik' volumes: - ./config/acquis.yaml:/etc/crowdsec/acquis.yaml - crowdsec-db:/var/lib/crowdsec/data/ - crowdsec-config:/etc/crowdsec/ - traefik_traefik-logs:/var/log/traefik/:ro networks: - proxy restart: unless-stopped bouncer-traefik: image: docker.io/fbonalair/traefik-crowdsec-bouncer:latest container_name: bouncer-traefik environment: CROWDSEC_BOUNCER_API_KEY: some-api-key CROWDSEC_AGENT_HOST: crowdsec:8080 networks: - proxy # same network as traefik + crowdsec depends_on: - crowdsec restart: unless-stoppednetworks: proxy: external: truevolumes: crowdsec-db: crowdsec-config: traefik_traefik-logs: # this will be the name of the volume from trarfic logs external: true # remove if traefik is running on same stackcd configtouch acquis.yamlnano acquis.yamldocker-compose up -d --force-recreatefilenames: - /var/log/traefik/*labels: type: traefikConfigure Traefikcd traefikcd datanano traefik.ymlapi: dashboard: true debug: trueentryPoints: http: address: \":80\" http: middlewares: - crowdsec-bouncer@file https: address: \":443\" http: middlewares: - crowdsec-bouncer@fileserversTransport: insecureSkipVerify: trueproviders: docker: endpoint: \"unix:///var/run/docker.sock\" exposedByDefault: false file: filename: /config.ymlcertificatesResolvers: cloudflare: acme: email: someone@example.com storage: acme.json dnsChallenge: provider: cloudflare resolvers: - \"1.1.1.1:53\"log: level: \"INFO\" filePath: \"/var/log/traefik/traefik.log\"accessLog: filePath: \"/var/log/traefik/access.log\"nano docker-compose.ymlversion: '3'services: traefik: image: traefik:latest container_name: traefik restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 80:80 - 443:443 environment: - CF_API_EMAIL=user@example.com - CF_DNS_API_TOKEN=YOUR_API_TOKEN # - CF_API_KEY=YOUR_API_KEY # be sure to use the correct one depending on if you are using a token or key volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - /home/username/traefik/data/traefik.yml:/traefik.yml:ro - /home/username/traefik/data/acme.json:/acme.json - /home/username/traefik/data/config.yml:/config.yml:ro - traefik-logs:/var/log/traefik labels: - \"traefik.enable=true\" - \"traefik.http.routers.traefik.entrypoints=http\" - \"traefik.http.routers.traefik.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.middlewares.traefik-auth.basicauth.users=USER:BASIC_AUTH_PASSWORD\" - \"traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme=https\" - \"traefik.http.middlewares.sslheader.headers.customrequestheaders.X-Forwarded-Proto=https\" - \"traefik.http.routers.traefik.middlewares=traefik-https-redirect\" - \"traefik.http.routers.traefik-secure.entrypoints=https\" - \"traefik.http.routers.traefik-secure.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.routers.traefik-secure.middlewares=traefik-auth\" - \"traefik.http.routers.traefik-secure.tls=true\" - \"traefik.http.routers.traefik-secure.tls.certresolver=cloudflare\" - \"traefik.http.routers.traefik-secure.tls.domains[0].main=local.example.com\" - \"traefik.http.routers.traefik-secure.tls.domains[0].sans=*.local.example.com\" - \"traefik.http.routers.traefik-secure.service=api@internal\"networks: proxy: external: truevolumes: traefik-logs:docker-compose up -d --force-recreatecd config/datanano config.ymladd crowdsec-bouncer: forwardauth: address: http://bouncer-traefik:8080/api/v1/forwardAuth trustForwardHeader: truenano traefik.yml# check to be sure you have your middleware set for bothentryPoints: http: address: \":80\" http: middlewares: - crowdsec-bouncer@file https: address: \":443\" http: middlewares: - crowdsec-bouncer@fileDashboardTo add a self-hosted dashboard update your docker-compose.ymlcd crowdsectouch DockerfileFROM metabase/metabaseRUN mkdir /data/ &amp;&amp; wget https://crowdsec-statics-assets.s3-eu-west-1.amazonaws.com/metabase_sqlite.zip &amp;&amp; unzip metabase_sqlite.zip -d /data/nano docker-compose.yml dashboard: #we're using a custom Dockerfile so that metabase pops with pre-configured dashboards build: ./dashboard restart: always ports: - 3000:3000 environment: MB_DB_FILE: /data/metabase.db MGID: \"${GID-1000}\" depends_on: - 'crowdsec' volumes: - crowdsec-db:/metabase-data/ networks: crowdsec_test: ipv4_address: 172.20.0.5restart containerdocker-compose up -d --force-recreateDefault‚Äôs credentials for metabase are crowdsec@crowdsec.net and !!Cr0wdS3c_M3t4b4s3?? Be sure to change this.CrowdSec Commandssee metricsdocker exec crowdsec cscli metricssee bansdocker exec crowdsec cscli decisions listmanually install collectionsdocker exec crowdsec cscli collections install crowdsecurity/traefikupdate hubsdocker exec crowdsec cscli hub updateupgrade hubsdocker exec crowdsec cscli hub upgradeadd bouncer(save api key somewhere)docker exec crowdsec cscli bouncers add bouncer-traefikban ipdocker exec crowdsec cscli decisions add --ip 192.168.0.101unban ipdocker exec crowdsec cscli decisions delete --ip 192.168.0.101Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosting Security Guide for your HomeLab", "url": "/posts/self-hosting-security/", "categories": "homelab", "tags": "homelab, hardware, security, self-hosted", "date": "2022-01-29 07:00:00 -0600", "snippet": "When most people think about self-hosting services in their HomeLab, they often think of the last mile. By last mile I mean the very last hop before a user accesses your services. This last hop, ...", "content": "When most people think about self-hosting services in their HomeLab, they often think of the last mile. By last mile I mean the very last hop before a user accesses your services. This last hop, whether that‚Äôs using certificates or a reverse proxy, is incredibly important, but it‚Äôs also important to know that security starts at the foundation of your HomeLab. Today, we‚Äôll work our way up from hardware security, to OS, to networking, to containers, to firewalls, IDS/IPS, reverse proxies, auth proxies for authentication and authorization, and even lean in to an external provider like Cloudflare.A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/0ef37aüì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Build a Low Power, Efficient, Small Form Factor but Powerful Proxmox Server", "url": "/posts/low-power-efficient-proxmox/", "categories": "homelab", "tags": "homelab, proxmox, hardware", "date": "2022-01-15 07:00:00 -0600", "snippet": "Have you been thinking about building a low power, efficient, small form factor but performant Proxmox server? This is the perfect home server build for anyone who wanted to virtualize some machi...", "content": "Have you been thinking about building a low power, efficient, small form factor but performant Proxmox server? This is the perfect home server build for anyone who wanted to virtualize some machines while still staying green. This tiny, silent, and efficient build is one that won‚Äôt drive up your electricity bill either.A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/4e48d4üì∫ Watch VideoSee the kit here:https://kit.co/technotim/efficient-low-power-powerful-virtualization-serverLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet the Turing Pi 2 - Mix Pis and NVidia Jetsons on a Mini ITX Board!", "url": "/posts/turing-pi-2-hardware/", "categories": "homelab", "tags": "raspberry-pi, k3s, kubernetes, homelab, hardware, turing-pi", "date": "2022-01-01 07:00:00 -0600", "snippet": "The Turing Pi 2 is a compact ARM cluster that provides a scalable computing on the edge. The Turning Pi 2 comes with many improvements over the Turning Pi 1. This model ships with 32GB of RAM, SA...", "content": "The Turing Pi 2 is a compact ARM cluster that provides a scalable computing on the edge. The Turning Pi 2 comes with many improvements over the Turning Pi 1. This model ships with 32GB of RAM, SATA III interface, Raspberry Pi Compute module 4 support, and support for NVIDIA Jetson boards. This means that you can mix and match both raspberry Pis along with Nvidia Jetson boards. This gives us a ton of flexibility to be able to run Pis for general compute workloads, and then Nvidia Jetsons for AI or ML workloads. Join me as we explore the Turing Pi 2 and prepare its home inside of my HomeLab server rack.üì∫ Watch VideoTuring Pi 2 - https://turingpi.comRaspberry Pi Compute Modules - https://www.raspberrypi.com/products/compute-module-4NVIDIA Jetson - https://amzn.to/3eGDQjeRosewill 2U Server Chassis Case - https://amzn.to/3qxbygkEVGA 550 Power Supply - https://amzn.to/3EMEzd4Noctua 80mm Redux PWM Fans - https://amzn.to/3zdBUbpSamsung EVO microSD 64 GB - https://amzn.to/3FR5OosSamsung EVO microSD 128 GB - https://amzn.to/3eCIajxCR2032 Batteries - https://amzn.to/3zfWE2bCM4 Heat Sinks - https://amzn.to/31hSVVkMultipurpose Rails https://amzn.to/3Hr6wsS4 Pin Splitter Cables https://amzn.to/3mQvzh4Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet keepalived - High Availability and Load Balancing in One", "url": "/posts/keepalived-ha-loadbalancer/", "categories": "homelab", "tags": "homelab, keepalived, self-hosted, linux, ubuntu", "date": "2021-12-11 07:00:00 -0600", "snippet": "In my quest to make my services highly available I decided to use keepalived. keepalived is a framework for both load balancing and high availability that implements VRRP. This is a protocol that...", "content": "In my quest to make my services highly available I decided to use keepalived. keepalived is a framework for both load balancing and high availability that implements VRRP. This is a protocol that you see on some routers and has been implemented in keepalived. It creates a Virtual IP (or VIP, or floating IP) that acts as a gateway to route traffic to all participating hosts. This VIP that can provide a high availability setup and fail over to another host in the event that one is down. In this video, we‚Äôll set up and configure keepalived, we‚Äôll test our configuration to make sure it‚Äôs working, and we‚Äôll also talk about some advanced use cases like load balancing.üì∫ Watch VideoInstallationsudo apt updatesudo apt install keepalivedsudo apt install libipset13ConfigurationFind your IPip a edit your configsudo nano /etc/keepalived/keepalived.confFirst nodevrrp_instance VI_1 { state MASTER interface ens18 virtual_router_id 55 priority 150 advert_int 1 unicast_src_ip 192.168.30.31 unicast_peer { 192.168.30.32 } authentication { auth_type PASS auth_pass C3P9K9gc } virtual_ipaddress { 192.168.30.100/24 }}Second nodevrrp_instance VI_1 { state BACKUP interface ens18 virtual_router_id 55 priority 100 advert_int 1 unicast_src_ip 192.168.30.32 unicast_peer { 192.168.30.31 } authentication { auth_type PASS auth_pass C3P9K9gc } virtual_ipaddress { 192.168.30.100/24 }}Start and enable the servicesudo systemctl enable --now keepalived.servicestopping the servicesudo systemctl stop keepalived.serviceget the statussudo systemctl status keepalived.servicenginx examplecreate index.html to mountnano /home/user/docker_volumes/nginx/index.html&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;Hello From Primary Node&lt;/title&gt; &lt;style&gt; h1{ font-weight:lighter; font-family: Arial, Helvetica, sans-serif; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt; Hello World 1 &lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;install nginx via dockerdocker run --name some-nginx -v /home/user/docker_volumes/nginx:/usr/share/nginx/html:ro -d -p 8080:80 nginxvisit your VIP on port 8080PiHoleIn this video we covered the PiHole use case. After setting this up, be sure to check out the tutorial on Gravity Synchttps://docs.technotim.live/posts/ha-pi-hold-gravity-sync/Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "HomeLab Services Tour Late 2021 - What am I Self-Hosting in my HomeLab?", "url": "/posts/homelab-services-tour-2021/", "categories": "homelab", "tags": "homelab, proxmox, grafana, logging, dns, dashboard, kubernetes, certificates, shlink, littlelink-server, portainer, self-hosted, docker, rancher, pi-hole, heimdall, plex, truenas, jekyll, grafana, loki, monitoring, uptime-kuma, traefik, nas, unifi, virtulization, containerization", "date": "2021-12-04 07:00:00 -0600", "snippet": "After showing off my Home Lab hardware in my late 2021 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which ...", "content": "After showing off my Home Lab hardware in my late 2021 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which services I am running here at home. Today, we walk through everything I am hosting including: Dashboard, Hypervisor, Virtualization, Containerization, Network Attached Storage (NAS), DNS, Network Management, Home Security, Kubernetes, Kubernetes Storage, Docker, Reverse Proxy, Certificates, Monitoring, Logging, Syncing Data, File Sharing, Self-Promotion (Contact Page), Link Shortening, Home Entertainment, Home Automation, Battery / UPS Monitoring, CMS, Static Site Generators, Dynamic DNS, CI/CD, and many, many others. Enjoy the virtual tour!Worth mentioning, I have videos on almost every service mentioned in this video!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Grafana LOKI, a Log Aggregation System for Everything", "url": "/posts/grafana-loki/", "categories": "homelab", "tags": "homelab, proxmox, grafana, logging, promtail, prometheus", "date": "2021-11-20 07:00:00 -0600", "snippet": "I‚Äôve been on a quest to find a new logging system. I‚Äôve use quite a few in the past, some open source, some proprietary, and some home grown, but recently I‚Äôve decided to switch. I‚Äôve switched to...", "content": "I‚Äôve been on a quest to find a new logging system. I‚Äôve use quite a few in the past, some open source, some proprietary, and some home grown, but recently I‚Äôve decided to switch. I‚Äôve switched to Grafana Loki for all of my logs for all of my systems - this includes machines, devices, docker systems and hosts, and my all of my kubernetes clusters. If you‚Äôre thinking of using Grafana and are also looking for a fast way to log all of your systems, join me as we discuss and configure Grafana Loki.üì∫ Watch VideoDon‚Äôt want to host it yourself? Check out Grafana Cloud and sign up for a free account https://l.technotim.live/grafana-labsDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir grafanamkdir lokimkdir promtailtouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowlsdocker-compose up -d --force-recreate # be sure you've created promtail-config.yml and loki-config.yml before running thisdocker-compose.ymlversion: \"3\"networks: loki:services: loki: image: grafana/loki:2.4.0 volumes: - /home/serveradmin/docker_volumes/loki:/etc/loki ports: - \"3100:3100\" restart: unless-stopped command: -config.file=/etc/loki/loki-config.yml networks: - loki promtail: image: grafana/promtail:2.4.0 volumes: - /var/log:/var/log - /home/serveradmin/docker_volumes/promtail:/etc/promtail # ports: # - \"1514:1514\" # this is only needed if you are going to send syslogs restart: unless-stopped command: -config.file=/etc/promtail/promtail-config.yml networks: - loki grafana: image: grafana/grafana:latest user: \"1000\" volumes: - /home/serveradmin/docker_volumes/grafana:/var/lib/grafana ports: - \"3000:3000\" restart: unless-stopped networks: - lokiLoki Confignano loki/loki-config.ymlloki-config.ymlauth_enabled: falseserver: http_listen_port: 3100 grpc_listen_port: 9096common: path_prefix: /tmp/loki storage: filesystem: chunks_directory: /tmp/loki/chunks rules_directory: /tmp/loki/rules replication_factor: 1 ring: instance_addr: 127.0.0.1 kvstore: store: inmemoryschema_config: configs: - from: 2020-10-24 store: boltdb-shipper object_store: filesystem schema: v11 index: prefix: index_ period: 24hruler: alertmanager_url: http://localhost:9093Promtail Confignano promtail/promtail-config.ymlpromtail-config.ymlserver: http_listen_port: 9080 grpc_listen_port: 0positions: filename: /tmp/positions.yamlclients: - url: http://loki:3100/loki/api/v1/pushscrape_configs:# local machine logs- job_name: local static_configs: - targets: - localhost labels: job: varlogs __path__: /var/log/*log ## docker logs#- job_name: docker # pipeline_stages:# - docker: {}# static_configs:# - labels:# job: docker# __path__: /var/lib/docker/containers/*/*-json.log# syslog target#- job_name: syslog# syslog:# listen_address: 0.0.0.0:1514 # make sure you also expose this port on the container# idle_timeout: 60s# label_structured_data: yes# labels:# job: \"syslog\"# relabel_configs:# - source_labels: ['__syslog_message_hostname']# target_label: 'host'Loki Docker DriverInstall docker plugindocker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissionsEdit docker daemon configsudo nano /etc/docker/daemon.jsondaemon.json{ \"log-driver\": \"loki\", \"log-opts\": { \"loki-url\": \"http://localhost:3100/loki/api/v1/push\", \"loki-batch-size\": \"400\" }}Restart docker daemon. sudo systemctl restart dockerYou will also need to recreate your containers after applying this setting *LogQL sample queriesQuery all logs from the varlogs stream{job=\"varlogs\"} Query all logs from the varlogs stream and filter on docker{job=\"varlogs\"} |= \"docker\"Query all logs from the container_name label of uptime-kuma and filter on host of juno{container_name=\"uptime-kuma\", host=\"juno\"}Read more about LogQL hereARM CPU (Raspberry Pi)There is a workaround for using this with ARM CPUs. Credit to AndreiTelteu for finding this in this discussiondelete /etc/docker/daemon.jsonAdd the vector service to the docker-compose.yml file vector: image: timberio/vector:0.18.1-debian volumes: - /var/run/docker.sock:/var/run/docker.sock - /home/serveradmin/docker_volumes/vector/vector-config.toml:/etc/vector/vector.toml:ro ports: - \"8383:8383\" restart: unless-stopped networks: - lokiRun this commandmkdir vectorcd vectornano vector-config.tomlpaste this config in the file:[sources.docker-local] type = \"docker_logs\" docker_host = \"/var/run/docker.sock\" exclude_containers = [] # Identify zero-width space as first line of a multiline block. multiline.condition_pattern = '^\\x{200B}' # required multiline.mode = \"halt_before\" # required multiline.start_pattern = '^\\x{200B}' # required multiline.timeout_ms = 1000 # required, milliseconds [sinks.loki] # General type = \"loki\" # required inputs = [\"docker*\"] # required endpoint = \"http://loki:3100\" # required # Auth auth.strategy = \"bearer\" # required auth.token = \"none\" # required # Encoding encoding.codec = \"json\" # required # Healthcheck healthcheck.enabled = false # optional, default # Loki Labels labels.forwarder = 'vector' labels.host = '' labels.container_name = '' labels.compose_service = '' labels.compose_project = '' labels.source = '' labels.category = 'dockerlogs'Credits to this post for the config file: grafana/loki#2361 (comment)Kubernetes SetupIf you‚Äôre looking to set this up in kubernetes, see this postLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Grafana Loki with Helm on Kubernetes", "url": "/posts/grafana-loki-kubernetes/", "categories": "kubernetes", "tags": "homelab, proxmox, grafana, logging, promtail, prometheus, kubernetes, helm", "date": "2021-11-20 06:00:00 -0600", "snippet": "In my previous video (Meet Grafana LOKI, a log aggregation system for everything and post, I promised that I would also explain how to install Granfana Loki on Kubernetes using helm. If you‚Äôre loo...", "content": "In my previous video (Meet Grafana LOKI, a log aggregation system for everything and post, I promised that I would also explain how to install Granfana Loki on Kubernetes using helm. If you‚Äôre looking to set this up in docker-compose, be sure to check out this videoInstalling helmThink of helm as a package manager for kubernetes. It‚Äôa an easy way to bundle and deploy config to kubernetes with versioning. If you need to install helm visit helm.shInstalling Loki StackFirst add Loki‚Äôs chart repository to helmhelm repo add grafana https://grafana.github.io/helm-chartsThen update the chart repositoryhelm repo updateThis command will: install grafana install prometheus install loki enable persistence for your stack and create a PVChelm upgrade --install loki grafana/loki-stack --set grafana.enabled=true,prometheus.enabled=true,prometheus.alertmanager.persistentVolume.enabled=false,prometheus.server.persistentVolume.enabled=false,loki.persistence.enabled=true,loki.persistence.storageClassName=nfs-client,loki.persistence.size=5GiYou‚Äôll want to set loki.persistence.storageClassName=nfs-client to your StorageClassIn this example, I am using nf-client which is the Kubernetes NFS Subdir External ProvisionerAccessing the Grafana DashboardTo access your Grafana dashboard you can runkubectl port-forward --namespace &lt;YOUR-NAMESPACE&gt; service/loki-grafana 3000:80To get the password for the admin user runkubectl get secret --namespace &lt;YOUR-NAMESPACE&gt; loki-grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echoThis should print out your passwordYou can now access your dashboard on http://localhost:3000Ingress with TraefikIf you want to create an IngressRoute and you are using traefik can you apply the followingingress.ymlapiVersion: traefik.containo.us/v1alpha1kind: IngressRoutemetadata: name: loki-grafana-ingress annotations: kubernetes.io/ingress.class: traefik-internal # change with your valuespec: entryPoints: - websecure routes: - match: Host(`grafana.example.com`) # change with your value kind: Rule services: - name: loki-grafana port: 80kubectl apply -f ingress.ymlYou should now be able to access your dashboard on https://grafana.example.comLogQL sample queriesQuery all logs from the container label{container=\"uptime-kuma\"} query all logs from the container stream and filter on error{container=\"uptime-kuma\"} |= \"error\"query all logs from the pod label of uptime-kuma-8d45g32fd-lk8rl{pod=\"uptime-kuma-8d45g32fd-lk8rl\"}Read more about LogQL hereUpgrading Loki StackTo upgrade, you run the same command you use to install it, with an updated charthelm repo updatehelm upgrade --install loki grafana/loki-stack --set grafana.enabled=true,prometheus.enabled=true,prometheus.alertmanager.persistentVolume.enabled=false,prometheus.server.persistentVolume.enabled=false,loki.persistence.enabled=true,loki.persistence.storageClassName=nfs-client,loki.persistence.size=5GiLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab and NEW Server Room Tour! (Late 2021)", "url": "/posts/homelab-tour-2021/", "categories": "homelab", "tags": "homelab, hardware", "date": "2021-11-06 08:00:00 -0500", "snippet": "Well, here it is! My Late 2021 Server Rack and HomeLab tour! This is a special one because I just revamped and remodeled a spot in the basement for my new data center / server room (still picking...", "content": "Well, here it is! My Late 2021 Server Rack and HomeLab tour! This is a special one because I just revamped and remodeled a spot in the basement for my new data center / server room (still picking out a name for it). I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, new UPS, new Raspberry Pi, and even a whole entire wall of tech gear. I also added lots of automation and IoT devices! Join me as we walk through my server room upgrade!üì∫ Watch Video(Affiliate links are included in this description. I may receive a small commission at no cost to you.)üì¶ Gear in this video üì¶2u Rack Shelf - https://amzn.to/2ZVSJKNAPC 1500VA UPS - https://amzn.to/3GXLJh6Nest Protect - https://amzn.to/3BLhc21Hue Iris Light - https://amzn.to/3ET5Gn8Hue Motion &amp; Temp https://amzn.to/3qb1FXfAxxtra Power Strip - https://amzn.to/3qbzIhTAmazon Power Strip - https://amzn.to/3mMN16wWall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4sHue Dimmer Switch - https://amzn.to/3wj9StsHue Light Strips - https://amzn.to/3wkkLLDHue Smart Bulb Starter Kit - https://amzn.to/31renqsHue Motion &amp; Temp Detection - https://amzn.to/3o7HOFRCloud Lamp - https://amzn.to/3GZji24Pi 4 B - https://amzn.to/3BTPKzcPoE Pi Hat - https://amzn.to/3GUqY5OPi Zero - https://amzn.to/3o4LGapHD Homerun - https://amzn.to/2ZXxmYSIntel NUC - https://amzn.to/3BKE3uR24 Port Patch Panel - https://amzn.to/3GYA4yoWall Mount Patch Panel - https://amzn.to/3o2AxadSlim Network Cables - https://amzn.to/3kbYV85UniFi Flex Mini - https://amzn.to/3GXMzKMUniFi UDM Pro - https://amzn.to/3GZkanmUniFi 24 Port PoE Gen 2 Switch Pro - https://amzn.to/3GTmUCXPC Conversion Case - https://amzn.to/3qgkFDJ18u Server Rack - https://amzn.to/3kbZdvH1u Rails - https://amzn.to/3GSd701APC 600 VA UPS - https://amzn.to/3mMxsM1NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKhSuperMicro 1u Servers - https://amzn.to/3q9M7TJ8 TB IronWolf NAS Drives - https://amzn.to/3EQXXGwüöÄ Kits üöÄRackmount Servers - https://kit.co/technotim/rackmount-home-lab-serversHomeLab Racks - https://kit.co/technotim/server-rack-homelab1u Servers - https://kit.co/technotim/techno-tim-1u-serverNetworking Stack - https://kit.co/technotim/techno-tim-network-stackRaspberry Pi with PoE - https://kit.co/technotim/best-raspberry-pi-with-poeHome Security - https://kit.co/technotim/techno-tim-home-securityStorage and Hard Drives - https://kit.co/technotim/best-ssd-hard-drive-flash-storageHomeLab and Server Room Upgrade 2021 - https://kit.co/technotim/techno-tim-homelab-and-server-room-upgrade-2021Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Windows 11 with Proxmox the Right Way!", "url": "/posts/windows-11-proxmox/", "categories": "homelab", "tags": "homelab, proxmox, windows-11, virtualization", "date": "2021-10-22 08:00:00 -0500", "snippet": "Windows 11 is here and with it comes new hardware requirements. These requirements not only affect physical hardware but also virtual hardware too. The TPM 2.0 requirement for Windows 11 is shaki...", "content": "Windows 11 is here and with it comes new hardware requirements. These requirements not only affect physical hardware but also virtual hardware too. The TPM 2.0 requirement for Windows 11 is shaking the tech community, HomeLab community, and even virtualization too. Well have no fear, today we‚Äôre going to virtualize Windows 11 with a virtual TPM chip! We‚Äôre going to create a virtual machine according to proxmox best practices and even install a virtual TMP chip so that you can test Windows 11 with your hardware and software before upgrading Windows 10 in your HomeLab or production environment without any hacks!üì∫ Watch VideoLinksWindows 11 Downloadhttps://www.microsoft.com/en-us/software-download/windows11KVM/QEMU Windows guest drivers (virtio-win) downloadhttps://github.com/virtio-win/virtio-win-pkg-scriptsNeed to Upgrade to Proxmox 7?https://docs.technotim.live/posts/proxmox-7/‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Uptime Kuma, a Fancy Open Source Uptime Monitor for all your HomeLab Monitoring Needs", "url": "/posts/uptime-kuma/", "categories": "self-hosted", "tags": "homelab, uptime-kuma, self-hosted, docker, monitoring, alerting, open-source", "date": "2021-10-03 10:00:00 -0500", "snippet": "You‚Äôve spun up lots of self-hosted services in your HomeLab but you haven‚Äôt set up monitoring and alerting yet. We‚Äôll be glad you waited because today well set up Uptime Kuma to do just that. Upt...", "content": "You‚Äôve spun up lots of self-hosted services in your HomeLab but you haven‚Äôt set up monitoring and alerting yet. We‚Äôll be glad you waited because today well set up Uptime Kuma to do just that. Uptime Kuma is a self-hosted, open source, fancy uptime monitoring and alerting system. It can monitor HTTP, HTTP with keyword, TCP, Ping, and even DNS systems!https://github.com/louislam/uptime-kumaüì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir uptime-kumacd uptime-kumatouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowmkdir datalsdocker-compose up -d --force-recreatedocker-compose.yml---version: \"3.1\"services: uptime-kuma: image: louislam/uptime-kuma:1 container_name: uptime-kuma volumes: - /home/serveradmin/docker_volumes/uptime-kuma/data:/app/data ports: - 3001:3001 restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables, ports, and volumes from above into the form on the web page.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Network UPS Tools (NUT) Ultimate Guide", "url": "/posts/NUT-server-guide/", "categories": "homelab", "tags": "homelab, nut, self-hosted, docker, ups, pdu, open-source", "date": "2021-09-25 10:00:00 -0500", "snippet": "Meet NUT Server, or Network UPS Tools. It‚Äôs an open UPS networking monitoring tool that runs on many different operating systems and processors. This means you can run the server on Linux, MacOS,...", "content": "Meet NUT Server, or Network UPS Tools. It‚Äôs an open UPS networking monitoring tool that runs on many different operating systems and processors. This means you can run the server on Linux, MacOS, or BSD and run the client on Windows, MacOS, Linux, and more. It‚Äô perfect for your Pi, server, or desktop. It works with hundreds of UPS devices, PDUs, and many other power management systems.This is the ultimate guide to configuring Network UPS Tools (NUT). We cover everything from installing and configuring the server on as Raspberry Pi, configuring the client on Windows and Linux, configure a charting and graphing website to visualize NUT data, spin up an additional web site use Docker, and finally set up monitoring and alerting to automate shutdowns of your machine.https://networkupstools.orgAlso, note to self, don‚Äôt eat a salad before you record a video‚Ä¶.üì∫ Watch VideoNUT UPS Serverplug in upslsusbshould see something likeBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 019: ID 09ae:2012 Tripp LiteBus 001 Device 002: ID 2109:3431 VIA Labs, Inc. HubBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hubsudo apt updatesudo apt install nut nut-client nut-serversudo nut-scanner -Ushould see something liketripp lite[nutdev1] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"09AE\" productid = \"2012\" product = \"Tripp Lite UPS\" vendor = \"Tripp Lite\" bus = \"001\"apc 1500[nutdev1] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"051D\" productid = \"0002\" product = \"Back-UPS XS 1500M FW:947.d10 .D USB FW:d10\" serial = \"3xxxxxxxxxxx\" vendor = \"Tripp Lite\" bus = \"001\"apc 850[nutdev3] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"051D\" productid = \"0002\" product = \"Back-UPS ES 850G2 FW:931.a10.D USB FW:a\" serial = \"3xxxxxxxxxxx\" vendor = \"American Power Conversion\" bus = \"001\"sudo nano /etc/nut/ups.confpollinterval = 1maxretry = 3[tripplite] driver = usbhid-ups port = auto desc = \"Tripp Lite 1500VA SmartUPS\" vendorid = 09ae productid = 2012[apc-network] driver = usbhid-ups port = auto desc = \"APC Back-UPS XS 1500\" vendorid = 051d productid = 0002 serial = 3xxxxxxxxx[apc-modem] driver = usbhid-ups port = auto desc = \"APC 850 VA\" vendorid = 051d productid = 0002 serial = 3xxxxxxxxxsudo nano /etc/nut/upsmon.confMONITOR tripplite@localhost 1 admin secret masterMONITOR apc-modem@localhost 1 admin secret masterMONITOR apc-network@localhost 1 admin secret mastersudo nano /etc/nut/upsd.confChange 127.0.0.1LISTEN 127.0.0.1 3493 to all interfaceLISTEN 0.0.0.0 3493 sudo nano /etc/nut/nut.confMODE=netserversudo nano /etc/nut/upsd.users[monuser] password = secret admin mastersudo nano /etc/udev/rules.d/99-nut-ups.rulesSUBSYSTEM!=\"usb\", GOTO=\"nut-usbups_rules_end\"# TrippLite# e.g. TrippLite SMART1500LCD - usbhid-upsACTION==\"add|change\", SUBSYSTEM==\"usb|usb_device\", SUBSYSTEMS==\"usb|usb_device\", ATTR{idVendor}==\"09ae\", ATTR{idProduct}==\"2012\", MODE=\"664\", GROUP=\"nut\", RUN+=\"/sbin/upsdrvctl stop; /sbin/upsdrvctl start\"LABEL=\"nut-usbups_rules_end\"reboot (because it‚Äôs easy)orsudo service nut-server restartsudo service nut-client restartsudo systemctl restart nut-monitorsudo upsdrvctl stopsudo upsdrvctl startAPC UPS 950 valist all usb deviceslsusbquery device by USB bus (replace with # from previous command)lsusb -D /dev/bus/usb/001/057You should see something likeDevice Descriptor: bLength 18 bDescriptorType 1 bcdUSB 2.00 bDeviceClass 0 bDeviceSubClass 0 bDeviceProtocol 0 bMaxPacketSize0 64 idVendor 0x051d American Power Conversion idProduct 0x0002 Uninterruptible Power Supply bcdDevice 0.90 iManufacturer 1 iProduct 2 iSerial 3 bNumConfigurations 1 Configuration Descriptor: bLength 9 bDescriptorType 2 wTotalLength 0x0022 bNumInterfaces 1 bConfigurationValue 1 iConfiguration 0 bmAttributes 0xe0 Self Powered Remote Wakeup MaxPower 2mA Interface Descriptor: bLength 9 bDescriptorType 4 bInterfaceNumber 0 bAlternateSetting 0 bNumEndpoints 1 bInterfaceClass 3 Human Interface Device bInterfaceSubClass 0 bInterfaceProtocol 0 iInterface 0 HID Device Descriptor: bLength 9 bDescriptorType 33 bcdHID 1.00 bCountryCode 33 US bNumDescriptors 1 bDescriptorType 34 Report wDescriptorLength 1049 Report Descriptors: ** UNAVAILABLE ** Endpoint Descriptor: bLength 7 bDescriptorType 5 bEndpointAddress 0x81 EP 1 IN bmAttributes 3 Transfer Type Interrupt Synch Type None Usage Type Data wMaxPacketSize 0x0008 1x 8 bytes bInterval 100NUT CGI Serversudo apt install apache2 nut-cgisudo nano /etc/nut/hosts.confMONITOR tripplite@localhost \"Tripp Lite 1500VA SmartUPS - Rack\"MONITOR apc-modem@localhost \"APC 850 VA - Wall\"MONITOR apc-network@localhost \"APC Back-UPS XS 1500 - Rack\"sudo a2enmod cgisudo systemctl restart apache2sudo nano /etc/nut/upsset.confI_HAVE_SECURED_MY_CGI_DIRECTORYvisithttp://your.ip.adddress/cgi-bin/nut/upsstats.cgiWebnut Docker Containermkdir webnutcd webnutnano docker-compose.ymlpaste contents and saveversion: \"3.1\"services: nut: image: teknologist/webnut container_name: webnut environment: - UPS_HOST=ip.address.of.nut.server - UPS_PORT=3493 - UPS_USER=admin - UPS_PASSWORD=secret restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 6543:6543networks: proxy: external: truedocker-compose up -d --force-recreateLinux NUT Client (remote)sudo apt install nut-clientthen runupscto verifyverify you can connectupsc tripplite@ip.address.of.serversudo nano /etc/nut/upsmon.confRUN_AS_USER rootMONITOR apc-modem@ip.address.of.nut.server 1 admin secret slaveMINSUPPLIES 1SHUTDOWNCMD \"/sbin/shutdown -h\"NOTIFYCMD /usr/sbin/upsschedPOLLFREQ 2POLLFREQALERT 1HOSTSYNC 15DEADTIME 15POWERDOWNFLAG /etc/killpowerNOTIFYMSG ONLINE \"UPS %s on line power\"NOTIFYMSG ONBATT \"UPS %s on battery\"NOTIFYMSG LOWBATT \"UPS %s battery is low\"NOTIFYMSG FSD \"UPS %s: forced shutdown in progress\"NOTIFYMSG COMMOK \"Communications with UPS %s established\"NOTIFYMSG COMMBAD \"Communications with UPS %s lost\"NOTIFYMSG SHUTDOWN \"Auto logout and shutdown proceeding\"NOTIFYMSG REPLBATT \"UPS %s battery needs to be replaced\"NOTIFYMSG NOCOMM \"UPS %s is unavailable\"NOTIFYMSG NOPARENT \"upsmon parent process died - shutdown impossible\"NOTIFYFLAG ONLINE SYSLOG+WALL+EXECNOTIFYFLAG ONBATT SYSLOG+WALL+EXECNOTIFYFLAG LOWBATT SYSLOG+WALLNOTIFYFLAG FSD SYSLOG+WALL+EXECNOTIFYFLAG COMMOK SYSLOG+WALL+EXECNOTIFYFLAG COMMBAD SYSLOG+WALL+EXECNOTIFYFLAG SHUTDOWN SYSLOG+WALL+EXECNOTIFYFLAG REPLBATT SYSLOG+WALLNOTIFYFLAG NOCOMM SYSLOG+WALL+EXECNOTIFYFLAG NOPARENT SYSLOG+WALLRBWARNTIME 43200NOCOMMWARNTIME 600FINALDELAY 5set net clientsudo nano /etc/nut/nut.confMODE=netclientrestart servicesudo systemctl restart nut-clientcheck statussudo systemctl status nut-clientWindows NUT Clienthttps://github.com/gawindx/WinNUT-Client/releasesscheduling on the remote systemsudo nano /etc/nut/upssched.confCMDSCRIPT /etc/nut/upssched-cmdPIPEFN /etc/nut/upssched.pipeLOCKFN /etc/nut/upssched.lockAT ONBATT * START-TIMER onbatt 30AT ONLINE * CANCEL-TIMER onbatt onlineAT ONBATT * START-TIMER earlyshutdown 30AT LOWBATT * EXECUTE onbattAT COMMBAD * START-TIMER commbad 30AT COMMOK * CANCEL-TIMER commbad commokAT NOCOMM * EXECUTE commbadAT SHUTDOWN * EXECUTE powerdownAT SHUTDOWN * EXECUTE powerdownsudo nano /etc/nut/upssched-cmd`````bash#!/bin/sh case $1 in onbatt) logger -t upssched-cmd \"UPS running on battery\" ;; earlyshutdown) logger -t upssched-cmd \"UPS on battery too long, early shutdown\" /usr/sbin/upsmon -c fsd ;; shutdowncritical) logger -t upssched-cmd \"UPS on battery critical, forced shutdown\" /usr/sbin/upsmon -c fsd ;; upsgone) logger -t upssched-cmd \"UPS has been gone too long, can't reach\" ;; *) logger -t upssched-cmd \"Unrecognized command: $1\" ;; esacmake it executable (should already be)chmod +x /etc/nut/upssched-cmdBe sure PIPEFN and LOCKFN point to a folder that esists, I‚Äôve seen it point to /etc/nut/upssched/ instead of /etc/nut If it does, create the folder or update these variables.mkdir /etc/nut/upssched/testsystemctl restart nut-clientthen pull the plug on the ups connected to the master, check syslogstail /var/log/syslogshould see the logsmachine should shutdownLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet File Browser, a Small but Mighty Web File Browser", "url": "/posts/meet-file-browser/", "categories": "self-hosted", "tags": "homelab, portainer, self-hosted, docker, rancher, file-browser", "date": "2021-09-04 10:00:00 -0500", "snippet": "Meet File Browser, an open source, self-hosted alternative to services like Dropbox and other web based file browsers. Today we‚Äôll configure a containerized version of File Browser and have you up...", "content": "Meet File Browser, an open source, self-hosted alternative to services like Dropbox and other web based file browsers. Today we‚Äôll configure a containerized version of File Browser and have you up and going in just a few minutes. We‚Äôll also walk through creating, editing, moving, copying, and even sharing files and folders so that you get a better understanding about what File Browser is all about.üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir filebrowsercd filebrowsertouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowtouch filebrowser.dbdocker-compose up -d --force-recreatedocker-compose.yml---version: '3'services: file-browser: image: filebrowser/filebrowser container_name: file-browser user: 1000:1000 ports: - 8081:80 volumes: - /home/serveradmin/:/srv - /home/serveradmin/filebrowser/filebrowser.db:/database.db restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables above into the form on the web page.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Install Docker and Docker Compose Ubuntu", "url": "/posts/docker-compose-install/", "categories": "docker", "tags": "homelab, docker, docker-compose", "date": "2021-08-14 11:00:00 -0500", "snippet": "This guide will walk you through how to Install Docker Engine, containerd, and Docker Compose on Ubuntu.If you have an existing version of Docker install, it is best to remove it first. See the Cl...", "content": "This guide will walk you through how to Install Docker Engine, containerd, and Docker Compose on Ubuntu.If you have an existing version of Docker install, it is best to remove it first. See the Cleaning Upif you‚Äôre installing this on Debian, see Docker‚Äôs Debian Install Guidesudo apt-get updatesudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-releasesudo mkdir -p /etc/apt/keyringscurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpgecho \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/nullsudo apt-get updatesudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-pluginCheck Installed versiondocker -vCheck docker composedocker composeCheck runtime sudo docker run hello-worldUse Docker without sudosudo usermod -aG docker $USERYou‚Äôll need to log out then back in to apply thisCleaning UpIf you need to uninstall Docker, run the following sudo apt-get remove docker docker-engine docker.io containerd runcLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosted, DIY, Open Source Alternative to Linktree", "url": "/posts/open-source-linktree-alt/", "categories": "self-hosted", "tags": "homelab, pi-hole, dns, littlelink-server, portainer, self-hosted, docker, rancher", "date": "2021-08-14 11:00:00 -0500", "snippet": "Meet LittleLink &amp; LittleLink-Server - a DIY, self hosted, and open source alternative to the popular service Linktree. This web site inside of a container allows you to create and host your o...", "content": "Meet LittleLink &amp; LittleLink-Server - a DIY, self hosted, and open source alternative to the popular service Linktree. This web site inside of a container allows you to create and host your own web site with all of your social information and links, giving your followers multiple ways to connect with you! In this video we talk about what LittleLink-Server is, what it does, and how to create your own site using this Docker container with only a few environment variables, no knowledge of web development required. Be sure to check the documentation for details!üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containermkdir littlelink-servercd littlelink-servertouch docker-compose.ymlIf you‚Äôre using Docker compose (see the GitHub repo for the latest file)docker-compose.yml---version: '3'services: little-link: image: ghcr.io/techno-tim/littlelink-server:latest container_name: littlelink-server environment: - META_TITLE=Techno Tim - META_DESCRIPTION=Techno Tim Link page - META_AUTHOR=Techno Tim - THEME=Dark - FAVICON_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg - AVATAR_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg - AVATAR_2X_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_400x400.jpg - AVATAR_ALT=Techno Tim Profile Pic - NAME=TechnoTim - BIO=Hey! Just a place where you can connect with me! - GITHUB=https://l.technotim.live/github - TWITTER=https://l.technotim.live/twitter - INSTAGRAM=https://l.technotim.live/instagram - YOUTUBE=https://l.technotim.live/subscribe - TWITCH=https://l.technotim.live/twitch/ - DISCORD=https://l.technotim.live/discord - TIKTOK=https://l.technotim.live/tiktok - KIT=https://l.technotim.live/gear # - FACEBOOK=https://facebook.com # - FACEBOOK_MESSENGER=https://facebook.com # - LINKED_IN=https://linkedin.com # - PRODUCT_HUNT=https://www.producthunt.com/ # - SNAPCHAT=https://www.snapchat.com/ # - SPOTIFY=https://www.spotify.com/ # - REDDIT=https://www.reddit.com/ # - MEDIUM=https://medium.com # - PINTEREST=https://www.pinterest.com/ # - EMAIL=you@example.com # - EMAIL_ALT=you@example.com # - SOUND_CLOUD=https://souncloud.com # - FIGMA=https://figma.com # - TELEGRAM=https://telegram.org/ # - TUMBLR=https://www.tumblr.com/ # - STEAM=https://steamcommunity.com/ # - VIMEO=https://vimeo.com/ # - WORDPRESS=https://wordpress.com/ # - GOODREADS=https://www.goodreads.com/ # - SKOOB=https://www.skoob.com.br/ - FOOTER=Thanks for stopping by! ports: - 8080:3000 restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre running docker onlyDocker commanddocker run -d \\ --name=littlelink-server \\ -p 8080:3000 \\ -e META_TITLE='Techno Tim' \\ -e META_DESCRIPTION='Techno Tim Link page' \\ -e META_AUTHOR='Techno Tim' \\ -e THEME='Dark' \\ -e FAVICON_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg' \\ -e AVATAR_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg' \\ -e AVATAR_2X_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_400x400.jpg' \\ -e AVATAR_ALT='Techno Tim Profile Pic' \\ -e NAME='TechnoTim' \\ -e BIO='Hey! Just a place where you can connect with me!' \\ -e GITHUB='https://l.technotim.live/github' \\ -e TWITTER='https://l.technotim.live/twitter' \\ -e INSTAGRAM='https://l.technotim.live/instagram' \\ -e YOUTUBE='https://l.technotim.live/subscribe' \\ -e TWITCH='https://l.technotim.live/twitch' \\ -e DISCORD='https://l.technotim.live/discord' \\ -e TIKTOK='https://l.technotim.live/tiktok' \\ -e KIT='https://l.technotim.live/gear' \\ --restart unless-stopped \\ ghcr.io/techno-tim/littlelink-server:latestIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables above into the form on the web page.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "All the Secrets to Creating My Tech YouTube Channel", "url": "/posts/how-i-create-my-content/", "categories": "vlog", "tags": "homelab, office, youtube, content-creation, adobe, hardware", "date": "2021-07-31 15:00:00 -0500", "snippet": "People have asked how I‚Äôve been able to create and grow a Tech YouTube channel and what my process is when planning, filming, editing, and producing content. Today we talk about just that. All my...", "content": "People have asked how I‚Äôve been able to create and grow a Tech YouTube channel and what my process is when planning, filming, editing, and producing content. Today we talk about just that. All my secrets unveiled as we celebrate 50,000 subscribers in this behind the scenes look. Thank you so much!üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearDon‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files." }, { "title": "Before you upgrade to Proxmox 7, please consider this...", "url": "/posts/proxmox-7/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2021-07-10 14:00:00 -0500", "snippet": "As you may know, proxmox is my current choice for a hypervisor. Proxmox 7 is here and comes with a host of new features! In this video we‚Äôre cover all of the new features in Proxmox 7 as well as h...", "content": "As you may know, proxmox is my current choice for a hypervisor. Proxmox 7 is here and comes with a host of new features! In this video we‚Äôre cover all of the new features in Proxmox 7 as well as how to upgrade your Proxmox server safely. We‚Äôll also cover all of the ‚Äúscary‚Äù prompts you get while upgrading as well as some of the ways to make sure your upgrade is successful. So, if you‚Äôre thinking about upgrading your HomeLab to Proxmox 7, be sure to check this video out first.üì∫ Watch VideoCommandsCheck your upgrade statuspve6to7 --fullFirst, make sure we have the latest packagesapt updateapt dist-upgradeUpdate all Debian repositories to Bullseyesed -i 's/buster\\/updates/bullseye-security/g;s/buster/bullseye/g' /etc/apt/sources.listWe‚Äôll also need to make sure we comment out any Proxmox ve 6.0 repositories.nano /etc/apt/sources.listnano /etc/apt/sources.list.d/pve-enterprise.listAdd Proxmox VE &amp; package Repoecho \"deb https://enterprise.proxmox.com/debian/pve bullseye pve-enterprise\" &gt; /etc/apt/sources.list.d/pve-enterprise.listIf you‚Äôre using the non-subscription repository (like me) also runsed -i -e 's/buster/bullseye/g' /etc/apt/sources.list.d/pve-install-repo.list If you‚Äôre running Ceph, you‚Äôll need to runecho \"deb http://download.proxmox.com/debian/ceph-octopus bullseye main\" &gt; /etc/apt/sources.list.d/ceph.listDo the upgradeapt updateapt dist-upgradenetwork changesIf you‚Äôre running LACP / LAGG I found that you need to make some additional changes to your network config. See the comments in the config/etc/network/interfacesauto loiface lo inet loopback#auto eno1 &lt;--- I had to comment this outiface eno1 inet manual#auto eno2 &lt;--- I had to comment this outiface eno2 inet manualauto bond0iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3auto vmbr0iface vmbr0 inet static address 192.168.0.11/24 gateway 192.168.0.1 bridge-ports bond0 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Linux desktop, inside of a container, inside of a browser??? Yes. A Webtop.", "url": "/posts/webtop-container/", "categories": "self-hosted", "tags": "homelab, traefik, portainer, docker, self-hosted, ubuntu, webtop", "date": "2021-06-20 09:00:00 -0500", "snippet": "Have you ever thought about running a Linux desktop inside of a container? Me neither until I found this awesome project from LinuxServer called Webtops. A webtop is a technology stack that allow...", "content": "Have you ever thought about running a Linux desktop inside of a container? Me neither until I found this awesome project from LinuxServer called Webtops. A webtop is a technology stack that allows you to run Ubuntu or Alpine Linux within a container that is fully accessible from a browser. This allows you to use most Linux features with a container with a fraction of the cost of resources. Join me as we configure one from beginning to end.üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeWebtopdocker-compose.yml and .env can be found hereFiles and foldersmkdir webtopcd webtopmkdir configcd ..nano docker-compose.ymlCreate Webtop containerdocker-compose up -dLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "2 Factor Auth and Single Sign on with Authelia", "url": "/posts/authelia-traefik/", "categories": "traefik", "tags": "authelia, homelab, traefik, portainer, ssl, docker, self-hosted", "date": "2021-06-05 09:00:00 -0500", "snippet": "Authelia is an open source Single Sign On and 2FA companion for reverse proxies. It helps you secure your endpoints with single factor and 2 factor auth. It works with Nginx, Traefik, and HA prox...", "content": "Authelia is an open source Single Sign On and 2FA companion for reverse proxies. It helps you secure your endpoints with single factor and 2 factor auth. It works with Nginx, Traefik, and HA proxy. Today, we‚Äôll configure Authelia with Portainer and Traefik and have 2 Factor up and running with brute force protection!üì∫ Watch VideoTraefikAuthelia will work with other reverse proxies but I used Traefik. If you want to configure Traefik as your reverse proxy see this guide.Docker SetupSee this post on how to install docker and docker-composeAutheliaconfiguration.yml, users_database.yml, and docker-compose.yml can be found hereExample heimdall can be found here hereTraefik configuration changes can be found hereGeneration a hashed password$ docker run authelia/authelia:latest authelia hash-password 'yourpassword'Password hash: $argon2id$v=19$m=65536$3oc26byQuSkQqksq$zM1QiTvVPrMfV6BVLs2t4gM+af5IN7euO0VB6+Q8ZFsFiles and foldersmkdir autheliacd autheliamkdir configcd confignano configuration.ymlnano users_database.ymlcd ..nano docker-compose.ymlCreate Authelia containerdocker-compose up -dLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Is adding 3 MILLION domains to your Pi-Hole Block List a good thing?", "url": "/posts/pi-hole-blocklists/", "categories": "homelab", "tags": "homelab, pi-hole, dns, self-hosted", "date": "2021-05-08 09:00:00 -0500", "snippet": "In some of my previous Pi-Hole videos many of you spotted my blocklist with over a millions sites added and you wondered how you can do the same. Well, today I show you how to block more ads, bloc...", "content": "In some of my previous Pi-Hole videos many of you spotted my blocklist with over a millions sites added and you wondered how you can do the same. Well, today I show you how to block more ads, block more tracking, block more malware, and block more telemetry with these community lists. Bonus (and spoiler alert) I show you how to add 3.5 million!Thanks to Firebog for the great lists firebog.netüì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Put Wildcard Certificates and SSL on EVERYTHING", "url": "/posts/traefik-portainer-ssl/", "categories": "traefik", "tags": "homelab, pi-hole, dns, traefik, portainer, ssl, self-hosted, docker", "date": "2021-04-24 09:00:00 -0500", "snippet": "Today, we‚Äôre going to use SSL for everything. No more self-sign certs. No more http. No more hosting things on odd ports. We‚Äôre going all in with SSL for our internal services and our external ...", "content": "Today, we‚Äôre going to use SSL for everything. No more self-sign certs. No more http. No more hosting things on odd ports. We‚Äôre going all in with SSL for our internal services and our external services too. We going to set up a reverse proxy using Traefik, Portainer, and use that to get wildcard certificates from Let‚Äôs Encrypt. Join me and let‚Äôs secure all the things.üì∫ Watch Video Looking to do this same thing in Kubernetes? Check out traefik + cert-manager on KubernetesDocker SetupSee this post on how to install docker and docker-composeTraefikmkdir traefikcd traefikmkdir datacd datatouch acme.jsonchmod 600 acme.jsontouch traefik.ymltraefik.yml can be found herecreate docker networkdocker network create proxytouch docker-compose.ymldocker-compose.yml can be found herecd datatouch config.ymldocker-compose up -dPortainermkdir portainercd portainertouch docker-compose.ymlmkdir datadocker-compose.yml can be found hereGenerate Basic Auth Passwordsudo apt updatesudo apt install apache2-utilsecho $(htpasswd -nb \"&lt;USER&gt;\" \"&lt;PASSWORD&gt;\") | sed -e s/\\\\$/\\\\$\\\\$/gNOTE: Replace &lt;USER&gt; with your username and &lt;PASSWORD&gt; with your password to be hashed. If you‚Äôre having an issue with your password, it might not be escaped properly and you can use the following command to prompt for your passwordecho $(htpasswd -nB USER) | sed -e s/\\\\$/\\\\$\\\\$/gPaste the output in your docker-compose.yml in line (traefik.http.middlewares.traefik-auth.basicauth.users=&lt;USER&gt;:&lt;HASHED-PASSWORD&gt;)Spin up the containerdocker-compose up -dTraefik Routes Configcd traefik/datanano config.ymlconfig.yml heredocker-compose up -d --force-recreateYour folder structure should look like the below, if you are following along with the example. But feel free to make it however you wish just keep in mind you‚Äôll need to change the location in the corresponding files../traefik‚îú‚îÄ‚îÄ data‚îÇ¬†¬† ‚îú‚îÄ‚îÄ acme.json‚îÇ¬†¬† ‚îú‚îÄ‚îÄ config.yml‚îÇ¬†¬† ‚îî‚îÄ‚îÄ traefik.yml‚îî‚îÄ‚îÄ docker-compose.ymlLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Using Pi-Hole for Local DNS - Fast, Simple, and Easy Guide", "url": "/posts/pi-hole-dns/", "categories": "homelab", "tags": "homelab, pi-hole, dns, self-hosted", "date": "2021-04-17 09:00:00 -0500", "snippet": "Pi-Hole is a wonderful ad blocking DNS sever for your network, but did you know you can also use it for a Local DNS server? In this fast, simple, and easy guide we‚Äôll walk through how to create DNS...", "content": "Pi-Hole is a wonderful ad blocking DNS sever for your network, but did you know you can also use it for a Local DNS server? In this fast, simple, and easy guide we‚Äôll walk through how to create DNS Entries (A Records) for the clients on your network and also set up Aliases (pointers to A Records) so that you can start using DNS at home instead of relying on IP addresses.üì∫ Watch Videocommandsnslookup juno.home.lan # lookup by host namehost 192.168.0.100 # reverse lookupLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Monitoring Your Kubernetes Cluster with Grafana, Prometheus, and Alertmanager", "url": "/posts/rancher-monitoring/", "categories": "kubernetes, rancher", "tags": "k3s, rancher, kubernetes, grafana, prometheus, homelab", "date": "2021-04-10 09:00:00 -0500", "snippet": "Today in this step by step guide, we‚Äôll set up Grafana, Prometheus, and Alertmanager to monitor your Kubernetes cluster. This can be set up really quickly using helm or the Rancher UI. We‚Äôll inst...", "content": "Today in this step by step guide, we‚Äôll set up Grafana, Prometheus, and Alertmanager to monitor your Kubernetes cluster. This can be set up really quickly using helm or the Rancher UI. We‚Äôll install and configure, set up some dashboards, and even set up some alerts using Slack. All this and more in this simple to follow, easy tutorial. Setting up Grafana and Prometheus has never been so easy.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Configuring Traefik 2 Ingress for Kubernetes", "url": "/posts/k3s-traefik-rancher/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, k3s, traefik", "date": "2021-04-08 09:00:00 -0500", "snippet": "This guide is for installing traefik 2 on k3s. If you‚Äôre not using rancher, that‚Äôs fine, just skip to Reconfiguring k3s Note: There is an updated tutorial on installing traefik + cert-manager on ...", "content": "This guide is for installing traefik 2 on k3s. If you‚Äôre not using rancher, that‚Äôs fine, just skip to Reconfiguring k3s Note: There is an updated tutorial on installing traefik + cert-manager on Kubernetes here. However, if you want to store your certificates on disk, this tutorial here is perfectly fine.It assumes you have followed: Fully Automated K3S etcd High Availability Install (or) HIGH AVAILABILITY k3s (Kubernetes) in minutes! (if you need rancher) High Availability Rancher on a Kubernetes ClusterThere is a little bit of ‚Äúundoing‚Äù we‚Äôll have to do since k3s ships with traefik and Rancher doesn‚Äôt play well with service load balancer. So, we‚Äôll pick up after instaling these two.Reconfigure RancherMake note of your version of RancherRemove Rancherhelm uninstall rancherInstall Rancher(replace with version above)helm install rancher rancher-stable/rancher \\ --namespace cattle-system \\ --set hostname=rancher.example.com \\ --version 2.5.6Reconfiguring k3sGet the version of k3s that‚Äôs currently runningk3s --versionexport INSTALL_K3S_VERSION=v1.20.5+k3s1Run the same command you ran initially to install k3s on your servers but add --disable traefik --disable servicelb and be sure to set your version.example (be sure you are using the right version)export INSTALL_K3S_VERSION=v1.20.5+k3s1curl -sfL https://get.k3s.io | sh -s - server --node-taint CriticalAddonsOnly=true:NoExecute --tls-san your.load.balancer.ip --write-kubeconfig-mode 644 --disable traefik --disable servicelbThis should reconfigure your servers. Just run it on all server nodes, not agent nodes.Install Metal LBMetal LB installationYou can follow Self-Hosting Your Homelab Services with SSL to get the idea of Metal LB. It‚Äôs recommended to: Install with helm Use Layer2 configuration if you follow this seriesExposing Rancher directly to your Metal LBIt‚Äôs a good idea to do this until traefik is configured otherwise you won‚Äôt have access to the Rancher UIkubectl expose deployment rancher -n cattle-system --type=LoadBalancer --name=rancher-lb --port=443Then, you can access Rancher UI after getting external-IPkubectl get service/rancher-lb -n cattle-systemInstall Traefik 2You can can choose between creating Ingress in Rancher or IngresRoute with traefikIf you choose IngressRoute see IngressRoute otherwise continue on. You must have a persistent volume set up already for acme.json certificate This uses cloudflare, check providers if you want to switch This will get wildcard certs This is pointed at staging, if you want production be sure comment staging the line (and delete your staging certs)We will be installing this into the kube-system namespace, which already exists. If you are going to use anther namespace you will need change it everywhere.(Optional) Make sure that persistent volume claim is availableThe dynamic configuration for Traefik is stored in a persistent volume. If you want to persist the certificate, it‚Äôs better to create one now to claim later.To create a persistent volume, it‚Äôs better to check out Cloud Native Distributed Storage in Kubernetes with Longhorn.If not, just create one from Rancher UI &gt; Clusters (Choose your cluster) &gt; Storage &gt; Persistent Volume &gt; Add volumeAdd traefik helm repo and updatehelm repo add traefik https://helm.traefik.io/traefikhelm repo updateEdit &amp; apply ConfigMap Create traefik-config.yaml with the contents of /config/traefik-config.yaml from /config This holds our cloudflare secrets along with a configmap Update this file with your values Re-check if you have a persistent volume ready to claim Apply the configkubectl apply -f traefik-config.yamlEdit &amp; install Traefik helm chart Create traefik-chart-values.yaml with the contents of /config/traefik-chart-values.yaml from /config Update loadBalancerIP in traefik-chart-values.yaml with your Metal LB IPBefore running this, be sure you only have one default storage class set.If you are using Rancher it is Cluster &gt; Storage &gt; Storage Classes. Make sure only one is default. Install Traefik with chart valueshelm install traefik traefik/traefik --namespace=kube-system --values=traefik-chart-values.yamlMore configuration value can be add from this default-value.yaml from Traefik github.If all went well, you should now have traefik 2 installed and configured.Check for container logsTo check if the Traefik instance is running correctly, see the logs:kubectl -n kube-system logs $(kubectl -n kube-system get pods --selector \"app.kubernetes.io/name=traefik\" --output=name)It should be level=info msg=\"Configuration loaded from flags.\"Traefik DashboardTo see all router to Traefik, we can install and expose Traefik Dashboard.First you will need htpassword to generate a password for your dashboard.sudo apt-get updatesudo apt-get install apache2-utilsYou can then generate one using this, be sure to swap your username and password.htpasswd -nb techno password | openssl base64It should output:dGVjaG5vOiRhcHIxJFRnVVJ0N2E1JFpoTFFGeDRLMk8uYVNaVWNueG41eTAKCg==Save this in a secure place, it will be the password you use to access the traefik dashboard.Copy traefik-dashboard-secret.yaml locally and update it with your credentials.Copy traefik-dashboard-ingressroute.yaml and update it with your hostname, then apply:kubectl apply -f traefik-dashboard-secret.yamlkubectl apply -f traefik-dashboard-ingressroute.yamlThis should create: A secret in Kubernetes cluster name traefik-dashboard-auth A middleware for Traefik name traefik-dashboard-basicauth An ingress route for Traefik name dashboardCheck out the Traefik Dashboard with the URL you specify earlier.Exposing a service with traefik and Rancher IngressIn Rancher go to Load Balancing create ingress choose a host name (service.example.com) choose a target (your workload) set the port to the exposed port within the container go to labels and annotations and add kubernetes.io/ingress.class = traefik-external note, traefik-external comes from --providers.kubernetesingress.ingressclass=traefik-external in traefik-chart-values.yml. If you used something else, you will need to set your label properly. when you visit your website (https://service.example.com) you should now see a certificate issues. If it‚Äôs a staging cert, see the note about switching to production in traefik-chart-values.yaml. After changing, you will need to delete your certs in storage and reapply that filekubectl delete -n kube-system persistentvolumeclaims acme-json-certskubectl apply -f traefik-config.yamlExposing a service with traefik IngressRoutecopy the contents of config-ingress-route/kubernetes to your local machinethen runkubectl apply -f kubernetesThis will create the deployment, service, and ingress.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Everything you need to know about the NEW Rancher UI", "url": "/posts/rancher-new-ui/", "categories": "kubernetes, rancher", "tags": "k3s, rancher, kubernetes, homelab", "date": "2021-04-03 09:00:00 -0500", "snippet": "Today we‚Äôre going to talk about the new Cluster Explorer in Rancher. The Cluster Explorer is the new fancy user interface that will replace the old Cluster Manager. The new UI contains lots of ne...", "content": "Today we‚Äôre going to talk about the new Cluster Explorer in Rancher. The Cluster Explorer is the new fancy user interface that will replace the old Cluster Manager. The new UI contains lots of new areas to explore, from new dashboards to new workload and deployment views, to service discovery, to storage to RBAC, and more. If you‚Äôve been hesitant to use the new UI, no need to worry, we all have. But hopefully after this you‚Äôll switch over like I have done too!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Multi-CPU Architecture Kubernetes Cluster with a Raspberry Pi", "url": "/posts/multi-arch-k3s-rpi/", "categories": "kubernetes, k3s", "tags": "raspberry-pi, k3s, kubernetes, homelab, hardware", "date": "2021-03-14 09:00:00 -0500", "snippet": "Building a Multi-architecture CPU Kubernetes cluster is easier than you think with k3s. In this video we‚Äôll build a Raspberry Pi 4 with an ARM CPU and add it to our existing x86 x64 amd64 CPU Kube...", "content": "Building a Multi-architecture CPU Kubernetes cluster is easier than you think with k3s. In this video we‚Äôll build a Raspberry Pi 4 with an ARM CPU and add it to our existing x86 x64 amd64 CPU Kubernetes cluster. Our foundation will be Ubuntu for ARM, then we‚Äôll add k3s, and then join it to our cluster. We‚Äôll also discuss how this works with Docker images built for specific CPU types. We‚Äôll also talk about some build configurations and requirements for your Pi.Happy Pi Day!üì∫ Watch Videok3s --versionget k3s token from a serversudo cat /var/lib/rancher/k3s/server/node-tokenset k3s version (the value you got from k3s --version) export INSTALL_K3S_VERSION=v1.20.5+k3s1install k3s as an agent using your token from abovecurl -sfL https://get.k3s.io | K3S_URL=https://example.local.com:6443 K3S_TOKEN=hksadhahdklahkadjhasjdhasdhasjk::server:asljkdklasjdaskdljaskjdlasj sh -check all k3s nodes from your workstationkubectl get nodesget all pods running on a specific node (elio)kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName=elioset a label on a node (elio)kubectl label nodes elio cputype=armdescribe a node (elio)kubectl describe node elioExample pod specnginx-pod.ymlapiVersion: v1kind: Podmetadata: name: nginxspec: containers: - name: nginx image: nginx imagePullPolicy: IfNotPresent nodeSelector: cputype: arm64Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Rancher vs. Portainer - Which one should I choose?", "url": "/posts/rancher-vs-portainer/", "categories": "homelab", "tags": "homelab, rancher, portainer", "date": "2021-03-08 08:00:00 -0600", "snippet": "Rancher vs. Portainer, which one is better‚Äù Which one should I choose? Can Portainer manager Kubernetes? Can Rancher manage Kubernetes? We answer all these questions and more in this quick, no f...", "content": "Rancher vs. Portainer, which one is better‚Äù Which one should I choose? Can Portainer manager Kubernetes? Can Rancher manage Kubernetes? We answer all these questions and more in this quick, no fluff video. Side note, this is one of the most asked questions in my live streams.Please share this with anyone who asks what a Home Lab is.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Windows Terminal and WSL Config Fast, Simple, and Easy Guide", "url": "/posts/windows-terminal-wsl/", "categories": "homelab", "tags": "homelab, wsl, terminal, zsh, windows, linux", "date": "2021-02-23 08:00:00 -0600", "snippet": "Lots of people ask which terminal I use on Windows and how I configure it. It‚Äôs pretty simple, I use the Microsoft Windows Terminal and it‚Äôs a fantastic terminal on Windows. It is free and open s...", "content": "Lots of people ask which terminal I use on Windows and how I configure it. It‚Äôs pretty simple, I use the Microsoft Windows Terminal and it‚Äôs a fantastic terminal on Windows. It is free and open source. With Windows Terminal, you can install and configure different environments for Windows and Linux. You can choose between Ubuntu or any other WSL 1 or WSL 2 (Windows Subsystem for Linux) environment along with the typical PowerShell and cmd. In this fast, simple, and easy tutorial we‚Äôll set up the Windows Terminal, install WSL, then install Ubuntu, and configure Ubuntu with ZSH (zshell) and oh my zsh (0h-my-zsh). Then, you‚Äôll know exactly how I configure my Terminal on Windows. Bonus Now all your copy pasta commands will work on Windows, macOS, and Linux!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Update Portainer Fast, Simple, and Easy Guide", "url": "/posts/portainer-update/", "categories": "portainer", "tags": "portainer, kubernetes, homelab, docker", "date": "2021-02-19 08:00:00 -0600", "snippet": "Updating Portainer is easy, if you know how. In this quick no fluff video, I will show you how to update any version of Portainer. This guide can be used for installing it too. Portainer is a co...", "content": "Updating Portainer is easy, if you know how. In this quick no fluff video, I will show you how to update any version of Portainer. This guide can be used for installing it too. Portainer is a container management system for Docker, Kubernetes, Swarm, and Azure ACI. Portainer is free and open source.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Containerizing HandBrake with Docker and Kubernetes", "url": "/posts/handbrake-docker-k8s/", "categories": "self-hosted", "tags": "rancher, kubernetes, handbrake, docker, homelab, self-hosted", "date": "2021-02-16 08:00:00 -0600", "snippet": "Handbrake is a fantastic open source transcoder. It allows you to transcode, or convert, your video files into different formats. It has a nice UI that‚Äôs easy to use and helps you transcode videos...", "content": "Handbrake is a fantastic open source transcoder. It allows you to transcode, or convert, your video files into different formats. It has a nice UI that‚Äôs easy to use and helps you transcode videos very easily. It supports profiles that are optimized for your target devices. And because this is open source and cross compiled, you can run this on Windows, macOS, or Linux‚Ä¶ but did you also know you can self host a containerized version of this with Docker and Kubernetes?üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Create a Multiboot USB with Ventoy Fast, Simple, and Easy Guide", "url": "/posts/ventoy-tutorial/", "categories": "homelab", "tags": "windows, linux, homelab, ubuntu, ventoy, hardware", "date": "2021-02-12 08:00:00 -0600", "snippet": "In this quick no fluff video, I will show you how to create a multi-bootable USB drive with Ventoy that can boot all of your ISO, WIM, IMG, VHD, and EFI files. It supports both MBR and GPT partiti...", "content": "In this quick no fluff video, I will show you how to create a multi-bootable USB drive with Ventoy that can boot all of your ISO, WIM, IMG, VHD, and EFI files. It supports both MBR and GPT partitions. This is the last USB drive you will ever need and you won‚Äôt ever need to format another one. Ventoy is free and open source.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The Best Way to Dual Boot Windows and Ubuntu", "url": "/posts/dual-boot-windows-ubuntu/", "categories": "homelab", "tags": "windows, linux, homelab, ubuntu", "date": "2021-02-08 08:00:00 -0600", "snippet": "Dual booting Windows and Ubuntu Linux can be a pain however there are many benefits do doing this if you do it right. In this tutorial we‚Äôll discuss how to dual boot Windows and Ubuntu on your PC ...", "content": "Dual booting Windows and Ubuntu Linux can be a pain however there are many benefits do doing this if you do it right. In this tutorial we‚Äôll discuss how to dual boot Windows and Ubuntu on your PC or laptop in a few simple steps so that you can take advantage of all the hardware in your ‚Äúbest‚Äù machine with full access to your GPU.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I ran MY LIFE through a DEEP LEARNING algorithm and here's what came out...", "url": "/posts/deep-learning-my-life/", "categories": "homelab", "tags": "windows, linux, homelab, machine-learning, deep-learning, ai, nvidia, hardware, life", "date": "2021-02-01 08:00:00 -0600", "snippet": "My life, ran against a neural network and detected by Deep Learning. If you‚Äôd like to see how this video was generated using ML and Deep Learning, check out the video here:How this video was gener...", "content": "My life, ran against a neural network and detected by Deep Learning. If you‚Äôd like to see how this video was generated using ML and Deep Learning, check out the video here:How this video was generatedüì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "RTX 3090 for Machine Learning?", "url": "/posts/3090-machine-learning/", "categories": "homelab", "tags": "windows, linux, homelab, machine-learning, deep-learning, ai, nvidia, hardware", "date": "2021-01-30 08:00:00 -0600", "snippet": "The NVIDIA RTX 3090 is a beast. We all know it can beat the benchmarks in gaming, but how about machine learning and neural networks? Today we walk through the RTX 3090 and then compile and run D...", "content": "The NVIDIA RTX 3090 is a beast. We all know it can beat the benchmarks in gaming, but how about machine learning and neural networks? Today we walk through the RTX 3090 and then compile and run Darknet, an open source neural network, on Windows and then Ubuntu Linux and run object detection on pictures, images, and real-time video. You will be amazed at how much more you can get out of your video card than just gaming!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HUGE Home Security Upgrade", "url": "/posts/home-security-upgrade/", "categories": "homelab", "tags": "homelab, unifi, protect, home-security, hardware", "date": "2021-01-16 08:00:00 -0600", "snippet": "I am a huge fan of self hosted home security and I‚Äôve been doing it for years. I love the idea of being able to check on my home when I am away. Also, I‚Äôve always kept my video footage on premise ...", "content": "I am a huge fan of self hosted home security and I‚Äôve been doing it for years. I love the idea of being able to check on my home when I am away. Also, I‚Äôve always kept my video footage on premise (on prem) and never sent it to the cloud. It started way back with a laptop and a webcam and it evolved into self-hosting my own DVR software on a virtual machine with many PoE and wireless cameras‚Ä¶ but this became way too much to manage. Well, this is the next evolution of my home security, integrating it into my recently upgraded UniFi network. I wanted to simplify my home security, just like my network, so I decided to pick up some UniFi Protect G3 FLEX cameras and some new UniFi Protect G3 Instant cameras to help secure my home. I also picked up the UniFi Smart Power Plug that will monitor my internet connection and reboot my modem if I lose connection. This is going to be awesome! I hope you enjoy this complete guide to setting up your new UniFi Protect system! Note, everything here was purchased with my own money. 0 outside influence by brands.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-host your own internet speed test with LibreSpeed!", "url": "/posts/librespeed/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, librespeed, self-hosted", "date": "2021-01-09 08:00:00 -0600", "snippet": "Internet speed tests are full of junk, ads, tracking, and some even contain deprecated plug-ins. Who needs this when we can self-host an open source one? LibreSpeed is a lightweight speedtest imp...", "content": "Internet speed tests are full of junk, ads, tracking, and some even contain deprecated plug-ins. Who needs this when we can self-host an open source one? LibreSpeed is a lightweight speedtest implemented in JavaScript using XHR requests and web workers. It‚Äôs fast, feature rich, and supports every modern browser. Say goodbye to those other speed tests and host your own containerized in Docker or Kubernetes today!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Cloud Native Distributed Storage in Kubernetes with Longhorn", "url": "/posts/longhorn-install/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, longhorn, k3s", "date": "2021-01-02 08:00:00 -0600", "snippet": "Storage in Kubernetes is hard, complicated, and messy. Configuring volumes, mounts, and persistent volumes claims and getting it right can be a challenge. It‚Äôs also challenging to manage that sto...", "content": "Storage in Kubernetes is hard, complicated, and messy. Configuring volumes, mounts, and persistent volumes claims and getting it right can be a challenge. It‚Äôs also challenging to manage that storage and replicate it across all your Kubernetes clusters. It‚Äôs also been very challenging to do this on bare metal, outside of a cloud provider. That‚Äôs where Longhorn comes. Longhorn is an open source, a CNCF distributed block storage system for Kubernetes. It comes with a UI, backups, snapshots, cluster disaster recovery, and it does all this with or without Rancher. Rancher is NOT a requirement.üì∫ Watch VideoInstallationAdditional DependenciesThere are some additional dependencies you might want to install on target nodes prior to configuringsudo apt updatesudo apt install nfs-common open-iscsi#start the service now and on rebootsudo systemctl enable open-iscsi --nowInstall MethodsRancher app catalogSee the app catalog within RancherKubectlkubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/master/deploy/longhorn.yamlkubectl get pods \\--namespace longhorn-system \\--watchSee more at https://longhorn.io/docs/1.0.0/deploy/install/install-with-kubectlHelmhelm3kubectl create namespace longhorn-systemhelm install longhorn ./longhorn/chart/ --namespace longhorn-systemkubectl -n longhorn-system get podTaints This is not required, nor do I taint nodes anymore. I allow Longhorn storage to use any available space on any node that is not running etcd / control plane. You can simply skip this step and it will work like this. If you‚Äôre still convinced you need dedicated nodes, it‚Äôs much easier doing it in the Longhorn UI after a node joins the cluster than with taints.I ended up tainting my storage nodes using this commandkubectl taint nodes luna-01 luna-02 luna-03 luna-04 CriticalAddonsOnly=true:NoExecutekubectl taint nodes luna-01 luna-02 luna-03 luna-04 StorageOnly=true:NoExecuteThen applying that toleration to Longhorn in settingsStorageOnly=true:NoExecute;CriticalAddonsOnly=true:NoExecuteThis ensures that the storage nodes won‚Äôt take on any general workloads and still allow Lonhorn to use these as storage.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Automate EVERYTHING with Ansible!", "url": "/posts/ansible-automation/", "categories": "homelab", "tags": "homelab, ansible", "date": "2020-12-26 08:00:00 -0600", "snippet": "Ansible. Need I say more? Well, maybe, if you‚Äôve never heard of it. Ansible is a simple IT / DevOps automation that anyone can use. You can Automate anything with an SSH connection and WITHOUT i...", "content": "Ansible. Need I say more? Well, maybe, if you‚Äôve never heard of it. Ansible is a simple IT / DevOps automation that anyone can use. You can Automate anything with an SSH connection and WITHOUT installing any agents or clients. Join me as we set up, configure and start automating with Ansible!üì∫ Watch Videoinstallsudo apt updatesudo apt install ansiblesudo apt install sshpass Note: Most distributions include an ‚Äúolder‚Äù version of Ansible. If you want to install the latest version of Ansible, see installing the latest version of ansiblehosts[ubuntu]server-01server-02192.168.0.100192.168.0.1002commandscheck ansible versionansible --versioncommand with moduleansible -i ./inventory/hosts ubuntu -m ping --user someuser --ask-passcommand with playbookansible-playbook ./playbooks/apt.yml --user someuser --ask-pass --ask-become-pass -i ./inventory/hostsplaybooksapt.yml- hosts: \"*\" become: yes tasks: - name: apt apt: update_cache: yes upgrade: 'yes'qemu-guest-agent.yml- name: install latest qemu-guest-agent hosts: \"*\" tasks: - name: install qemu-guest-agent apt: name: qemu-guest-agent state: present update_cache: true become: truezsh.yml- name: install latest zsh on all hosts hosts: \"*\" tasks: - name: install zsh apt: name: zsh state: present update_cache: true become: truetimezone.yml- name: Set timezone and configure timesyncd hosts: \"*\" become: yes tasks: - name: set timezone shell: timedatectl set-timezone America/Chicago - name: Make sure timesyncd is stopped systemd: name: systemd-timesyncd.service state: stopped - name: Copy over the timesyncd config template: src=../templates/timesyncd.conf dest=/etc/systemd/timesyncd.conf - name: Make sure timesyncd is started systemd: name: systemd-timesyncd.service state: startedtimesyncd.conf# This file is part of systemd.## systemd is free software; you can redistribute it and/or modify it# under the terms of the GNU Lesser General Public License as published by# the Free Software Foundation; either version 2.1 of the License, or# (at your option) any later version.## Entries in this file show the compile time defaults.# You can change settings by editing this file.# Defaults can be restored by simply deleting this file.## See timesyncd.conf(5) for details.[Time]NTP=192.168.0.4FallbackNTP=time.cloudflare.com#RootDistanceMaxSec=5#PollIntervalMinSec=32#PollIntervalMaxSec=2048Installing the latest version of AnsibleMost distributions have an older version of Ansible installed. This is usually fine except sometimes you may need to use features from the latest Ansible. Use the following commands to update Ansible to the latest version.Check versionansible --versionIf it‚Äôs not the version you are looking for, check to see where it is installedwhich ansibleIf it lives somewhere like/usr/bin/ansiblethis is most likely due to your distribution installing it there.Remove previous versionsudo apt remove ansibleCheck to be sure it is removedwhich ansibleYou should seeansible not foundcheck to see that you have python3 and pippython3 -m pip -VYou should see something likepip 22.3.1 from /home/user/.local/lib/python3.8/site-packages/pip (python 3.8)Install pip if the previous couldn‚Äôt find the pip modulecurl https://bootstrap.pypa.io/get-pip.py -o get-pip.pyInstall ansiblepython3 -m pip install --user ansibleConfirm your version withansible --versionLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "HIGH AVAILABILITY k3s (Kubernetes) in minutes!", "url": "/posts/k3s-ha-install/", "categories": "kubernetes, k3s", "tags": "homelab, rancher, kubernetes, k3s, mysql, nginx", "date": "2020-12-19 08:00:00 -0600", "snippet": "Are you running Kubernetes in your homelab or in the enterprise? Do you want an easy way to manage and create Kubernetes clusters? Do you want high availability Rancher? Join me as we walk through...", "content": "Are you running Kubernetes in your homelab or in the enterprise? Do you want an easy way to manage and create Kubernetes clusters? Do you want high availability Rancher? Join me as we walk through stalling Rancher on an existing high availability k3s cluster in this step-by-step tutorial. We install Rancher, configure a load balancer, install and configure helm, install cert-manager, configure Rancher, walk through the GUI, scale up our cluster, and set up a health check and liveness check! Join me, it‚Äôs easy in this straightforward guide.üì∫ Watch VideoLoad BalancerCreate a load balancer using nginxnginx.conf#uncomment this next line if you are NOT running nginx in docker#load_module /usr/lib/nginx/modules/ngx_stream_module.so;events {}stream { upstream k3s_servers { server 192.168.60.20:6443; server 192.168.60.21:6443; } server { listen 6443; proxy_pass k3s_servers; }}k3s serversOn your k3s serversexport K3S_DATASTORE_ENDPOINT='mysql://username:password@tcp(database_ip_or_hostname:port)/database'Note: It‚Äôs advised you consult the Rancher Support Matrixto get the recommended version for all Rancher dependencies.thencurl -sfL https://get.k3s.io | sh -s - server --node-taint CriticalAddonsOnly=true:NoExecute --tls-san load_balancer_ip_or_hostnametest withsudo k3s kubectl get nodesto add additional servers, get token from first serversudo cat /var/lib/rancher/k3s/server/node-tokenthen run the same command but add the token (replace SECRET with token from previous command)curl -sfL https://get.k3s.io | sh -s - server --token=SECRET --node-taint CriticalAddonsOnly=true:NoExecute --tls-san load_balancer_ip_or_hostnameon agents / workersto run without sudosudo chmod 644 /etc/rancher/k3s/k3s.yaml` on the serversget tokensudo cat /var/lib/rancher/k3s/server/node-tokenk3s agents / workerscurl -sfL https://get.k3s.io | K3S_URL=https://load_balancer_ip_or_hostname:6443 K3S_TOKEN=mynodetoken sh -otherTo install kubectl see this linkkubeconfig location on server/etc/rancher/k3s/k3s.yamlsudo cat /etc/rancher/k3s/k3s.yamlcopy contents to your dev machine~/.kube/configBe sure to update the server: to your load balancer ip or hostnamekubernetes dashboardcheck releases for the command to use. At time or filming it‚Äôs:kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.4/aio/deploy/recommended.yamlDashboard RBAC Configurationdashboard.admin-user.ymlapiVersion: v1kind: ServiceAccountmetadata: name: admin-user namespace: kubernetes-dashboarddashboard.admin-user-role.ymlapiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: admin-userroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-adminsubjects:- kind: ServiceAccount name: admin-user namespace: kubernetes-dashboardDeploy the admin-user configuration:(if you‚Äôre doing this from your dev machine, remove sudo k3s and just use kubectl)sudo k3s kubectl create -f dashboard.admin-user.yml -f dashboard.admin-user-role.ymlget bearer tokensudo k3s kubectl -n kubernetes-dashboard create token admin-userstart dashboard locallysudo k3s kubectl proxyThen you can sign in at this URL using your token we got in the previous step:http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/here‚Äôs testdeploy.yml you can useapiVersion: apps/v1kind: Deploymentmetadata: name: mysite labels: app: mysitespec: replicas: 1 selector: matchLabels: app: mysite template: metadata: labels: app : mysite spec: containers: - name : mysite image: nginx ports: - containerPort: 80Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "High Availability Rancher on Kubernetes", "url": "/posts/rancher-ha-install/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, k3s", "date": "2020-12-19 08:00:00 -0600", "snippet": "Are you running Kubernetes in your homelab or in the enterprise?Do you want an easy way to manage and create Kubernetes clusters?Join me as we walk through installing Rancher on an existing high av...", "content": "Are you running Kubernetes in your homelab or in the enterprise?Do you want an easy way to manage and create Kubernetes clusters?Join me as we walk through installing Rancher on an existing high availability k3s cluster in this step-by-step tutorial.We install Rancher, configure a load balancer, install and configure helm, install cert-manager, configure Rancher, walk through the GUI, scale up our cluster, and set up a health check and liveness check! Join me, it‚Äôs easy in this straightforward guide.üì∫ Watch VideoinstallNote:It‚Äôs advised you consult the Rancher Support Matrixto get the recommended version for all Rancher dependencies.https://rancher.com/docs/rancher/v2.x/en/installation/install-rancher-on-k8s/#1-install-the-required-cli-toolskubectlinstall helmcurl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bashadd helm repo, stablehelm repo add rancher-stable https://releases.rancher.com/server-charts/stablecreate rancher namespacekubectl create namespace cattle-systemssl configurationuser rancher generated (default)install cert-managerkubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.7.1/cert-manager.crds.yamlcreate name-space for cert-managerkubectl create namespace cert-managerAdd the Jetstack Helm repository helm repo add jetstack https://charts.jetstack.ioupdate helm repohelm repo updateinstall cert-manager helm chart*Note: If you receive an ‚ÄúError: Kubernetes cluster unreachable‚Äù message when installing cert-manager, try copyingthe contents of ‚Äú/etc/rancher/k3s/k3s.yaml‚Äù to ‚Äú~/.kube/config‚Äù to resolve the issue.*helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --version v1.7.1check rollout of cert-managerkubectl get pods --namespace cert-managerBe sure each pod is fully running before proceedingInstall Rancher with Helm Note: If you have ‚Äú.local‚Äù for your private TLD then Rancher will NOT finish the setup within the webUIhelm install rancher rancher-stable/rancher \\ --namespace cattle-system \\ --set hostname=rancher.example.comcheck rolloutkubectl -n cattle-system rollout status deploy/rancheryou should seeWaiting for deployment \"rancher\" rollout to finish: 0 of 3 updated replicas are available...Waiting for deployment \"rancher\" rollout to finish: 1 of 3 updated replicas are available...Waiting for deployment \"rancher\" rollout to finish: 2 of 3 updated replicas are available...deployment \"rancher\" successfully rolled outcheck statuskubectl -n cattle-system rollout status deploy/rancheryou should seedeployment \"rancher\" successfully rolled outload balancerIf you are using k3s you can use the traefik ingress controller that ships with k3srunkubectl get svc --all-namespaces -o widelook forkube-system traefik LoadBalancer 10.43.202.72 192.168.100.10 80:32003/TCP,443:32532/TCP 5d23h app=traefik,release=traefikthen create a DNS entry for rancher.example.com 192.168.100.10This can be a host entry on your machine, or a DNS entry in your local DNS system (router, pi hole, etc‚Ä¶)otherwise you can use nginxnginx lbhttps://rancher.com/docs/rancher/v2.x/en/installation/resources/k8s-tutorials/infrastructure-tutorials/nginx/other considerationsSeparating Rancher Cluster from your User Clusterhttps://rancher.com/docs/rancher/v2.x/en/overview/architecture-recommendations/#separation-of-rancher-and-user-clustersLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "High Availability Pi-Hole? Yes please!", "url": "/posts/ha-pi-hold-gravity-sync/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, pi-hole, gravity-sync, keepalived", "date": "2020-12-12 08:00:00 -0600", "snippet": "Dear Pi-Hole,We love your product. It keeps our network safe from malware and other unwanted domains. While we love what is there so far, please add a feature to your core product to keep multipl...", "content": "Dear Pi-Hole,We love your product. It keeps our network safe from malware and other unwanted domains. While we love what is there so far, please add a feature to your core product to keep multiple servers in sync and provide high availability DNS to our whole entire network. Then, we won‚Äôt have people asking us ‚ÄúIs the internet down?‚Äù every time we reboot our Pi-Hole server.Until then, we will use Gravity Sync.Sincerely,Techno Tim (and probably thousands of other lovers of Pi-Hole).P.S. Keep up the good work!Thank you Gravity Sync!(don‚Äôt forget to star the repo!)https://github.com/vmstan/gravity-syncüì∫ Watch VideoGreat Raspberry Pi - Pi-Hole Servers!‚ñ∫ Raspberry Pi Zero W Kit - https://amzn.to/3qOl9yS‚ñ∫ Raspberry Pi 4 Kit - https://amzn.to/3nophDmIf you‚Äôre looking to have your PiHole instances failover automatically, be sure to check out the documentation on keepalivedMeet keepalived - High Availability and Load Balancing in OneLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Before I do anything on Proxmox, I do this first...", "url": "/posts/first-11-things-proxmox/", "categories": "proxmox", "tags": "homelab, proxmox, homelab", "date": "2020-11-28 08:00:00 -0600", "snippet": "After setting up my Proxmox servers, there are a few things I do before I use them for their intended purpose. This ranges from updates, to storage, to networking and VLANS, to uploading ISOs, to ...", "content": "After setting up my Proxmox servers, there are a few things I do before I use them for their intended purpose. This ranges from updates, to storage, to networking and VLANS, to uploading ISOs, to clustering, and more. Join me as we pick up where the rest of the proxmox tutorials stop, and that‚Äôs everything you need to do to make these production ready (and maybe a bonus item too).üì∫ Watch VideoUpdatesEdit /etc/apt/sources.listProxmox Version 6.Xdeb http://ftp.us.debian.org/debian buster main contribdeb http://ftp.us.debian.org/debian buster-updates main contrib# security updatesdeb http://security.debian.org buster/updates main contrib# not for production usedeb http://download.proxmox.com/debian buster pve-no-subscriptionProxmox Version 7.X(for a full guide on Proxmox 7, please see this link)deb http://ftp.debian.org/debian bullseye main contribdeb http://ftp.debian.org/debian bullseye-updates main contrib# security updatesdeb http://security.debian.org/debian-security bullseye-security main contrib# PVE pve-no-subscription repository provided by proxmox.com,# NOT recommended for production usedeb http://download.proxmox.com/debian/pve bullseye pve-no-subscriptionEdit /etc/apt/sources.list.d/pve-enterprise.list# deb https://enterprise.proxmox.com/debian/pve buster pve-enterpriseRunapt-get updateapt dist-upgraderebootStorageBE CAREFUL. This will wipe your disks.fdisk /dev/sdaThen P for partition, then D for delete, then W for write.Check SMART Monitoringsmartctl -a /dev/sdaIOMMU (PCI Passthrough)See Proxmox PCI Passthroughnano /etc/kernel/cmdlineadd intel_iommu=on iommu=pt to the end of this line without line breaksroot=ZFS=rpool/ROOT/pve-1 boot=zfs intel_iommu=on iommu=ptEdit /etc/modulesvfiovfio_iommu_type1vfio_pcivfio_virqfdrunupdate-initramfs -u -k allthen rebootrebootVLAN AwareIf you want to restrict your VLANSnano /etc/network/interfacesSet your VLAN herebridge-vlan-aware yesbridge-vids 20NIC Team Examplenano /etc/network/interfacesauto eno1iface eno1 inet manualauto eno2iface eno2 inet manualauto bond0iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3auto vmbr0iface vmbr0 inet static address 192.168.0.11/24 gateway 192.168.0.1 bridge-ports bond0 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094#lacp nic teamIf you‚Äôre running Proxmox 7, see the modified config here for LAGG / LACPCloningThese are the commands I run after cloning a Linux machine so that it resets all information for the machine it was cloned from.(Note: If you use cloud-init-aware OS images as described under Cloud-Init Support on https://pve.proxmox.com/pve-docs/chapter-qm.html, these steps won‚Äôt be necessary!)change hostnamesudo nano /etc/hostname find your hostname and change itchange hosts file find your hostname and change itsudo nano /etc/hostsreset machine IDrm -f /etc/machine-id /var/lib/dbus/machine-iddbus-uuidgen --ensure=/etc/machine-iddbus-uuidgen --ensureregenerate ssh keysregen ssh keyssudo rm /etc/ssh/ssh_host_*sudo dpkg-reconfigure openssh-serverrebootLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HUGE (but small) 1U Server Upgrade", "url": "/posts/1u-server-upgrade/", "categories": "homelab", "tags": "homelab, hardware", "date": "2020-11-21 08:00:00 -0600", "snippet": "I‚Äôve been making great use of some older, bigger servers but I decided to try and build, upgrade, and migrate to some 1U servers. Join me as we unbox and build my 2 new virtualization servers!üì∫ Wa...", "content": "I‚Äôve been making great use of some older, bigger servers but I decided to try and build, upgrade, and migrate to some 1U servers. Join me as we unbox and build my 2 new virtualization servers!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet WireGuard, the new hotness in VPN...", "url": "/posts/wiregaurd-setup/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, wireguard, self-hosted, vpn, portainer", "date": "2020-11-14 08:00:00 -0600", "snippet": "Self hosting a VPN has traditionally been hard to set up and we‚Äôve had very few options. That is until WireGuard came about. WireGuard is an extremely simple yet fast and modern VPN that utilizes ...", "content": "Self hosting a VPN has traditionally been hard to set up and we‚Äôve had very few options. That is until WireGuard came about. WireGuard is an extremely simple yet fast and modern VPN that utilizes state-of-the-art cryptography. It also supports running inside of a Docker container and that‚Äôs exactly what we‚Äôll be using in this tutorial!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I think I found a Dropbox replacement with Nextcloud...", "url": "/posts/nextcloud-setup/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, self-hosted, nextcloud, portainer", "date": "2020-11-07 08:00:00 -0600", "snippet": "Are you thinking about ditching Google apps or looking for a Dropbox replacement? Are you ready to self host your own productivity platform? Well, Nextcloud may be for you! In today‚Äôs tutorial w...", "content": "Are you thinking about ditching Google apps or looking for a Dropbox replacement? Are you ready to self host your own productivity platform? Well, Nextcloud may be for you! In today‚Äôs tutorial we‚Äôll walk though setting up Nextcloud with Docker and Kubernetes. We‚Äôll also walk through some of the new features, installing apps from the app store, exposing this Nextcloud publicly, as well as setting up 2FA (2 factor authentication) with TOTP clients like Google Authenticator and Authy.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Before I do anything on Linux, I do these first...", "url": "/posts/fist-13-things-linux/", "categories": "homelab", "tags": "homelab, linux, ubuntu", "date": "2020-10-31 09:00:00 -0500", "snippet": "After setting up my Linux servers, there are a few things I do before I use them for their intended purpose. This ranges from security, to tools, to config. Join me as we set up our first Linux s...", "content": "After setting up my Linux servers, there are a few things I do before I use them for their intended purpose. This ranges from security, to tools, to config. Join me as we set up our first Linux server in this tutorial and walk through setting it up proper (and maybe some bonus items sprinkled in).üì∫ Watch VideoUpdatesudo apt-get updatesudo apt-get upgradeReconfigure unattended-upgradessudo dpkg-reconfigure --priority=low unattended-upgradesVerify unattended upgrades configuration file in your text editor of choice/etc/apt/apt.conf.d/20auto-upgradesTo disable automatic reboots by the automatic upgrades configuration edit the following file:/etc/apt/apt.conf.d/50unattended-upgradesand uncomment the following line by removing the leading slashes://Unattended-Upgrade::Automatic-Reboot \"false\";Accountadd usersudo adduser someuseradd to sudoerssudo usermod -aG sudo someuserSSH Serverinstallsudo apt-get install openssh-servercopy key from client to serverssh-copy-id someuser@192.168.0.100switch to key based authsudo nano /etc/ssh/sshd_configAdd these attributesPasswordAuthentication noChallengeResponseAuthentication noNetworkingstatic IPsudo nano /etc/netplan/01-netcfg.yamlnetwork: version: 2 renderer: networkd ethernets: ens18: dhcp4: no addresses: - 192.168.0.222/24 gateway4: 192.168.0.1 nameservers: addresses: [192.168.0.4]Install oh-my-zshsudo apt-get updatesudo apt-get install zshsudo apt-get install powerline fonts-powerlinesh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"Fix LVMsudo lvmlvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lvexitsudo resize2fs /dev/ubuntu-vg/ubuntu-lvhostnamesudo hostnamectl set-hostnamesudo nano /etc/hostsTime ZoneCheck time zone:timedatectlChange time zone:sudo timedatectl set-timezoneYou can also use if you want a menu.sudo dpkg-reconfigure tzdata NTP Timesudo nano /etc/systemd/timesyncd.confNTP=192.168.0.4sudo timedatectl set-ntp offsudo timedatectl set-ntp oninstall kvm agentsudo apt-get install qemu-guest-agentfirewallsudo ufw default deny incomingsudo ufw default allow outgoingsudo ufw allow sshsudo ufw enablefail2bansudo apt-get install fail2bansudo cp /etc/fail2ban/fail2ban.{conf,local}sudo cp /etc/fail2ban/jail.{conf,local}sudo nano /etc/fail2ban/jail.localbackend = systemdcheck statussudo fail2ban-client statussudo fail2ban-client status sshdLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Huge Network Upgrade for My Homelab", "url": "/posts/home-network-upgrade/", "categories": "homelab", "tags": "homelab, network, hardware, unifi", "date": "2020-10-24 09:00:00 -0500", "snippet": "I decided to give my Home Lab a proper upgrade for 2020 and in to 2021! I finally took the plunge and went all in with a UniFi UDM Pro and a UniFi Switch PRO 24 PoE switch and they are awesome!üì∫ W...", "content": "I decided to give my Home Lab a proper upgrade for 2020 and in to 2021! I finally took the plunge and went all in with a UniFi UDM Pro and a UniFi Switch PRO 24 PoE switch and they are awesome!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Migrate Your Databases to Kubernetes and Docker", "url": "/posts/migrate-database-docker-kubernetes/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, self-hosted, mysql, database, portainer", "date": "2020-10-17 09:00:00 -0500", "snippet": "Have you been putting off migrating your database to Docker and Kubernetes like I have? Well wait no longer. It‚Äôs simple using this step-by-step tutorial. Today, we‚Äôll move a database that‚Äôs on ...", "content": "Have you been putting off migrating your database to Docker and Kubernetes like I have? Well wait no longer. It‚Äôs simple using this step-by-step tutorial. Today, we‚Äôll move a database that‚Äôs on a virtual machine to a container that‚Äôs running in kubernetes. Oh yeah, this will also work if it‚Äôs a bare metal server too, duh. üôÇüì∫ Watch Videomysql_backup.sh#! /bin/bashBACKUP_DIR=\"/home\"MYSQL_USER=\"root\"MYSQL=/usr/bin/mysqlMYSQL_PASSWORD=\"your my sql password\"MYSQLDUMP=/usr/bin/mysqldumpMYSQL_HOST=\"mysql\"MYSQL_PORT=\"3306\"databases=`$MYSQL --user=$MYSQL_USER --host $MYSQL_HOST --port $MYSQL_PORT -p$MYSQL_PASSWORD -e \"SHOW DATABASES;\" | grep -Ev \"(Database|information_schema|performance_schema)\"`for db in $databases; do $MYSQLDUMP --host $MYSQL_HOST --port $MYSQL_PORT --force --opt --user=$MYSQL_USER -p$MYSQL_PASSWORD --databases $db | gzip &gt; \"$BACKUP_DIR/$db.gz\"doneLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Heard You Like GPUs in Servers... GPU Passthrough on Linux and Docker", "url": "/posts/gpu-passthrough-linux/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, docker, portainer, nvidia, hardware", "date": "2020-10-10 09:00:00 -0500", "snippet": "We‚Äôve already figured out how to pass through a GPU to Windows machine but why let Windows have all the fun? Today, we do it on an Ubuntu headless server that‚Äôs virtualized, run some AI and Deep L...", "content": "We‚Äôve already figured out how to pass through a GPU to Windows machine but why let Windows have all the fun? Today, we do it on an Ubuntu headless server that‚Äôs virtualized, run some AI and Deep Learning workloads, then turn up the transcoding on Plex to 11.üì∫ Watch Video88 88 88 \"\" 88 88,dPPYba, 88 8b,dPPYba, ,adPPYb,d8 ,adPPYba, 88P' \"8a 88 88P' `\"8a a8\" `Y88 a8\" \"8a 88 d8 88 88 88 8b 88 8b d8 88b, ,a8\" 88 88 88 \"8a, ,d88 \"8a, ,a8\" 8Y\"Ybbd8\"' 88 88 88 `\"YbbdP\"Y8 `\"YbbdP\"' aa, ,88 \"Y8bbdP\" If you need to passthrough a GPU, follow this guide but install Ubuntu instead.ProxmoxShut down your VM in proxmox, edit your conf file, it should be here (note, change path to your VM‚Äôs ID)/etc/pve/qemu-server/100.confadd cpu: host,hidden=1,flags=+pcid to that filestart the server.Linux Guestsudo apt-get updatesudo apt-get upgradesudo apt-get install qemu-guest-agent # this is optional if you are virtualizing this machinesudo apt-get install build-essential # build-essential is required for nvidia drivers to compilesudo apt install --no-install-recommends nvidia-cuda-toolkit nvidia-headless-450 nvidia-utils-450 libnvidia-encode-450Then reboot.Then install nvtopsudo apt-get install nvtoptensorflow workloadnvidia-docker run --rm -ti tensorflow/tensorflow:r0.9-devel-gpuRancher / KubernetesIn your Rancher server (or kubernetes host)distribution=$(. /etc/os-release;echo $ID$VERSION_ID)curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.listsudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-container-toolkitsudo apt-get install nvidia-container-runtimeupdate daemon.jsonsudo nano /etc/docker/daemon.jsonReplace with:{ \"default-runtime\": \"nvidia\", \"runtimes\": { \"nvidia\": { \"path\": \"/usr/bin/nvidia-container-runtime\", \"runtimeArgs\": [] } }}Install one more util for nvidia:sudo apt-get install -y nvidia-docker2RebootThen, using kubectl on your kubernetes / rancher hostkubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/master/nvidia-device-plugin.ymlLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Built Something for Your Homelab...", "url": "/posts/broadlink-control/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, broadlink, iot, hardware", "date": "2020-10-03 09:00:00 -0500", "snippet": "I am betting you have at least 3 infrared remote controls in your house. I am also willing to be you would love to automate some of these from time to time. Well don‚Äôt worry I have the solution f...", "content": "I am betting you have at least 3 infrared remote controls in your house. I am also willing to be you would love to automate some of these from time to time. Well don‚Äôt worry I have the solution for you! In this video we walk through setting up a self-hosted /local only Broadlink Wifi Smart Home Hub that you can use within your own home without connecting to the cloud. Added bonus, I built a Docker container you can pull down and add to your Rancher, Portainer, Synology, QNAP, or any server running Docker or Kubernetes. This includes a python backend and API as well as a ReactJS frontend so that you can discover, learn, and send commands from the web UI or even from the web API. I hope you enjoy it!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Guacamole, Your Remote Access Gateway", "url": "/posts/guacamole-remote-access-gateway/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, self-hosted, guacamole, portainer, docker, vnc, ssh, rdp", "date": "2020-09-26 09:00:00 -0500", "snippet": "Do you have a lot of virtual machines? Are you running Windows, Linux, and Mac and need remote access from a single UI? Well, Apache Guacamole is for you! Apache Guacamole is a clientless remote...", "content": "Do you have a lot of virtual machines? Are you running Windows, Linux, and Mac and need remote access from a single UI? Well, Apache Guacamole is for you! Apache Guacamole is a clientless remote access gateway that give you a web portal to access any of your clients over standard protocols like VNC, RDP, SSH, TELNET, and more. Join me in this step by step tutorial as we set up a self-hosted version of Guacamole in your homelab. As an added bonus, we‚Äôll set up 2FA (multifactor authentication) to help secure Guacamole. Oh, yeah, and we‚Äôll do this all in Docker and or Kubernetes, it‚Äôs up to you! :)üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Bridge Mode with UniFi Access Points", "url": "/posts/unifi-ap-bridge-mode/", "categories": "homelab", "tags": "homelab, network, unifi, hardware", "date": "2020-09-19 09:00:00 -0500", "snippet": "Do you have some places where you can‚Äôt run ethernet? Do want to extend your ethernet without pulling more cable? Well this is the guide for you. In this step-by-step tutorial we‚Äôll use a Ubiqui...", "content": "Do you have some places where you can‚Äôt run ethernet? Do want to extend your ethernet without pulling more cable? Well this is the guide for you. In this step-by-step tutorial we‚Äôll use a Ubiquiti UniFi AP AC PRO and connect a second as a guest, giving use remote ethernet to a remote site! This is the pro tip guide to setting up a wireless bridge! Bonus, we‚Äôll even do a live throughput test to see how much bandwidth we get running in bridge mode with 2 AC Pros!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Build & Deploy Your Own Code in Your Homelab!", "url": "/posts/self-hosted-devops-stack/", "categories": "self-hosted, homelab", "tags": "homelab, rancher, kubernetes, gitlab", "date": "2020-09-12 09:00:00 -0500", "snippet": "So you‚Äôre a software engineer or a developer who wants to self-host your own code in your own homelab? Well this is the tutorial for you! In this step-by-step guide we‚Äôll walk through setting up ...", "content": "So you‚Äôre a software engineer or a developer who wants to self-host your own code in your own homelab? Well this is the tutorial for you! In this step-by-step guide we‚Äôll walk through setting up a repo, building and testing our own code (with unit tests) in a self-hosted Gitlab CI runner in our CI pipeline, then we‚Äôll build a Docker image and push it up to a container registry, then we‚Äôll use kubectl in our CD pipeline to deploy our Docker container to our self-hosted kubernetes cluster! This all happens in a couple of minutes and then we‚Äôll truly have continuous integration and continuous delivery in our homelab!üì∫ Watch VideoHelpful videos1 - Set Up Kubernetes with Rancher2 - Set up a reverse proxy and SSL with Traefik3 - Expose Rancher and Kubernetes API SecurelyGitLab react appSee the app here:https://github.com/techno-tim/techno-reactDocker file:https://github.com/techno-tim/techno-react/blob/master/DockerfileKubernetes deployment yamlhttps://github.com/techno-tim/techno-react/blob/master/kubernetes/deployment.yamlnginx config for your react applicationhttps://github.com/techno-tim/techno-react/blob/master/nginx.confpbcopy for WSL on Windowshttps://www.techtronic.us/pbcopy-pbpaste-for-wsl/https://www.techtronic.us/pbcopy-pbpaste-for-wsl/Example config.toml for your GitLab runner.concurrent = 1check_interval = 0[session_server] session_timeout = 1800[[runners]] name = \"rancher-gitlab-runner\" url = \"https://gitlab.com\" token = \"your-gitlab-runner-token\" executor = \"docker\" [runners.custom_build_dir] [runners.cache] [runners.cache.s3] [runners.cache.gcs] [runners.docker] tls_verify = false image = \"docker:stable\" privileged = false disable_entrypoint_overwrite = false oom_kill_disable = false disable_cache = false volumes = [\\\"/var/run/docker.sock:/var/run/docker.sock\\\", \\\"/cache\\\"] shm_size = 0example ~/.kube/config for your GitLab secretapiVersion: v1kind: Configclusters:- name: \"cluster1\" cluster: server: \"https://your.rancher.url/k8s/clusters/c-cluster-id\"users:- name: \"cluster1\" user: token: \"your kubernetes token\"contexts:- name: \"cluster1\" context: user: \"cluster1\" cluster: \"cluster1\"current-context: \"cluster1\"Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "SSL, Traefik, and OAuth for Rancher! (Google, GitHub, Keycloak, Azure, and more!)", "url": "/posts/host-rancher-securely/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, github", "date": "2020-09-05 09:00:00 -0500", "snippet": "Do you want to self host your Rancher UI securely in your homelab? Have you thought about putting your Rancher UI behind Traefik and your reverse proxy to get free SSL certificates using Let‚Äôs Encr...", "content": "Do you want to self host your Rancher UI securely in your homelab? Have you thought about putting your Rancher UI behind Traefik and your reverse proxy to get free SSL certificates using Let‚Äôs Encrypt? Do you want to make your Rancher UI available publicly and secure it using 3rd party OAuth providers like Google, GitHub, Keycloak, Okta, Shibboleth, and more? Well this is the guide for you. In this step-by-step tutorial we‚Äôll walk through setting up the Rancher UI to use Traefik reverse proxy, get SSL certificates using Let‚Äôs Encrypt, host our UI publicly, and then add 3rd party OAuth providers so that we can use 2 factor authentication (2FA) and all of the other security features auth providers give us.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Portainer 2.0 -- Now with more Kubernetes!", "url": "/posts/portainer-2/", "categories": "portainer", "tags": "homelab, kubernetes, portainer", "date": "2020-08-29 09:00:00 -0500", "snippet": "What‚Äôs new in Portainer 2.0? Well, a ton. With the release of Portainer 2 you now have the option to install Kubernetes. This makes installing, managing, and deploying Kubenetes really easy. In...", "content": "What‚Äôs new in Portainer 2.0? Well, a ton. With the release of Portainer 2 you now have the option to install Kubernetes. This makes installing, managing, and deploying Kubenetes really easy. In this step by step tutorial, we‚Äôll start with nothing and end up with a fully working Portainer 2 server running Kubernetes. We‚Äôll set up k3s using k3d, install kubectl, and then spin up Portainer. As an added bonus, we‚Äôll also run a Minecraft server in Kubernetes as a proof of work. Double bonus, we‚Äôll cover how to pronounce kubectl‚Ä¶üì∫ Watch VideoLet‚Äôs get startedHere are the commands used in the video. Be sure to use them appropriately.Install ubuntuhttps://ubuntu.com/Install DockerTo install docker, see https://docs.technotim.live/posts/docker-compose-install/Install kubectlhttps://kubernetes.io/docs/tasks/tools/install-kubectl/curl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\"chmod +x ./kubectlsudo mv ./kubectl /usr/local/bin/kubectlkubectl version --clientInstall k3dhttps://github.com/rancher/k3dcurl -s https://raw.githubusercontent.com/rancher/k3d/main/install.sh | bashInstall k3sk3d cluster create portainer --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server:0\"k3d cluster create portainer --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server:0\"Install Portainerhttps://github.com/portainer/k8skubectl create namespace portainerkubectl apply -n portainer -f https://raw.githubusercontent.com/portainer/k8s/master/deploy/manifests/portainer/portainer.yamlThe Portainer UI is hosted on port `30777` Example: `http://192.168.0.1:30777`Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Host All Your Homelab Services with DuckDNS -- Free Dynamic DNS Running on Docker", "url": "/posts/duck-dns/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, duckdns", "date": "2020-08-22 09:00:00 -0500", "snippet": "Are you trying to access your self-hosted services outside of your firewall? Are you tired of trying to remember your IP when away, or worse yet, having your ISP change your IP address? Have you ...", "content": "Are you trying to access your self-hosted services outside of your firewall? Are you tired of trying to remember your IP when away, or worse yet, having your ISP change your IP address? Have you not purchased a domain yet but want to access your own personal VPN? If you answered ‚ÄúYES‚Äù to any of these, join me as we walk through this step-by-step tutorial and set up DuckDNS, the free dynamic DNS service, using Docker and then move on to use Rancher and Kubernetes.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosting Your Homelab Services with SSL -- Let's Encrypt, MetalLB, Traefik, Rancher, Kubernetes", "url": "/posts/reverse-proxy-kubernetes/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, traefik, wsl, metal-lb", "date": "2020-08-15 09:00:00 -0500", "snippet": "Are you self-hosting lots of services at home in your homelab? Have you been port forwarding or using VPN to access your self-hosted services wishing you had certificates so that you can access th...", "content": "Are you self-hosting lots of services at home in your homelab? Have you been port forwarding or using VPN to access your self-hosted services wishing you had certificates so that you can access them securely over SSL? Well after this video, you can! In this step by step tutorial we‚Äôll walk through setting up Rancher and Kubernetes with a reverse proxy, Kubernetes Ingress, MetalLB, Traefik, Let‚Äôs Encrypt, and DNS giving you free certificates.üì∫ Watch VideoInstall WSL on Windows 10https://www.youtube.com/watch?v=kL8iGErULiwInstall kubectlhttps://kubernetes.io/docs/tasks/tools/install-kubectl/Install MetalLBhttps://metallb.universe.tf/installation/kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.5/manifests/namespace.yamlkubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.5/manifests/metallb.yamlYou should only ever run this step once.kubectl create secret generic -n metallb-system memberlist --from-literal=secretkey=\"$(openssl rand -base64 128)\"sample config.yamlapiVersion: v1kind: ConfigMapmetadata: namespace: metallb-system name: configdata: config: | address-pools: - name: default protocol: layer2 addresses: - 192.168.1.240-192.168.1.250kubectl apply -f config.yamlTraefiktraefik sample answers yamlchange ‚Äústaging: true‚Äù to ‚Äústaging: false‚Äù once you confirm its all working to get the live certs--- defaultImage: true imageTag: \"1.7.14\" serviceType: \"LoadBalancer\" debug: enabled: false rbac: enabled: true ssl: enabled: true enforced: true permanentRedirect: false acme: enabled: true email: \"you@example.com\" onHostRule: true staging: true logging: true challengeType: \"dns-01\" dnsProvider: name: \"cloudflare\" existingSecretName: \"cloudflare-dns\" persistence: enabled: true dashboard: enabled: true domain: \"traefik.example.com\" auth: basic: \"\"Traefik Helmhttps://hub.helm.sh/charts/stable/traefikTraefik DNS Providershttps://docs.traefik.io/https/acme/#providersTroubleshootingBe sure that your Traefik yaml matches the code above exactly, including whitespace. Yaml is whitespace sensitive.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Host Code Server in Your Homelab -- VS Code in a Browser!", "url": "/posts/code-server-self-host/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, vscode", "date": "2020-08-08 09:00:00 -0500", "snippet": "Have you ever wanted to run VS Code in your browser? What if you had access to your terminal and could pull and commit code as well as push it up to GitHub all from a browser or tablet? That‚Äôs ex...", "content": "Have you ever wanted to run VS Code in your browser? What if you had access to your terminal and could pull and commit code as well as push it up to GitHub all from a browser or tablet? That‚Äôs exactly what code server does! In this tutorial we‚Äôll walk through step by step of how to install and configure code server to get it self-hosted in your homelab. We‚Äôll start with bare metal and virtualization and then work our way up to Docker, Kubernetes, and Rancher. Then, you don‚Äôt have to carry around your laptop anymore! You can preserve battery life on the go and leave the intensive tasks to your homelab server.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Upgrade FreeNAS to TrueNAS", "url": "/posts/upgrade-freenas-to-truenas/", "categories": "truenas", "tags": "homelab, truenas", "date": "2020-08-01 09:00:00 -0500", "snippet": "Want to migrate FreeNAS to TrueNAS today? It‚Äôs simple using this step by step tutorial. We‚Äôll walk through how to upgrade FreeNAS to TreNAS CORE. We‚Äôll cover upgrading FreeNAS to TrueNAS on a ph...", "content": "Want to migrate FreeNAS to TrueNAS today? It‚Äôs simple using this step by step tutorial. We‚Äôll walk through how to upgrade FreeNAS to TreNAS CORE. We‚Äôll cover upgrading FreeNAS to TrueNAS on a physical machine (bare metal) as well as a virtualized install of FreeNAS. We‚Äôll prepare our services, jails, plugins, virtual machines, pools, and disks for the migration and then upgrade each. We‚Äôll even show you how to do an offline upgrade of TrueNAS and then how to upgrade a ZFS pool with newer feature flags. Finally we‚Äôll walk through what‚Äôs different between TrueNAS and FreeNAS.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Proxmox Backup Server Install Tutorial", "url": "/posts/proxmox-backup-server/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2020-07-25 09:00:00 -0500", "snippet": "Proxmox Backup Server is an enterprise-class client-server backup software that backs up virtual machines, containers, and physical hosts. In this step by step tutorial, we install and configure P...", "content": "Proxmox Backup Server is an enterprise-class client-server backup software that backs up virtual machines, containers, and physical hosts. In this step by step tutorial, we install and configure Proxmox Backup Server (PBS) and back up all of our virtual machines. We‚Äôll start with nothing and end up with a fully functional Proxmox Backup Server with a ZFS datastore you can use to back up and restore your machines today.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Homelab Services Tour -- What am I running on my Homelab?", "url": "/posts/homelab-services-tour-2020/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, proxmox, truenas, docker", "date": "2020-07-18 09:00:00 -0500", "snippet": "In my homelab tour, I showed you my hardware and network setup that powers all the infrastructure at home. Then, many of you asked which services I am hosting on this hardware. Well, here it is....", "content": "In my homelab tour, I showed you my hardware and network setup that powers all the infrastructure at home. Then, many of you asked which services I am hosting on this hardware. Well, here it is. This is a tour of all the self hosted services I have running in my Homelab.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim Homelab Tour -- Server Rack and Network", "url": "/posts/homelab-hardware-tour/", "categories": "homelab", "tags": "homelab, hardware", "date": "2020-07-11 09:00:00 -0500", "snippet": "You asked for a tour of my homelab, well here it is. In this tour I will take you through my home server rack and network setup. This includes my all of my home networking equipment, my servers,...", "content": "You asked for a tour of my homelab, well here it is. In this tour I will take you through my home server rack and network setup. This includes my all of my home networking equipment, my servers, disk array, and everything else in my server rack.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Build a Slack Bot", "url": "/posts/slack-bot/", "categories": "coding", "tags": "coding, self-hosted, slack", "date": "2020-07-04 09:00:00 -0500", "snippet": "Slack is a great chat and communication tool used by small and large businesses as well as personal use. Slack has a great API and great official Node JS clients that help you automate many featur...", "content": "Slack is a great chat and communication tool used by small and large businesses as well as personal use. Slack has a great API and great official Node JS clients that help you automate many features of Slack. If you‚Äôre thinking of building a bot for Slack, be sure to follow this step by step tutorial on how to build a Slack bot in JavaScript using the Slack API and the Node Slack SDK. With this SDK, we can connect to the Slack Web API and event hook into events using the RTM API and build a bot in just a few minutes that you can add to your Slack server today.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Upgrade, Backup, and Restore Rancher 2", "url": "/posts/rancher-2-upgrade-backup-restore/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes", "date": "2020-06-27 09:00:00 -0500", "snippet": "It use to be hard to back up Rancher, but with Rancher 2 it‚Äôs super simple. Upgrading, backing up, and restoring your Rancher server should be part of your regular routine. Join me in this tutori...", "content": "It use to be hard to back up Rancher, but with Rancher 2 it‚Äôs super simple. Upgrading, backing up, and restoring your Rancher server should be part of your regular routine. Join me in this tutorial as we walk through backing up, upgrading, and restoring a single node Rancher Docker install in just a couple of minutes. Trust me, you‚Äôll feel better after you do.üì∫ Watch Video Need to install Rancher? See my guide https://www.youtube.com/watch?v=YWqBxCIfxw4 See the full guide from Rancher https://rancher.com/docs/rancher/v2.x/en/upgrades/upgrades/single-node/ Upgrade &amp; Backup Outline Create a copy of the data from your Rancher server container Create a backup tarball Pull the new Docker image Start the new Rancher server container Verify the Upgrade Clean up your old Rancher server containerSee all containersdocker psSee all containers including stopped onesdocker ps -aStop the containerdocker stop &lt;RANCHER_CONTAINER_NAME&gt;Create a data containerdocker create --volumes-from &lt;RANCHER_CONTAINER_NAME&gt; --name rancher-data-&lt;DATE&gt; rancher/rancher:&lt;RANCHER_CONTAINER_TAG&gt;Create a backup tarballdocker run --volumes-from rancher-data-&lt;DATE&gt; -v $PWD:/backup:z busybox tar pzcvf /backup/rancher-data-backup-&lt;RANCHER_VERSION&gt;-&lt;DATE&gt;.tar.gz /var/lib/rancherRun ls and you should see your tarballrancher-data-backup-v2.4.3-2020-06-21.tar.gzPull a new docker imagedocker pull rancher/rancher:&lt;RANCHER_VERSION_TAG&gt;Start your new rancher server container.Use the command you used to create your initial container, it looks something like this.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:&lt;RANCHER_VERSION&gt;Check to see if it‚Äôs runningdocker psRestoring Rancher from BackupUse the command you used to create your initial container, it looks something like this.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:&lt;RANCHER_VERSION&gt;Stop the containerdocker stop &lt;RANCHER_CONTAINER_NAME&gt;Delete state data and replace from backupdocker run --volumes-from &lt;RANCHER_CONTAINER_NAME&gt; -v $PWD:/backup \\busybox sh -c \"rm /var/lib/rancher/* -rf &amp;&amp; \\tar pzxvf /backup/rancher-data-backup-&lt;RANCHER_VERSION&gt;-&lt;DATE&gt;.tar.gz\"Start the containerdocker start &lt;RANCHER_CONTAINER_NAME&gt;Unofficial WayBackupcd /optdocker stop rancher_docker_serverif this fails it means you named your container something else, find it by running docker pssudo tar czpf rancher-data-backup-VERSION-DATE-unofficial.tar.gz ranchersudo mv rancher-data-backup-VERSION-DATE-unofficial.tar.gz ~/ docker start rancher_docker_serverRestorecd /optdocker stop rancher_docker_serverif this fails it means you named your container something else, find it by running docker pssudo tar xzpf rancher-data-backup-VERSION-DATE-unofficial.tar.gz docker start rancher_docker_serverBackup scriptYour rancher server must be named similar to rancher_docker_server_v2.4.5 otherwise you‚Äôll need to modify this.This will not work with latest tag, so be sure to pin your version.It will need to be run with sudo or scheduled in sudo crontab -erancher_backup.sh# go to rancher dircd /opt# get current rancher tagRANCHER_TAG=$(docker ps | grep rancher/rancher | grep -Eio 'rancher/rancher:.{0,6}' | sed 's/rancher\\/rancher://g')# date formatTODAY=`date -I`# stop docker containerdocker stop rancher_docker_server_$RANCHER_TAG# create tartar czpf rancher-data-backup-$RANCHER_TAG-$TODAY-unofficial.tar.gz rancher# move tarmv rancher-data-backup-$RANCHER_TAG-$TODAY-unofficial.tar.gz /home/USERNAME/backups/rancher_backups/# start serverdocker start rancher_docker_server_$RANCHER_TAGupgrading to a new versionNEW_VERSION_TAG=v2.4.8docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server_$NEW_VERSION_TAG rancher/rancher:$NEW_VERSION_TAGLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Heimdall, Your Homelab Application Dashboard", "url": "/posts/heimdall-dashboard/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, portainer, docker, heimdall, self-hosted", "date": "2020-06-20 09:00:00 -0500", "snippet": "Tired of bookmarking all of your self-hosted services only to lose them? Want access to all your sites from anywhere in the world? Well, Heimdall can help with a clean, responsive, and beautiful d...", "content": "Tired of bookmarking all of your self-hosted services only to lose them? Want access to all your sites from anywhere in the world? Well, Heimdall can help with a clean, responsive, and beautiful dashboard for all of your Homelab services. So join me in this tutorial as we install and configure Heimdall on Docker and Kubernetes and build a dashboard with live icons.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Home Assistant on Docker and Kubernetes (Open Source Home Automation)", "url": "/posts/home-assistant/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, home-assistant", "date": "2020-06-13 09:00:00 -0500", "snippet": "Are you ready to start automating your smart home with the power of open source? Do you already have Home Assistant running but need a little more power than a Raspberry Pi? If so, join me in thi...", "content": "Are you ready to start automating your smart home with the power of open source? Do you already have Home Assistant running but need a little more power than a Raspberry Pi? If so, join me in this easy to follow, step by step tutorial on installing Home Assistant on Docker, Kubernetes, and Rancher. We‚Äôll set it up, walk through and configure the UI, and then move on to configure some Wemo smart switches, Phillips Hue bulbs, Google Home / Chromecast devices, and even create a Dark Mode / Light mode automation script using Phillips Hue Scenes!üì∫ Watch Videoconfiguration.yaml# Configure a default setup of Home Assistant (frontend, api, etc)default_config:# Text to speechtts: - platform: google_translategroup: !include groups.yamlautomation: !include automations.yamlscript: !include scripts.yamlscene: !include scenes.yamlwemo: discovery: truescripts.yaml'1591564249617': alias: Dark Mode sequence: - data: group_name: Office scene_name: Gaming service: hue.hue_activate_scene - device_id: f41ccf86433148dcbd8e932d1412f12a domain: switch entity_id: switch.gaming_lights type: turn_on'1591564322588': alias: Light Mode sequence: - data: group_name: Office scene_name: Energize service: hue.hue_activate_scene - device_id: f41ccf86433148dcbd8e932d1412f12a domain: switch entity_id: switch.gaming_lights type: turn_offLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize vs. Containerize (Which should I choose?)", "url": "/posts/virtualize-vs-containerize/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, proxmox, docker, portainer", "date": "2020-06-06 09:00:00 -0500", "snippet": "Should I virtualize this? Should I containerize this? These are great questions to ask yourself when spinning up self-hosted services in your Homelab environment. We‚Äôll review my previous video ...", "content": "Should I virtualize this? Should I containerize this? These are great questions to ask yourself when spinning up self-hosted services in your Homelab environment. We‚Äôll review my previous video (20 Ways to Use a Virtual Machine (and other ideas for your homelab) and decide which should run in a Docker container, which should be virtualized with Proxmox, and which should run on hardware as bare metal.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "PiHole on Docker and Kubernetes (I almost gave up)", "url": "/posts/pihole-containerized/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, pi-hole", "date": "2020-05-30 09:00:00 -0500", "snippet": "We know you‚Äôve heard of Pihole and we know you are probably aware of how to install it but‚Ä¶ have you tried running it on Docker and Kubernetes using Rancher? Have you configured it for pfSense? D...", "content": "We know you‚Äôve heard of Pihole and we know you are probably aware of how to install it but‚Ä¶ have you tried running it on Docker and Kubernetes using Rancher? Have you configured it for pfSense? Don‚Äôt worry, I figured out all the hard stuff for you. So let‚Äôs consolidate some hardware and services.üì∫ Watch VideoUbuntu Fixsudo apt-get updatesudo apt-get install resolvconfsudo nano /etc/resolvconf/resolv.conf.d/headenabled &amp; start servicesudo systemctl enable resolvconf.servicesudo systemctl start resolvconf.serviceadd your upstream DNS (I use Quad9)nameserver 9.9.9.9update resolv.conf after adding nameserversudo resolvconf -uSet pi-hole passwordsudo pihole -a -pLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "4 Ways to Install Plex (one is unexpected)", "url": "/posts/plex-containerized/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, portainer, docker, plex, self-hosted", "date": "2020-05-23 09:00:00 -0500", "snippet": "I‚Äôm a huge fan of virtualization and containerization (if you couldn‚Äôt tell already)! Today, we‚Äôll walk though the various ways to install Plex step-by-step. We also see how easy it is to get Ple...", "content": "I‚Äôm a huge fan of virtualization and containerization (if you couldn‚Äôt tell already)! Today, we‚Äôll walk though the various ways to install Plex step-by-step. We also see how easy it is to get Plex running on Docker and Kubernetes using Rancher.üì∫ Watch VideoId for ContainerGet Id and Group Idid yourusernameShould see something like this:uid=1001(technotim) gid=1001(technotim) groups=1001(technotim),27(sudo),999(docker)Mount Shares During BootInstall cifs-utilssudo apt-get install cifs-utilsCreate credentials files for sharesudo nano /home/technotim/.smbcredentialsSet permissionschmod 600 ~/.smbcredentialsusername=yourUsyourusernameername password=yourPasswordEdit /etc/fstab//192.168.0.22/plex_media/movies /mnt/movies cifs credentials=/home/technotim/.smbcredentials 0 0//192.168.0.22/plex_media/music /mnt/music cifs credentials=/home/technotim/.smbcredentials 0 0Then reboot orsudo mount -ato mountLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Virtualize Your Home Router / Firewall Using pfSense", "url": "/posts/proxmox-pfsense/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-05-16 09:00:00 -0500", "snippet": "It‚Äôs time to say goodbye to your home router and start virtualizing it using Proxmox and pfSense.pfSense Community Edition Download: https://www.pfsense.org/download/Get started with Proxmox today:...", "content": "It‚Äôs time to say goodbye to your home router and start virtualizing it using Proxmox and pfSense.pfSense Community Edition Download: https://www.pfsense.org/download/Get started with Proxmox today: https://www.youtube.com/watch?v=hdoBQNI_Ab8üì∫ Watch VideoEnable PCI Passthroughhttps://pve.proxmox.com/wiki/PCI(e)_PassthroughLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Setup and Best Settings for Streamlabs OBS on Mac", "url": "/posts/streamlabs-mac/", "categories": "streaming", "tags": "streaming, mac, streamlabs, obs", "date": "2020-05-09 09:00:00 -0500", "snippet": "Streamlabs OBS for MacOS is here! In this video we‚Äôll walk through setting up Streamlabs step by step. We‚Äôll install Streamlabs OBS, set up desktop audio with iShowU Audio Capture so you can capt...", "content": "Streamlabs OBS for MacOS is here! In this video we‚Äôll walk through setting up Streamlabs step by step. We‚Äôll install Streamlabs OBS, set up desktop audio with iShowU Audio Capture so you can capture desktop audio, configure our webcam and game capture with a Cam Link, set up our alerts, configure the best possible streaming settings for Streamlabs, adjust our streaming layout, and go live.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Build a Twitch Bot Using TMI.JS (a moderator bot)", "url": "/posts/twitch-bot/", "categories": "coding", "tags": "coding, self-hosted, twitch, javascript", "date": "2020-05-03 09:00:00 -0500", "snippet": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good. Let‚Äôs build a Twitch moderator bot using tmi.js! The Twitch API is powerful and and already has lots of great bots however no ...", "content": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good. Let‚Äôs build a Twitch moderator bot using tmi.js! The Twitch API is powerful and and already has lots of great bots however no bot has the flexibility of creating your own! In this video I will show you how to build a Twitch bot using TMI.JS from start to finish. You‚Äôll see how to use the developer portal, set up oauth, set the correct scopes, get an access token, create a bot using JavaScript, NodeJS, and NPM, invite the bot to your Twitch channel, and have it moderate your chat. Also, We have made this bot open source and will continue to contribute to this bot.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "20 Ways to Use a Virtual Machine (and other ideas for your homelab)", "url": "/posts/20-ways-virtual-machine/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-04-26 09:00:00 -0500", "snippet": "Looking for new ideas on how to use your virtual machines? Well, here‚Äôs the top 20 ways to use your virtual machines in your homelab.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https:...", "content": "Looking for new ideas on how to use your virtual machines? Well, here‚Äôs the top 20 ways to use your virtual machines in your homelab.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Convert ANY Desk to a STANDING Desk: Home Office Upgrade", "url": "/posts/office-upgrade/", "categories": "vlog", "tags": "homelab, office, hardware", "date": "2020-04-19 09:00:00 -0500", "snippet": "I decided to tear apart our office and convert my old Ikea hack table tops into a standing desk. Oh, and I also clamped on 3 - 27‚Äù 1440p gaming monitors while I was at it üòâüì∫ Watch VideoLinks‚öôÔ∏è See...", "content": "I decided to tear apart our office and convert my old Ikea hack table tops into a standing desk. Oh, and I also clamped on 3 - 27‚Äù 1440p gaming monitors while I was at it üòâüì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Docker, Rancher, Kubernetes... Minecraft? (Setup and Install Tutorial)", "url": "/posts/docker-rancher-kubernetes/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, docker, minecraft, gaming", "date": "2020-04-09 09:00:00 -0500", "snippet": "If you want to set up Kubernetes at home using Rancher to run Docker containers, this is the guide for you. This is a step by step tutorial of how to install and configure Rancher, Docker, and Kube...", "content": "If you want to set up Kubernetes at home using Rancher to run Docker containers, this is the guide for you. This is a step by step tutorial of how to install and configure Rancher, Docker, and Kubernetes for your homelab. In this video we set up and configure a Minecraft server in just a matter of minutes with some enterprise like features. You can use this same process to spin up other Docker containers at home on your server or desktop.üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearInstall DockerTo install docker, see https://docs.technotim.live/posts/docker-compose-install/Install RancherThe two paths in the workload configuration need to be reversed: Path on the Node should be mc Mount Point should be /dataYou‚Äôll want to use a command similar to this so that there aren‚Äôt any port conflicts with other services or kubernetes itself.Also, you may want to consider pinning your docker tag to a version other than latest to make backing up and upgrading easier. See here for the latest version.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:latestTroubleshooting Make sure you have a static IP on your Rancher host Be sure to use the ports above if you want to add SSL later and use commands in future videos The new UI is now the ‚ÄúCluster Explorer‚Äù. You can toggle between this and the ‚ÄúCluser Manager‚Äù UI by clicking the button. Do not create workloads in the local cluster. This is a management cluster for Rancher. You should create new cluster for your workload, just like in this video.Links‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Update Proxmox VE (No subscription required)", "url": "/posts/proxmox-update/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2020-04-02 09:00:00 -0500", "snippet": "Have you been thinking about updating your Proxmox VE server? Well, what are you waiting for? Upgrade your Proxmox server in your home lab in just a few minutes with this step-by-step tutorial!üì∫ ...", "content": "Have you been thinking about updating your Proxmox VE server? Well, what are you waiting for? Upgrade your Proxmox server in your home lab in just a few minutes with this step-by-step tutorial!üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearEdit /etc/apt/sources.listdeb http://ftp.us.debian.org/debian buster main contribdeb http://ftp.us.debian.org/debian buster-updates main contrib# security updatesdeb http://security.debian.org buster/updates main contrib# not for production usedeb http://download.proxmox.com/debian buster pve-no-subscriptionRunapt-get updateapt dist-upgradeLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Remote Gaming! (and Video Encoding using Proxmox and GPU Passthrough)", "url": "/posts/gpu-passthrough/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-03-26 09:00:00 -0500", "snippet": "Are you looking to build a remote gaming machine and passthrough your GPU to a virtual machine? Do you want to use GPU acceleration for transcoding Plex or Adobe Media Encoder? Do you dream of se...", "content": "Are you looking to build a remote gaming machine and passthrough your GPU to a virtual machine? Do you want to use GPU acceleration for transcoding Plex or Adobe Media Encoder? Do you dream of setting up Steam Link or Remote Play In Home Streaming and streaming games to any screen in your house? If so, this complete step-by-step guide of how to passthrough your Nvidia or AMD video card through to a guest VM using Proxmox VE! If not, well, please watch this anyway.üì∫ Watch Videoedit grub/etc/default/grubChange this line:GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on pcie_acs_override=downstream,multifunction video=efifb:eek:ff\"runupdate-grubrebootrebootEdit/etc/modulesvfiovfio_iommu_type1vfio_pcivfio_virqfdrebootreboot/etc/pve/qemu-server/qm.conf (will be something like 100.conf)agent: 1balloon: 4096bios: ovmfboot: cdnbootdisk: virtio0cores: 8cpu: host,hidden=1,flags=+pcidefidisk0: fast1:vm-100-disk-1,size=128Khostpci0: 02:00,pcie=1,x-vga=1hostpci1: 04:00.0,rombar=0ide0: none,media=cdrommachine: q35memory: 14336name: beamnuma: 0ostype: win10scsihw: virtio-scsi-pcismbios1: uuid=d6febb0d-4242-4bdb-8aea-7c03e7b5df0esockets: 1unused0: storage1:vm-100-disk-0unused1: slow1:vm-100-disk-0virtio0: fast1:vm-100-disk-0,size=80Gvmgenid: 524a58dd-7e3e-44f4-abf4-9de0f490d936Add your PCI deviceedit /etc/modprobe.d/pve-blacklist.confblacklist nvidiafbblacklist nvidiablacklist radeonblacklist nouveauTroubleshootingIf your Windows machine fails to boot, you may want to create a new Windows VM using UEFI rather than BIOS.If your motherboard has onboard GPU set in BIOS to use the onboard primarily or exclusively to free up PCIE GPULinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Ubuntu Server with Proxmox VE", "url": "/posts/proxmox-ubuntu-server/", "categories": "proxmox", "tags": "proxmox, ubuntu, linux", "date": "2020-03-20 09:00:00 -0500", "snippet": "Do you need to virtualize Ubuntu Server with Proxmox? Join me as we install and configure Ubuntu Server LTS on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinks‚öôÔ∏è See al...", "content": "Do you need to virtualize Ubuntu Server with Proxmox? Join me as we install and configure Ubuntu Server LTS on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Windows 10 with Proxmox VE", "url": "/posts/proxmox-windows/", "categories": "proxmox", "tags": "proxmox, windows", "date": "2020-03-18 09:00:00 -0500", "snippet": "Do you need to virtualize Windows 10 with Proxmox? Join me as we install and configure Windows 10 on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinks‚öôÔ∏è See all the hard...", "content": "Do you need to virtualize Windows 10 with Proxmox? Join me as we install and configure Windows 10 on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Proxmox VE Install and Setup Tutorial", "url": "/posts/proxmox-setup/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-03-14 09:00:00 -0500", "snippet": "Do you need to virtualize something at home? Thinking of building your own Homelab? (The answer is YES). Join me as we install and configure Proxmox VE step-by-step.üì∫ Watch VideoLinks‚öôÔ∏è See all t...", "content": "Do you need to virtualize something at home? Thinking of building your own Homelab? (The answer is YES). Join me as we install and configure Proxmox VE step-by-step.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Setting Up Windows for JavaScript Development THE RIGHT WAY (WSL Terminal NVM Node Yarn VS Code ZSH)", "url": "/posts/windows-developer-setup/", "categories": "coding", "tags": "windows, coding, javascript, wsl, nvm, zsh, node, windows, linux, ubuntu", "date": "2020-03-12 09:00:00 -0500", "snippet": "You want to get started developing JavaScript with NodeJS, ReactJS, or AngularJS but you‚Äôre not sure how to get started? This is a complete, step by step guide on how to configure your Windows mac...", "content": "You want to get started developing JavaScript with NodeJS, ReactJS, or AngularJS but you‚Äôre not sure how to get started? This is a complete, step by step guide on how to configure your Windows machines for JavaScript development the right way. You‚Äôll learn how to install and configure Windows, the new Windows Terminal, WSL, Ubuntu, ZSH with Oh My ZSH, yarn, NPM, NVM, NodeJS, and VS Code. We‚Äôll also configure our git client for SSH access to GitHub. This is the perfect beginner tutorial for anyone trying to develop software on a Windows PC.üì∫ Watch VideoUpdate Ubuntusudo apt-get updatesudo apt-get upgradeinstall zshellsudo apt-get install zshoh-my-zshCheck this site for the command https://ohmyz.sh/#installIt should be something like this:sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"nvmBe sure zshell and oh-my-zsh are working before continuingCheck this site for the command https://github.com/nvm-sh/nvmIt should be something like this, but be sure to use the version from the link abovecurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bashIf nvm doesn‚Äôt work, check this https://youtu.be/kL8iGErULiw?t=507Close all terminals and all VS Code instances after doing this stepInstall Nodenvm install 12.16.1Install yarnBe sure nvm and node are working before continuingCheck this site for the latest command https://classic.yarnpkg.com/en/docs/install/#alternatives-stableIt should be something like this, but be sure to use the version from the link abovecurl -o- -L https://yarnpkg.com/install.sh | bashConfigure GitYou‚Äôll want to follow this guide for configuring git. Be sure to follow the LINUX versionhttps://docs.github.com/en/github/using-git/getting-started-with-git-and-githubgit config --global user.name \"Techno Tim\"git config --global user.email \"your_email@example.com\"ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"eval $(ssh-agent -s)Cloning a repomkdir code &amp;&amp; cd codeBe sure you choose the right repo before cloning, this is just an examplegit clone git@github.com:techno-tim/techno-boto-discord.gitcd techno-boto-discordyarnContinuing with the bot turotials Discord Bot https://www.youtube.com/watch?v=YSZcyz2-twQ Twitch Bot https://www.youtube.com/watch?v=7uSjKbAUHXg Slack Bot https://www.youtube.com/watch?v=AajBk59nOgwLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How To Create an iSCSI Target with TrueNAS", "url": "/posts/iscsi-truenas/", "categories": "truenas", "tags": "homelab, rancher, kubernetes", "date": "2020-03-06 08:00:00 -0600", "snippet": "Setting up iSCSI with TrueNAS and Windows 10 is super simple with TrueNAS. This is an easy way to have a hard drive installed on your machine that isn‚Äôt really attached, it lives on the network.üì∫ ...", "content": "Setting up iSCSI with TrueNAS and Windows 10 is super simple with TrueNAS. This is an easy way to have a hard drive installed on your machine that isn‚Äôt really attached, it lives on the network.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Install and Virtualize TrueNAS with Proxmox", "url": "/posts/virtualize-truenas/", "categories": "truenas", "tags": "truenas, proxmox, windows", "date": "2020-03-01 08:00:00 -0600", "snippet": "Do you want a DIY NAS? Do you want to set up TrueNAS? Have you considered virtualizing TrueNAS with Proxmox? In this video we‚Äôll walk through installing and setting up TrueNAS and configure a sa...", "content": "Do you want a DIY NAS? Do you want to set up TrueNAS? Have you considered virtualizing TrueNAS with Proxmox? In this video we‚Äôll walk through installing and setting up TrueNAS and configure a samba share for Windows. We‚Äôll also install it on a virtual server using ProxmoxVE that‚Äôs running in my Homelab. Both are free and open source.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Let's Build a Discord Bot Using DiscordJS - Moderator Bot", "url": "/posts/discord-bot/", "categories": "coding", "tags": "coding, javascript, discord, self-hosted", "date": "2020-02-17 08:00:00 -0600", "snippet": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good. Let‚Äôs build a discord moderator bot using discord.js! Discord is powerful chat + video client and already has lots of great bo...", "content": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good. Let‚Äôs build a discord moderator bot using discord.js! Discord is powerful chat + video client and already has lots of great bots however no bot has the flexibility of creating your own! In this video I will show you how to build a discord bot using DiscordJS from start to finish. You‚Äôll see how to use the developer portal, create a bot using JavaScript, NodeJS, and NPM, invite the bot to your Discord server and have it moderate some of your channels. We have made this bot open source and will continue to contribute to this bot.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Touch Portal vs. Stream Deck", "url": "/posts/touchportal-vs-streamdeck/", "categories": "streaming", "tags": "touch-portal, stream-deck, streaming, hardware", "date": "2020-02-02 08:00:00 -0600", "snippet": "Let‚Äôs compare Touch Portal to Stream Deck. We‚Äôll walk through some of the similarities and differences between the free software Touch Portal and the Stream Deck hardware/software combination. We...", "content": "Let‚Äôs compare Touch Portal to Stream Deck. We‚Äôll walk through some of the similarities and differences between the free software Touch Portal and the Stream Deck hardware/software combination. We‚Äôll see if we can set up, configure in a step by step guide, and clone our Stream Deck interface for OBS using Touch Portal and a mobile device, we‚Äôll review features and experiences, then we‚Äôll choose a winner in the Touch Portal vs. Stream Deck face off!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Upgrade Your ROOM (One of the most OVERLOOKED stream upgrades!)", "url": "/posts/upgrade-your-room/", "categories": "streaming", "tags": "office, hardware, twitch", "date": "2020-01-20 08:00:00 -0600", "snippet": "There are so many upgrades out there for streaming, what do I start with? Video card? Microphone? Audio? CPU? RAM? Lights? I started with one that is overlooked by many streamers, and it‚Äôs the roo...", "content": "There are so many upgrades out there for streaming, what do I start with? Video card? Microphone? Audio? CPU? RAM? Lights? I started with one that is overlooked by many streamers, and it‚Äôs the room I stream in. So come along with me as give a tour of my stream room makeover! Hopefully this video gives you some stream background ideas for sofas, lights, smart LED lights, accent lighting, coffee tables, plants, rugs, bookshelves, and even Hyrule Historia as I walk through my stream studio setup!üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "BEST OBS Streaming Settings 2021! üî¥ (Quality, Frame Rate, Bit Rate, Audio, 1080p 60/FPS & MORE!)", "url": "/posts/obs-best-settings/", "categories": "streaming", "tags": "obs, twitch, streaming", "date": "2020-01-14 08:00:00 -0600", "snippet": "Do you want the best settings for OBS in 2020? This is the ultimate OBS settings guide with the BEST OBS settings for streaming Fortnite, Just Chatting APEX Legends, PUBG, or really ANY game. This...", "content": "Do you want the best settings for OBS in 2020? This is the ultimate OBS settings guide with the BEST OBS settings for streaming Fortnite, Just Chatting APEX Legends, PUBG, or really ANY game. This video includes the best settings for quality, frame rate, bit rate, and audio for streaming at 60 frames per second (FPS) at 1080p (max settings for streamers). This guide works with OBS Studio, Streamlabs OBS (SLOBS), and OBS.LIVE (from StreamElements). I also include various Windows settings and tweaks to give you the best performance while streaming. I even cover the new NVENC settings (NVIDIA NVENC H.264 (new) ) for NVidia graphics cards with Turing Architecture. This is a great guide for anyone who wants to tweak their existing settings or have just installed it for the first time with the default settings.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "GoXLR WITH WIRELESS HEADSET - Connect ANY wireless bluetooth headphones", "url": "/posts/goxlr-wireless/", "categories": "streaming", "tags": "goxlr, streaming, twitch, hardware", "date": "2020-01-07 08:00:00 -0600", "snippet": "Connect any wireless headset to a GoXLR or GoXLR mini. In this video, I show you how you can connect any pair of wireless bluetooth headphones to a GoXLR or GoXLR mini. They can be AirPods, Beats,...", "content": "Connect any wireless headset to a GoXLR or GoXLR mini. In this video, I show you how you can connect any pair of wireless bluetooth headphones to a GoXLR or GoXLR mini. They can be AirPods, Beats, Beats Wireless Pro, Bose, or any other wireless bluetooth headset. You can use this bluetooth adapter transmitter to stream while using the GoXLR or GoXLR mini.I bought these products with my own money because I thought they were cool. Nothing in this video was sponsored.üì∫ Watch VideoLinks‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" } ]
